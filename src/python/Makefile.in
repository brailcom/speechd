
prefix = @prefix@
datadir = @datadir@
sysconfdir = @sysconfdir@
spdconforigdir = @spdconforigdir@
datarootdir = @datarootdir@

SPD_CONF_PATH_PY="speechd_config/spd_conf_path.py"

all:
	echo "SPD_CONF_ORIG_PATH=\"@spdconforigdir@\"" > speechd_config/paths.py
	echo "SPD_CONF_PATH=\"@spdconfdir@\"" >> speechd_config/paths.py
	echo "SPD_SOUND_DATA_PATH=\"@snddatadir@\"" >> speechd_config/paths.py
	echo "SPD_DESKTOP_CONF_PATH=\"@spddesktopconforigdir@\"" >> speechd_config/paths.py

	echo "SPD_SPAWN_CMD=\"@prefix@/bin/speech-dispatcher\"" > speechd/paths.py

install:
	if test -x /usr/bin/python; then \
		./setup.py install --root="${DESTDIR}" --prefix=${prefix}; \
	else \
		echo "Python not found, not installing speechd module nor spd-conf"; \
	fi
	cp speechd_config/test.wav ${DESTDIR}@snddatadir@

	if test ! -d ${DESTDIR}@spddesktopconforigdir@; then \
		mkdir -p ${DESTDIR}@spddesktopconforigdir@; \
	fi

	cp speechd_config/speechd.desktop ${DESTDIR}@spddesktopconforigdir@/

uninstall:
	rm -f ${DESTDIR}@snddatadir@/test.wav
	rm -rf ${DESTDIR}@spddesktopconforigdir@

clean:
	rm -f *.pyc
	rm -rf build
	rm -f speechd_config/paths.py
	rm -f speechd/spawn.py

distclean: clean

maintainer-clean: clean

distdir:


check:

