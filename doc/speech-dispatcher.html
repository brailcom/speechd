<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.7, http://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Speech Dispatcher</title>

<meta name="description" content="Speech Dispatcher">
<meta name="keywords" content="Speech Dispatcher">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="#Top" rel="start" title="Top">
<link href="#Index-of-Concepts" rel="index" title="Index of Concepts">
<link href="dir.html#Top" rel="up" title="(dir)">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="en">
<h1 class="settitle" align="center">Speech Dispatcher</h1>






<span id="Top"></span><div class="header">
<p>
Next: <a href="#Introduction" accesskey="n" rel="next">Introduction</a>, Previous: <a href="dir.html#Top" accesskey="p" rel="prev">(dir)</a>, Up: <a href="dir.html#Top" accesskey="u" rel="up">(dir)</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<h1 class="node-heading">Top</h1>

<p>This manual documents Speech Dispatcher, version 0.10.0.
</p>
<p>Copyright &copy; 2001, 2002, 2003, 2006 Brailcom, o.p.s.
</p>
<blockquote>
<p>Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.2 or
any later version published by the Free Software Foundation; with no
Invariant Sections, with no Front-Cover Texts and no Back-Cover Texts.
A copy of the license is included in the section entitled &ldquo;GNU Free
Documentation License.&rdquo;
</p></blockquote>

<p>You can also (at your option) distribute this manual under the GNU
General Public License:
</p>
<blockquote>
<p>Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU General Public License as published by the
Free Software Foundation; either version 2 of the License, or (at your
option) any later version.
</p>
<p>A copy of the license is included in the section entitled &ldquo;GNU
General Public License&rdquo;
</p></blockquote>


<span id="Menu"></span><h3 class="heading">Menu</h3>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#Introduction" accesskey="1">Introduction</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">What is Speech Dispatcher.
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#User_0027s-Documentation" accesskey="2">User's Documentation</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Usage, Configuration...
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Technical-Specifications" accesskey="3">Technical Specifications</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Client-Programming" accesskey="4">Client Programming</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Documentation for application developers.
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Server-Programming" accesskey="5">Server Programming</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Documentation for project contributors.
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

</pre></th></tr><tr><td align="left" valign="top">&bull; <a href="#Download-and-Contact" accesskey="6">Download and Contact</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to get Speech Dispatcher and how to contact us
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Reporting-Bugs" accesskey="7">Reporting Bugs</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to report a bug
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#How-You-Can-Help" accesskey="8">How You Can Help</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">What is needed
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

</pre></th></tr><tr><td align="left" valign="top">&bull; <a href="#Appendices" accesskey="9">Appendices</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#GNU-General-Public-License">GNU General Public License</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Copying conditions for Speech Dispatcher
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#GNU-Free-Documentation-License">GNU Free Documentation License</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Copying conditions for this manual
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">

</pre></th></tr><tr><td align="left" valign="top">&bull; <a href="#Index-of-Concepts" rel="index">Index of Concepts</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<span id="Introduction"></span><div class="header">
<p>
Next: <a href="#User_0027s-Documentation" accesskey="n" rel="next">User's Documentation</a>, Previous: <a href="#Top" accesskey="p" rel="prev">Top</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Introduction-1"></span><h2 class="chapter">1 Introduction</h2>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#Motivation" accesskey="1">Motivation</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Why Speech Dispatcher?
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Basic-Design" accesskey="2">Basic Design</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How does it work?
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Features-Overview" accesskey="3">Features Overview</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">What are the assets?
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Current-State" accesskey="4">Current State</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">What is done?
</td></tr>
</table>

<hr>
<span id="Motivation"></span><div class="header">
<p>
Next: <a href="#Basic-Design" accesskey="n" rel="next">Basic Design</a>, Previous: <a href="#Introduction" accesskey="p" rel="prev">Introduction</a>, Up: <a href="#Introduction" accesskey="u" rel="up">Introduction</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Motivation-1"></span><h3 class="section">1.1 Motivation</h3>
<span id="index-Basic-ideas_002c-Motivation"></span>
<span id="index-Philosophy"></span>

<p>Speech Dispatcher is a device independent layer for speech synthesis
that provides a common easy to use interface for both client
applications (programs that want to speak) and for software
synthesizers (programs actually able to convert text to speech).
</p>
<p>High quality speech synthesis is now commonly available both as
propriatary and Free Software solutions. It has a wide field of
possible uses from educational software to specialized systems,
e.g. in hospitals or laboratories. It is also a key compensation tool
for the visually impaired users. For them, it is one of the two
possible ways of getting output from a computer (the second one being
a Braille display).
</p>
<p>The various speech synthesizers are quite different, both in their
interfaces and capabilities. Thus a general common interface is needed
so that the client application programmers have an easy way to use
software speech synthesis and don&rsquo;t have to care about peculiar
details of the various synthesizers.
</p>
<p>The absence of such a common and standardized interface and thus the
difficulty for programmers to use software speech synthesis has
been a major reason why the potential of speech synthesis technology
is still not fully expoited.
</p>
<p>Ideally, there would be little distinction for applications whether
they output messages on the screen or via speech. Speech Dispatcher
can be compared to what a GUI toolkit is for the graphical
interface. Not only does it provide an easy to use interface, some
kind of theming and configuration mechanisms, but also it takes care
of some of the issues inherent with this particular mode of output,
such as the need for speech message serialization and interaction with
the audio subsystem.
</p>
<hr>
<span id="Basic-Design"></span><div class="header">
<p>
Next: <a href="#Features-Overview" accesskey="n" rel="next">Features Overview</a>, Previous: <a href="#Motivation" accesskey="p" rel="prev">Motivation</a>, Up: <a href="#Introduction" accesskey="u" rel="up">Introduction</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Design"></span><h3 class="section">1.2 Design</h3>
<span id="index-Design"></span>

<span id="Current-Design"></span><h3 class="heading">Current Design</h3>
<p>The communication between all applications and synthesizers, when
implemented directly, is a mess. For this purpose, we wanted
Speech Dispatcher to be a layer separating applications and
synthesizers so that applications wouldn&rsquo;t have to care about
synthesizers and synthesizers wouldn&rsquo;t have to care about interaction
with applications.
</p>
<p>We decided we would implement Speech Dispatcher as a server receiving
commands from applications over a protocol called <code>SSIP</code>,
parsing them if needed, and calling the appropriate functions
of output modules communicating with the different synthesizers.
These output modules are implemented as plug-ins, so that the user
can just load a new module if he wants to use a new synthesizer.
</p>
<p>Each client (application that wants to speak) opens a socket
connection to Speech Dispatcher and calls functions like say(),
stop(), and pause() provided by a library implementing the protocol.
This shared library is still on the client side and sends Speech
Dispatcher SSIP commands over the socket. When the messages arrive at
Speech Dispatcher, it parses them, reads the text that should be said
and puts it in one of several queues according to the priority of the
message and other criteria. It then decides when, with which
parameters (set up by the client and the user), and on which
synthesizer it will say the message. These requests are handled by the
output plug-ins (output modules) for different hardware and software
synthesizers and then said aloud.
</p>
<img src="figures/architecture.png" alt="Speech Dispatcher architecture">

<p>See also the detailed description <a href="#Client-Programming">Client Programming</a> interfaces, and
<a href="#Server-Programming">Server Programming</a> documentation.
</p>
<span id="Future-Design"></span><h3 class="heading">Future Design</h3>

<p>Speech Dispatcher currently mixes two important features: common
low-level interface to multiple speech synthesizers and message
management (including priorities and history). This became even more
evident when we started thinking about handling messages intended for
output on braille devices.  Such messages of course need to be
synchronized with speech messages and there is little reason why the
accessibility tools should send the same message twice for these two
different kinds of output used by blind people (often simultaneously).
Outside the world of accessibility, applications also want to either
have full control over the sound (bypass prioritisation) or to only
retrieve the synthesized data, but not play them immediatelly.
</p>
<p>We want to eventually split Speech Dispatcher into two independent
components: one providing a low-level interface to speech synthesis
drivers, which we now call TTS API Provider and is already largely
implemented in the Free(b)Soft project, and the second doing message
managemenet, called Message Dispatcher. This will allow Message
Dispatcher to also output on Braille as well as to use the TTS API
Provider separately.
</p>
<p>From implementation point of view, an opportunity for new design based
on our previous experiences allowed us to remove several bottlenecks
for speed (responsiveness), ease of use and ease of implementation of
extensions (particularly output modules for new synthesizers). From
the architecture point of view and possibilities for new developments,
we are entirely convinced that both the new design in general and the
inner design of the new components is much better.
</p>
<p>While a good API and its implementation for Braille are already
existent in the form of BrlAPI, the API for speech is now under
developement. Please see another architecture diagram showing how we
imagine Message Dispatcher in the future.
</p>
<img src="figures/architecture-future.png" alt="Speech Dispatcher architecture">

<p>References:
<a href="http://www.freebsoft.org/tts-api/">http://www.freebsoft.org/tts-api/</a>
<a href="http://www.freebsoft.org/tts-api-provider/">http://www.freebsoft.org/tts-api-provider/</a>
</p>
<hr>
<span id="Features-Overview"></span><div class="header">
<p>
Next: <a href="#Current-State" accesskey="n" rel="next">Current State</a>, Previous: <a href="#Basic-Design" accesskey="p" rel="prev">Basic Design</a>, Up: <a href="#Introduction" accesskey="u" rel="up">Introduction</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Features-Overview-1"></span><h3 class="section">1.3 Features Overview</h3>
<p>Speech Dispatcher from user&rsquo;s point of view:
</p>
<ul>
<li> ability to freely combine applications with your favorite synthesizer
</li><li> message synchronization and coordination
</li><li> less time devoted to configuration of applications
</li></ul>

<p>Speech Dispatcher from application programmers&rsquo;s point of view:
</p>
<ul>
<li> easy way to make your applications speak
</li><li> common interface to different synthesizers
</li><li> higher level synchronization of messages (priorities)
</li><li> no need to take care about configuration of voice(s)
</li></ul>

<hr>
<span id="Current-State"></span><div class="header">
<p>
Previous: <a href="#Features-Overview" accesskey="p" rel="prev">Features Overview</a>, Up: <a href="#Introduction" accesskey="u" rel="up">Introduction</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Current-State-1"></span><h3 class="section">1.4 Current State</h3>
<span id="index-Synthesizers"></span>
<span id="index-Other-programs"></span>

<p>In this version, most of the features of Speech Dispatcher are
implemented and we believe it is now useful for applications as a
device independent Text-to-Speech layer and an accessibility message
coordination layer.
</p>
<p>Currently, one of the most advanced applications that works with
Speech Dispatcher is <code>speechd-el</code>. This is a client for Emacs,
targeted primarily for blind people. It is similar to Emacspeak,
however the two take a bit different approach and serve different user
needs. You can find speechd-el on
<a href="http://www.freebsoft.org/speechd-el/">http://www.freebsoft.org/speechd-el/</a>. speechd-el provides
speech output when using nearly any GNU/Linux text interface, like
editing text, reading email, browsing the web, etc.
</p>
<p>Orca, the primary screen reader for the Gnome Desktop, supports Speech
Dispatcher directly since its version 2.19.0.  See
<a href="http://live.gnome.org/Orca/SpeechDispatcher">http://live.gnome.org/Orca/SpeechDispatcher</a> for more
information.
</p>
<p>We also provide a shared C library, a Python library, a Java, Guile
and a Common Lisp libraries that implement the SSIP functions of
Speech Dispatcher in higher level interfaces. Writing client
applications in these languages should be quite easy.
</p>
<p>On the synthesis side, there is good support for Festival, eSpeak,
Flite, Cicero, IBM TTS, MBROLA, Epos, Dectalk software, Cepstral Swift
and others. See See <a href="#Supported-Modules">Supported Modules</a>.
</p>
<p>We decided not to interface the simple hardware speech devices as they
don&rsquo;t support synchronization and therefore cause serious problems
when handling multiple messages.  Also they are not extensible, they
are usually expensive and often hard to support. Today&rsquo;s computers are
fast enough to perform software speech synthesis and Festival is a
great example.
</p>
<hr>
<span id="User_0027s-Documentation"></span><div class="header">
<p>
Next: <a href="#Technical-Specifications" accesskey="n" rel="next">Technical Specifications</a>, Previous: <a href="#Introduction" accesskey="p" rel="prev">Introduction</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="User_0027s-Documentation-1"></span><h2 class="chapter">2 User&rsquo;s Documentation</h2>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#Installation" accesskey="1">Installation</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to get it installed in the best way.
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Running" accesskey="2">Running</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">The different ways to start it.
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Troubleshooting" accesskey="3">Troubleshooting</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">What to do if something doesn&rsquo;t work...
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Configuration" accesskey="4">Configuration</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to configure Speech Dispatcher.
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Tools" accesskey="5">Tools</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">What tools come with Speech Dispatcher.
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Synthesis-Output-Modules" accesskey="6">Synthesis Output Modules</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Drivers for different synthesizers.
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Security" accesskey="7">Security</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Security mechanisms and restrictions.
</td></tr>
</table>

<hr>
<span id="Installation"></span><div class="header">
<p>
Next: <a href="#Running" accesskey="n" rel="next">Running</a>, Previous: <a href="#User_0027s-Documentation" accesskey="p" rel="prev">User's Documentation</a>, Up: <a href="#User_0027s-Documentation" accesskey="u" rel="up">User's Documentation</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Installation-1"></span><h3 class="section">2.1 Installation</h3>

<p>This part only deals with the general aspects of installing
Speech Dispatcher. If you are compiling from source code (distribution
tarball or git), please refer to the file <samp>INSTALL</samp> in your
source tree.
</p>
<span id="The-requirements"></span><h4 class="subsection">2.1.1 The requirements</h4>

<p>You will need these components to run Speech Dispatcher:
</p><ul>
<li> glib 2.0  (<a href="http://www.gtk.org">http://www.gtk.org</a>)
</li><li> libdotconf 1.3 (<a href="http://github.com/williamh/dotconf">http://github.com/williamh/dotconf</a>)
</li><li> pthreads
</li></ul>

<p>We recommend to also install these packages:
</p><ul>
<li> Festival (<a href="http://www.cstr.ed.ac.uk/projects/festival/">http://www.cstr.ed.ac.uk/projects/festival/</a>)
 </li><li> festival-freebsoft-utils 0.3+ (<a href="http://www.freebsoft.org/festival-freebsoft-utils">http://www.freebsoft.org/festival-freebsoft-utils</a>)
 </li><li> Sound icons library <br> (<a href="http://www.freebsoft.org/pub/projects/sound-icons/sound-icons-0.1.tar.gz">http://www.freebsoft.org/pub/projects/sound-icons/sound-icons-0.1.tar.gz</a>)
</li></ul>

<span id="Recommended-installation-procedure"></span><h4 class="subsection">2.1.2 Recommended installation procedure</h4>

<ul>
<li> Install your software synthesizer

<p>Although we highly recommend to use Festival for its excellent
extensibility, good quality voices, good responsiveness and best
support in Speech Dispatcher, you might want to start with eSpeak, a
lightweight multi-lingual feature-complete synthesizer, to get all the
key components working and perhaps only then switch to
Festival. Installation of eSpeak should be easier and the default
configuration of Speech Dispatcher is set up for eSpeak for this
reason.
</p>
<p>You can of course also start with Epos or any other supported synthesizer.
</p>
</li><li> Make sure your synthesizer works

<p>There is usually a way to test if the installation of your speech
synthesizer works. For eSpeak run <code>espeak &quot;test&quot;</code>, for Flite run
<code>flite -t &quot;Hello!&quot;</code> and hear the speech. For Festival run
<code>festival</code> and type in
</p>
<div class="example">
<pre class="example">(SayText &quot;Hello!&quot;)
(quit)
</pre></div>

</li><li> Install Speech Dispatcher

<p>Install the packages for Speech Dispatcher from your distribution or
download the source tarball (or git) from
<a href="http://www.freebsoft.org/speechd">http://www.freebsoft.org/speechd</a> and follow the instructions in
the file <code>INSTALL</code> in the source tree.
</p>
</li><li> Configure Speech Dispatcher

<p>You can skip this step in most cases. If you however want to setup
your own configuration of the Dispatchers default values, the easiest
way to do so is through the <code>spd-conf</code> configuration script. It
will guide you through the basic configuration. It will also
subsequently perform some diagnostics tests and offer some limited
help with troubleshooting. Just execute
</p>
<div class="example">
<pre class="example">spd-conf
</pre></div>

<p>under an ordinary user or system user like &rsquo;speech-dispatcher&rsquo;
depending on whether you like to setup Speech Dispatcher as user or
system service respectively. You might also want to explore the
offered options or run some of its subsystems manually, type
<code>spd-conf -h</code> for help.
</p>
<p>If you do not want to use this script, it doesn&rsquo;t work in your case
or it doesn&rsquo;t provide enough configuration flexibility, please
continue as described below and/or in See <a href="#Running-Under-Ordinary-Users">Running Under Ordinary Users</a>.
</p>
</li><li> Test Speech Dispatcher

<p>The simplest way to test Speech Dispatcher is through
<code>spd-conf -d</code> or through the <code>spd-say</code> tool.
</p>
<p>Example:
</p><div class="example">
<pre class="example">spd-conf -d
spd-say &quot;Hello!&quot;
spd-say -l cs -r 90 &quot;Ahoj&quot;
</pre></div>

<p>If you don&rsquo;t hear anything, please See <a href="#Troubleshooting">Troubleshooting</a>.
</p>
</li></ul>

<span id="How-to-use-eSpeak-NG-or-eSpeak-with-MBROLA"></span><h4 class="subsection">2.1.3 How to use eSpeak NG or eSpeak with MBROLA</h4>

<p>Please follow the guidelines at
<a href="https://github.com/espeak-ng/espeak-ng/blob/master/docs/mbrola.md">https://github.com/espeak-ng/espeak-ng/blob/master/docs/mbrola.md</a>
(resp. <a href="http://espeak.sourceforge.net/mbrola.html">http://espeak.sourceforge.net/mbrola.html</a>)
for installing eSpeak NG (resp. eSpeak) with a set of MBROLA voices that you
want to use.
</p>
<p>Check the <samp>modules/espeak-ng-mbrola-generic.conf</samp>
(resp. <samp>modules/espeak-mbrola-generic.conf</samp>) configuration files for the
<code>AddVoice</code> lines. If a line for any of the voices you have installed
(and it is supported by your version of eSpeak NG (resp. eSpeak),
e.g. <code>ls /usr/share/espeak-ng-data/voices/mb/mb-*</code>
(resp. <code>ls /usr/share/espeak-data/voices/mb/mb-*</code>))
is not contained here, please add it. Check if <code>GenericExecuteString</code>
contains the correct name of your mbrola binary and correct path to its voice
database.
</p>
<p>Restart speech-dispatcher and in your client, select
<code>espeak-ng-mbrola-generic</code> (resp. <code>espeak-mbrola-generic</code>) as your
output module, or test it with the following command
</p>
<div class="example">
<pre class="example">spd-say -o espeak-ng-mbrola-generic -l cs Testing
</pre></div>

<p>(resp.
</p><div class="example">
<pre class="example">spd-say -o espeak-mbrola-generic -l cs Testing
</pre></div>
<p>)
</p>
<hr>
<span id="Running"></span><div class="header">
<p>
Next: <a href="#Troubleshooting" accesskey="n" rel="next">Troubleshooting</a>, Previous: <a href="#Installation" accesskey="p" rel="prev">Installation</a>, Up: <a href="#User_0027s-Documentation" accesskey="u" rel="up">User's Documentation</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Running-1"></span><h3 class="section">2.2 Running</h3>

<p>Speech Dispatcher is normally executed on a per-user basis.  This
provides more flexibility in user configuration, access rights and is
essential in any environment where multiple people use the computer at
the same time. It used to be possible to run Speech Dispatcher as a system
service under a special user (and still is, with some limitations), but
this mode of execution is strongly discouraged.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#Running-Under-Ordinary-Users" accesskey="1">Running Under Ordinary Users</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Running-in-a-Custom-Setup" accesskey="2">Running in a Custom Setup</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Setting-Communication-Method" accesskey="3">Setting Communication Method</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<span id="Running-Under-Ordinary-Users"></span><div class="header">
<p>
Next: <a href="#Running-in-a-Custom-Setup" accesskey="n" rel="next">Running in a Custom Setup</a>, Previous: <a href="#Running" accesskey="p" rel="prev">Running</a>, Up: <a href="#Running" accesskey="u" rel="up">Running</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Running-Under-Ordinary-Users-1"></span><h4 class="subsection">2.2.1 Running Under Ordinary Users</h4>

<p>No special provisions need to be done to run Speech Dispatcher under
the current user. The Speech Dispatcher process will use (or create) a
<samp>~/.cache/speech-dispatcher/</samp> directory for its purposes (logging,
pidfile).
</p>
<p>Optionally, a user can place his own configuration file in
<samp>~/.config/speech-dispatcher/speechd.conf</samp> and it will be
automatically loaded by Speech Dispatcher. The preferred way to do so
is via the <code>spd-conf</code> configuration command. If this user
configuration file is not found, Speech Dispatcher will simply use the
system wide configuration file (e.g. in
<samp>/etc/speech-dispatcher/speechd.conf</samp>).
</p>
<div class="example">
<pre class="example"># speech-dispatcher
# spd-say test
</pre></div>

<hr>
<span id="Running-in-a-Custom-Setup"></span><div class="header">
<p>
Next: <a href="#Setting-Communication-Method" accesskey="n" rel="next">Setting Communication Method</a>, Previous: <a href="#Running-Under-Ordinary-Users" accesskey="p" rel="prev">Running Under Ordinary Users</a>, Up: <a href="#Running" accesskey="u" rel="up">Running</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Running-in-a-Custom-Setup-1"></span><h4 class="subsection">2.2.2 Running in a Custom Setup</h4>

<p>Speech Dispatcher can be run in any other setup of executing users, port
numbers and system paths as well. The path to configuration, pidfile and
logfiles can be specified separately via compilation flags,
configuration file options or command line options in this ascending
order of their priority.
</p>
<p>This way can also be used to start Speech Dispatcher as a system wide
service from /etc/init.d/ , although this approach is now discouraged.
</p>
<hr>
<span id="Setting-Communication-Method"></span><div class="header">
<p>
Previous: <a href="#Running-in-a-Custom-Setup" accesskey="p" rel="prev">Running in a Custom Setup</a>, Up: <a href="#Running" accesskey="u" rel="up">Running</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Setting-Communication-Method-1"></span><h4 class="subsection">2.2.3 Setting Communication Method</h4>

<p>Currently, two different methods are supported for communication
between the server and its clients.
</p>
<p>For local communication, it&rsquo;s preferred to use <em>Unix sockets</em>,
where the communication takes place over a Unix socket with its
driving file located by default in the user&rsquo;s runtime directory as
<code>XDG_RUNTIME_DIR/speech-dispatcher/speechd.sock</code>. In this way, there can be no
conflict between different user sessions using different Speech
Dispatchers in the same system. By default, permissions are set in
such a way, that only the same user who started the server can access
it, and communication is hidden to all other users.
</p>
<p>The other supported mechanism is <em>Inet sockets</em>. The server will
thus run on a given port, which can be made accessible either localy
or to other machines on the network as well. This is very useful in a
network setup. Be however aware that while using Inet sockets, both
parties (server and clients) must first agree on the communication
port number to use, which can create a lot of confusion in a setup
where multiple instances of the server serve multiple different users.
Also, since there is currently no authentication mechanism, during
Inet socket communication, the server will make no distinction between
the different users connecting to it. The default port is 6560 as set
in the server configuration.
</p>
<p>Client applications will respect the <em>SPEECHD_ADDRESS</em> environment
variable.  The method (&rsquo;<code>unix_socket</code>&rsquo; or &rsquo;<code>inet_socket</code>&rsquo;)
is optionally followed by it&rsquo;s parameters separated by a colon.
For an exact description, please  See <a href="#Address-specification">Address specification</a>.
</p>
<p>An example of launching Speech Dispatcher using unix_sockets
for communication on a non-standard destination and subsequently
using spd-say to speak a message:
</p>
<div class="example">
<pre class="example">killall -u `whoami` speech-dispatcher
speech-dispatcher -c unix_socket -S /tmp/my.sock
SPEECHD_ADDRESS=unix_socket:/tmp/my.sock spd-say &quot;test&quot;
</pre></div>

<hr>
<span id="Troubleshooting"></span><div class="header">
<p>
Next: <a href="#Configuration" accesskey="n" rel="next">Configuration</a>, Previous: <a href="#Running" accesskey="p" rel="prev">Running</a>, Up: <a href="#User_0027s-Documentation" accesskey="u" rel="up">User's Documentation</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Troubleshooting-1"></span><h3 class="section">2.3 Troubleshooting</h3>

<p>If you are experiencing problems when running Speech Dispatcher, please:
</p>
<ul>
<li> Use <code>spd-conf</code> to run diagnostics:

<div class="example">
<pre class="example">spd-conf -d
</pre></div>

</li><li> Check the appropriate logfile in
<samp>~/.cache/speech-dispatcher/log/speech-dispatcher.log</samp> for user Speech
Dispatcher or in <samp>/var/log/speech-dispatcher/speech-dispatcher.log</samp>. Look
for lines containing the string &rsquo;ERROR&rsquo; and their surrounding
contents. If you hear no speech, restart Speech Dispatcher and look
near the end of the log file &ndash; before any attempts for synthesis of
any message. Usually, if something goes wrong with the initialization
of the output modules, a textual description of the problem and a
suggested solution can be found in the log file.

</li><li> If this doesn&rsquo;t reveal the problem, please run
<div class="example">
<pre class="example">spd-conf -D
</pre></div>

<p>Which will genereate a very detailed logfile archive
which you can examine yourself or send to us with
a request for help.
</p>
</li><li> You can also try to say some message directly through the utility
<code>spd-say</code>.

<p>Example:
</p><div class="example">
<pre class="example">        spd-say &quot;Hello, does it work?&quot;
        spd-say --language=cs --rate=20 &quot;Everything ok?&quot;
</pre></div>

</li><li> Check if your configuration files (speechd.conf, modules/*.conf)
are correct (some uninstalled synthesizer specified as the default,
wrong values for default voice parameters etc.)

</li><li> There is a know problem in some versions of Festival. Please make sure
that Festival server_access_list configuration variable and your
/etc/hosts.conf are set properly. server_access_list must contain the
symbolic name of your machine and this name must be defined in
/etc/hosts.conf and point to your IP address. You can test if this is
set correctly by trying to connect to the port Festival server is
running on via an ordinary telnet (by default like this: <code>telnet
localhost 1314</code>). If you are not rejected, it works.

</li></ul>

<hr>
<span id="Configuration"></span><div class="header">
<p>
Next: <a href="#Tools" accesskey="n" rel="next">Tools</a>, Previous: <a href="#Troubleshooting" accesskey="p" rel="prev">Troubleshooting</a>, Up: <a href="#User_0027s-Documentation" accesskey="u" rel="up">User's Documentation</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Configuration-1"></span><h3 class="section">2.4 Configuration</h3>
<span id="index-configuration"></span>
<span id="index-default-values"></span>

<p>Speech Dispatcher can be configured on several different levels.  You
can configure the global settings through the server configuration
file, which can be placed either in the Speech Dispatcher default
configuration system path like /etc/speech-dispatcher/ or in your home
directory in <samp>~/.config/speech-dispatcher/</samp>.  There is also support for
per-client configuration, this is, specifying different default values
for different client applications.
</p>
<p>Furthermore, applications often come with their own means of configuring
speech related settings.  Please see the documentation of your
application for details about application specific configuration.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#Configuration-file-syntax" accesskey="1">Configuration file syntax</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Basic rules.
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Configuration-options" accesskey="2">Configuration options</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">What to configure.
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Audio-Output-Configuration" accesskey="3">Audio Output Configuration</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to switch to ALSA, Pulse...
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Client-Specific-Configuration" accesskey="4">Client Specific Configuration</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Specific default values for applications.
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Output-Modules-Configuration" accesskey="5">Output Modules Configuration</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Adding and customizing output modules.
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Log-Levels" accesskey="6">Log Levels</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Description of log levels.
</td></tr>
</table>

<hr>
<span id="Configuration-file-syntax"></span><div class="header">
<p>
Next: <a href="#Configuration-options" accesskey="n" rel="next">Configuration options</a>, Previous: <a href="#Configuration" accesskey="p" rel="prev">Configuration</a>, Up: <a href="#Configuration" accesskey="u" rel="up">Configuration</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Configuration-file-syntax-1"></span><h4 class="subsection">2.4.1 Configuration file syntax</h4>

<p>We use the DotConf library to read a permanent text-file based
configuration, so the syntax might be familiar to many users.
</p>
<p>Each of the string constants, if not otherwise stated differently,
should be encoded in UTF-8. The option names use only the
standard ASCII charset restricted to upper- and lowercase characters
(<code>a</code>, <code>b</code>), dashes (<code>-</code>) and underscores <code>_</code>.
</p>
<p>Comments and temporarily inactive options begin with <code>#</code>.
If such an option should be turned on, just remove the comment
character and set it to the desired value.
</p><div class="example">
<pre class="example"># this is a comment
# InactiveOption &quot;this option is turned off&quot;
</pre></div>

<p>Strings are enclosed in doublequotes.
</p><div class="example">
<pre class="example">LogFile  &quot;/var/log/speech-dispatcher.log&quot;
</pre></div>

<p>Numbers are written without any quotes.
</p><div class="example">
<pre class="example">Port 6560
</pre></div>

<p>Boolean values use On (for true) and Off (for false).
</p><div class="example">
<pre class="example">Debug Off
</pre></div>

<hr>
<span id="Configuration-options"></span><div class="header">
<p>
Next: <a href="#Audio-Output-Configuration" accesskey="n" rel="next">Audio Output Configuration</a>, Previous: <a href="#Configuration-file-syntax" accesskey="p" rel="prev">Configuration file syntax</a>, Up: <a href="#Configuration" accesskey="u" rel="up">Configuration</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Configuration-options-1"></span><h4 class="subsection">2.4.2 Configuration options</h4>

<p>All available options are documented directly in the file and examples
are provided.  Most of the options are set to their default value and
commented out.  If you want to change them, just change the value and
remove the comment symbol <code>#</code>.
</p>
<hr>
<span id="Audio-Output-Configuration"></span><div class="header">
<p>
Next: <a href="#Client-Specific-Configuration" accesskey="n" rel="next">Client Specific Configuration</a>, Previous: <a href="#Configuration-options" accesskey="p" rel="prev">Configuration options</a>, Up: <a href="#Configuration" accesskey="u" rel="up">Configuration</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Audio-Output-Configuration-1"></span><h4 class="subsection">2.4.3 Audio Output Configuration</h4>

<p>Audio output method (ALSA, Pulse etc.) can be configured centrally
from the main configuration file <code>speechd.conf</code>. The option
<code>AudioOutputMethod</code> selects the desired audio method and further
options labeled as <code>AudioALSA...</code> or <code>AudioPulse...</code> provide
a more detailed configuration of the given audio output method.
</p>
<p>It is possible to use a list of preferred audio output methods,
in which case each output module attempts to use the first availble
in the given order.
</p>
<p>The example below prefers Pulse Audio, but will use ALSA if unable
to connect to Pulse:
</p><div class="example">
<pre class="example"> AudioOutputMethod &quot;pulse,alsa&quot;
</pre></div>

<p>Please note however that some more simple output modules or
synthesizers, like the generic output module, do not respect these
settings and use their own means of audio output which can&rsquo;t be
influenced this way. On the other hand, the fallback dummy output
module tries to use any available means of audio output to deliver its
error message.
</p>
<hr>
<span id="Client-Specific-Configuration"></span><div class="header">
<p>
Next: <a href="#Output-Modules-Configuration" accesskey="n" rel="next">Output Modules Configuration</a>, Previous: <a href="#Audio-Output-Configuration" accesskey="p" rel="prev">Audio Output Configuration</a>, Up: <a href="#Configuration" accesskey="u" rel="up">Configuration</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Client-Specific-Configuration-1"></span><h4 class="subsection">2.4.4 Client Specific Configuration</h4>

<p>It is possible to automatically set different default values of speech
parameters (e.g.  rate, volume, punctuation, default voice...) for
different applications that connect to Speech Dispatcher. This is
especially useful for simple applications that have no parameter
setting capabilities themselves or they don&rsquo;t support a parameter
setting you wish to change (e.g. language).
</p>
<p>Using the commands <code>BeginClient &quot;IDENTIFICATION&quot;</code> and
<code>EndClient</code> it is possible to open and close a section of
parameter settings that only affects those client applications that
identify themselves to Speech Dispatcher under the specific
identification code which is matched against the string
<code>IDENTIFICATION</code>.  It is possible to use wildcards (&rsquo;*&rsquo; matches
any number of characters and &rsquo;?&rsquo; matches exactly one character) in the
string <code>IDENTIFICATION</code>.
</p>
<p>The identification code normally consists of 3 parts:
<code>user:application:connection</code>. <code>user</code> is the username of the
one who started the application, <code>application</code> is the name of the
application (usually the name of the binary for it) and
<code>connection</code> is a name for the connection (one application might
use more connections for different purposes).
</p>
<p>An example is provided in <code>/etc/speech-dispatcher/speechd.conf</code>
(see the line <code>Include &quot;clients/emacs.conf&quot;</code> and
<code>/etc/speech-dispatcher/clients/emacs.conf</code>.
</p>
<hr>
<span id="Output-Modules-Configuration"></span><div class="header">
<p>
Next: <a href="#Log-Levels" accesskey="n" rel="next">Log Levels</a>, Previous: <a href="#Client-Specific-Configuration" accesskey="p" rel="prev">Client Specific Configuration</a>, Up: <a href="#Configuration" accesskey="u" rel="up">Configuration</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Output-Modules-Configuration-1"></span><h4 class="subsection">2.4.5 Output Modules Configuration</h4>

<p>Each user should turn on at least one output module in his
configuration, if he wants Speech Dispatcher to produce
any sound output. If no output module is loaded, Speech Dispatcher
will start, log messages into history and communicate with clients,
but no sound is produced.
</p>
<p>Each output module has an
&ldquo;AddModule&rdquo; line in
<samp>speech-dispatcher/speechd.conf</samp>. Additionally, each output
module can have its own configuration file.
</p>
<p>The audio output is handled by the output modules themselves, so this
can be switched in their own configuration files under
<code>etc/speech-dispatcher/modules/</code>.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#Loading-Modules-in-speechd_002econf" accesskey="1">Loading Modules in speechd.conf</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Configuration-files-of-output-modules" accesskey="2">Configuration files of output modules</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Configuration-of-the-Generic-Output-Module" accesskey="3">Configuration of the Generic Output Module</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<span id="Loading-Modules-in-speechd_002econf"></span><div class="header">
<p>
Next: <a href="#Configuration-files-of-output-modules" accesskey="n" rel="next">Configuration files of output modules</a>, Previous: <a href="#Output-Modules-Configuration" accesskey="p" rel="prev">Output Modules Configuration</a>, Up: <a href="#Output-Modules-Configuration" accesskey="u" rel="up">Output Modules Configuration</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Loading-Modules-in-speechd_002econf-1"></span><h4 class="subsubsection">2.4.5.1 Loading Modules in speechd.conf</h4>

<span id="AddModule"></span><p>Each module that should be run when Speech Dispatcher starts must be loaded
by the <code>AddModule</code> command in the configuration. Note that you can load
one binary module multiple times under different names with different
configurations. This is especially useful for loading the generic output
module. See <a href="#Configuration-of-the-Generic-Output-Module">Configuration of the Generic Output Module</a>.
</p>
<div class="example">
<pre class="example">AddModule &quot;<var>module_name</var>&quot; &quot;<var>module_binary</var>&quot; &quot;<var>module_config</var>&quot;
</pre></div>

<p><var>module_name</var> is the name of the output module.
</p>
<p><var>module_binary</var> is the name of the binary executable
of this output module. It can be either absolute or relative
to <samp>bin/speechd-modules/</samp>.
</p>
<p><var>module_config</var> is the file where the configuration for
this output module is stored. It can be either absolute or relative
to <samp>etc/speech-dispatcher/modules/</samp>. This parameter is optional.
</p>
<hr>
<span id="Configuration-files-of-output-modules"></span><div class="header">
<p>
Next: <a href="#Configuration-of-the-Generic-Output-Module" accesskey="n" rel="next">Configuration of the Generic Output Module</a>, Previous: <a href="#Loading-Modules-in-speechd_002econf" accesskey="p" rel="prev">Loading Modules in speechd.conf</a>, Up: <a href="#Output-Modules-Configuration" accesskey="u" rel="up">Output Modules Configuration</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Configuration-Files-of-Output-Modules"></span><h4 class="subsubsection">2.4.5.2 Configuration Files of Output Modules</h4>

<p>Each output module is different and therefore has different
configuration options. Please look at the comments in its
configuration file for a detailed description. However, there are
several options which are common for some output modules. Here is a
short overview of them.
</p>
<ul>
<li> AddVoice &quot;<var>language</var>&quot; &quot;<var>symbolicname</var>&quot; &quot;<var>name</var>&quot;
<span id="AddVoice"></span>
<p>Each output module provides some voices and sometimes it even supports
different languages. For this reason, there is a common mechanism for
specifying these in the configuration, although no module is
obligated to use it. Some synthesizers, e.g. Festival, support the
SSIP symbolic names directly, so the particular configuration of these
voices is done in the synthesizer itself.
</p>
<p>For each voice, there is exactly one <code>AddVoice</code> line.
</p>
<p><var>language</var> is the ISO language code of the language of this voice, possibly
with a region qualification.
</p>
<p><var>symbolicname</var> is a symbolic name under which you wish this voice
to be available. See <a href="ssip.html#Top">Standard Voices</a> in <cite>SSIP
Documentation</cite> for the list of names you can use.
</p>
<p><var>name</var> is a name specific for the given output module. Please see
the comments in the configuration file under the appropriate AddModule
section for more info.
</p>
<p>For example our current definition of voices for Epos (file
<code>/etc/speech-dispatcher/modules/generic-epos.conf</code> looks like
this:
</p>
<div class="example">
<pre class="example">        AddVoice        &quot;cs&quot;  &quot;male1&quot;   &quot;kadlec&quot;
        AddVoice        &quot;sk&quot;  &quot;male1&quot;   &quot;bob&quot;
</pre></div>

</li><li> ModuleDelimiters &quot;<var>delimiters</var>&quot;, ModuleMaxChunkLength <var>length</var>

<p>Normally, the output module doesn&rsquo;t try to synthesize all
incoming text at once, but instead it cuts it into smaller
chunks (sentences, parts of sentences) and then synthesizes
them one by one. This second approach, used by some output
modules, is much faster, however it limits the ability of
the output module to provide good intonation.
</p>
<p>NOTE: The Festival module does not use ModuleDelimiters and
ModuleMaxChunkLength.
</p>
<p>For this reason, you can configure at which characters
(<var>delimiters</var>) the text should be cut into smaller blocks
or after how many characters (<var>length</var>) it should be cut,
if there is no <var>delimiter</var> found.
</p>
<p>Making the two rules more strict, you will get better speed
but give away some quality of intonation. So for example
for slower computers, we recommend to include comma (,)
in <var>delimiters</var> so that sentences are cut into phrases,
while for faster computers, it&rsquo;s preferable
not to include comma and synthesize the whole compound
sentence.
</p>
<p>The same applies to <code>MaxChunkLength</code>, it&rsquo;s better
to set higher values for faster computers.
</p>
<p>For example, curently the default for Flite is
</p>
<div class="example">
<pre class="example">    FestivalMaxChunkLength  500
    FestivalDelimiters  &quot;.?!;&quot;
</pre></div>

<p>The output module may also decide to cut sentences on delimiters
only if they are followed by a space. This way for example
&ldquo;file123.tmp&rdquo; would not be cut in two parts, but &ldquo;The horse
raced around the fence, that was lately painted green, fell.&rdquo;
would be. (This is an interesting sentence, by the way.)
</p></li></ul>

<hr>
<span id="Configuration-of-the-Generic-Output-Module"></span><div class="header">
<p>
Previous: <a href="#Configuration-files-of-output-modules" accesskey="p" rel="prev">Configuration files of output modules</a>, Up: <a href="#Output-Modules-Configuration" accesskey="u" rel="up">Output Modules Configuration</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Configuration-files-of-the-Generic-Output-Module"></span><h4 class="subsubsection">2.4.5.3 Configuration files of the Generic Output Module</h4>

<p>The generic output module allows you to easily write your
own output module for synthesizers that have a simple
command line interface by modifying the configuration
file. This way, users can add support for their device even if they don&rsquo;t
know how to program. See <a href="#AddModule">AddModule</a>.
</p>
<p>The core part of a generic output module is the command
execution line.
</p>
<dl>
<dt id="index-GenericExecuteSynth">Generic Module Configuration: <strong>GenericExecuteSynth</strong> <em>&quot;<var>execution_string</var>&quot;</em></dt>
<dd>
<p><code>execution_string</code> is the command that should be executed
in a shell when it&rsquo;s desired to say something. In fact, it can
be multiple commands concatenated by the <code>&amp;&amp;</code> operator. To stop
saying the message, the output module will send a KILL signal to
the process group, so it&rsquo;s important that it immediately
stops speaking after the processes are killed. (On most GNU/Linux
system, the <code>play</code> utility has this property).
</p>
<p>In the execution string, you can use the following variables,
which will be substituted by the desired values before executing
the command.
</p>
<ul>
<li> <code>$DATA</code>
The text data that should be said. The string&rsquo;s characters that would interfere
with bash processing are already escaped. However, it may be necessary to put
double quotes around it (like this: <code>\&quot;$DATA\&quot;</code>).
</li><li> <code>$LANG</code>
The language identification string (it&rsquo;s defined by GenericLanguage).
</li><li> <code>$VOICE</code>
The voice identification string (it&rsquo;s defined by AddVoice).
</li><li> <code>$PITCH</code>
The desired pitch (a float number defined in GenericPitchAdd and GenericPitchMultiply).
</li><li> <code>$PITCH_RANGE</code>
The desired pitch range (a float number defined in GenericPitchRangeAdd and GenericPitchRangeMultiply).
</li><li> <code>$RATE</code>
The desired rate or speed (a float number defined in GenericRateAdd and GenericRateMultiply)
</li></ul>

<p>Here is an example from <samp>etc/speech-dispatcher/modules/epos-generic.conf</samp>
</p><div class="example">
<pre class="example">GenericExecuteSynth \
&quot;epos-say -o --language $LANG --voice $VOICE --init_f $PITCH --init_t $RATE \
\&quot;$DATA\&quot; | sed -e s+unknown.*$++ &gt;/tmp/epos-said.wav &amp;&amp; play /tmp/epos-said.wav &gt;/dev/null&quot;
</pre></div>
</dd></dl>

<dl>
<dt id="index-AddVoice">GenericModuleConfiguration: <strong>AddVoice</strong> <em>&quot;<var>language</var>&quot; &quot;<var>symbolicname</var>&quot; &quot;<var>name</var>&quot;</em></dt>
<dd><p>See <a href="#AddVoice">AddVoice</a>.
</p></dd></dl>

<dl>
<dt id="index-GenericLanguage">GenericModuleConfiguration: <strong>GenericLanguage</strong> <em>&quot;iso-code&quot; &quot;string-subst&quot;</em></dt>
<dd>
<p>Defines which string <code>string-subst</code> should be substituted for <code>$LANG</code>
given an <code>iso-code</code> language code.
</p>
<p>Another example from Epos generic:
</p><div class="example">
<pre class="example">GenericLanguage &quot;en-US&quot; &quot;english-US&quot;
GenericLanguage &quot;cs&quot; &quot;czech&quot;
GenericLanguage &quot;sk&quot; &quot;slovak&quot;
</pre></div>
</dd></dl>

<dl>
<dt id="index-GenericRateAdd">GenericModuleConfiguration: <strong>GenericRateAdd</strong> <em><var>num</var></em></dt>
</dl>
<dl>
<dt id="index-GenericRateMultiply">GenericModuleConfiguration: <strong>GenericRateMultiply</strong> <em><var>num</var></em></dt>
</dl>
<dl>
<dt id="index-GenericPitchAdd">GenericModuleConfiguration: <strong>GenericPitchAdd</strong> <em><var>num</var></em></dt>
</dl>
<dl>
<dt id="index-GenericPitchMultiply">GenericModuleConfiguration: <strong>GenericPitchMultiply</strong> <em><var>num</var></em></dt>
</dl>
<dl>
<dt id="index-GenericPitchRangeAdd">GenericModuleConfiguration: <strong>GenericPitchRangeAdd</strong> <em><var>num</var></em></dt>
</dl>
<dl>
<dt id="index-GenericPitchRangeMultiply">GenericModuleConfiguration: <strong>GenericPitchRangeMultiply</strong> <em><var>num</var></em></dt>
<dd><p>These parameters set rate and pitch conversion to compute
the value of <code>$RATE</code>, <code>$PITCH</code> and <code>$PITCH_RANGE</code>.
</p>
<p>The resulting rate (or pitch) is calculated using the following formula:
</p><div class="example">
<pre class="example">   (speechd_rate * GenericRateMultiply) + GenericRateAdd
</pre></div>
<p>where speechd_rate is a value between -100 (lowest) and +100 (highest)
Some meaningful conversion for the specific text-to-speech system
used must by defined.
</p>
<p>(The values in GenericSthMultiply are multiplied by 100 because
DotConf currently doesn&rsquo;t support floats. So you can write 0.85 as 85 and
so on.)
</p></dd></dl>

<hr>
<span id="Log-Levels"></span><div class="header">
<p>
Previous: <a href="#Output-Modules-Configuration" accesskey="p" rel="prev">Output Modules Configuration</a>, Up: <a href="#Configuration" accesskey="u" rel="up">Configuration</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Log-Levels-1"></span><h4 class="subsection">2.4.6 Log Levels</h4>

<p>There are 6 different verbosity levels of Speech Dispatcher logging.
0 means no logging, while 5 means that nearly all the information
about Speech Dispatcher&rsquo;s operation is logged.
</p>
<ul>
<li> Level 0
<ul>
<li> No information.
</li></ul>

</li><li> Level 1
<ul>
<li> Information about loading and exiting.
</li></ul>

</li><li> Level 2
<ul>
<li> Information about errors that occurred.
</li><li> Allocating and freeing resources on start and exit.
</li></ul>

</li><li> Level 3
<ul>
<li> Information about accepting/rejecting/closing clients&rsquo; connections.
</li><li> Information about invalid client commands.
</li></ul>

</li><li> Level 4
<ul>
<li> Every received command is output.
</li><li> Information preceding the command output.
</li><li> Information about queueing/allocating messages.
</li><li> Information about the history, sound icons and other
facilities.
</li><li> Information about the work of the speak() thread.
</li></ul>

</li><li> Level 5
(This is only for debugging purposes and will output *a lot*
of data. Use with caution.)
<ul>
<li> Received data (messages etc.) is output.
</li><li> Debugging information.
</li></ul>
</li></ul>

<hr>
<span id="Tools"></span><div class="header">
<p>
Next: <a href="#Synthesis-Output-Modules" accesskey="n" rel="next">Synthesis Output Modules</a>, Previous: <a href="#Configuration" accesskey="p" rel="prev">Configuration</a>, Up: <a href="#User_0027s-Documentation" accesskey="u" rel="up">User's Documentation</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Tools-1"></span><h3 class="section">2.5 Tools</h3>

<p>Several small tools are distributed together with Speech Dispatcher.
<code>spd-say</code> is a small client that allows you to send messages to
Speech Dispatcher in an easy way and have them spoken, or cancel
speech from other applications.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#spd_002dsay" accesskey="1">spd-say</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Say a given text or cancel messages in Dispatcher.
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#spd_002dconf" accesskey="2">spd-conf</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Configuration, diagnostics and troubleshooting tool
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#spd_002dsend" accesskey="3">spd-send</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Direct SSIP communication from command line.
</td></tr>
</table>

<hr>
<span id="spd_002dsay"></span><div class="header">
<p>
Next: <a href="#spd_002dconf" accesskey="n" rel="next">spd-conf</a>, Previous: <a href="#Tools" accesskey="p" rel="prev">Tools</a>, Up: <a href="#Tools" accesskey="u" rel="up">Tools</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="spd_002dsay-1"></span><h4 class="subsection">2.5.1 spd-say</h4>

<p>spd-say is documented in its own manual. See <cite><a href="spd-say.html#Top">Spd-say
Documentation</a></cite>.
</p>
<hr>
<span id="spd_002dconf"></span><div class="header">
<p>
Next: <a href="#spd_002dsend" accesskey="n" rel="next">spd-send</a>, Previous: <a href="#spd_002dsay" accesskey="p" rel="prev">spd-say</a>, Up: <a href="#Tools" accesskey="u" rel="up">Tools</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="spd_002dconf-1"></span><h4 class="subsection">2.5.2 spd-conf</h4>

<p>spd-conf is a tool for creating basic configuration, initial setup of
some basic settings (output module, audio method), diagnostics and
automated debugging with a possibility to send the debugging output to
the developers with a request for help.
</p>
<p>The available command options are self-documented through
<code>spd-say -h</code>. In any working mode, the tool asks the user about
future actions and preferred configuration of the basic options.
</p>
<p>Most useful ways of execution are:
</p><ul>
<li> <code>spd-conf</code>
Create new configuration and setup basic settings according to user
answers. Run diagnostics and if some problems occur, run debugging
and offer to send a request for help to the developers.

</li><li> <code>spd-conf -d</code>
Run diagnostics of problems.

</li><li> <code>spd-conf -D</code>
Run debugging and offer to send a request for help to the developers.

</li></ul>

<hr>
<span id="spd_002dsend"></span><div class="header">
<p>
Previous: <a href="#spd_002dconf" accesskey="p" rel="prev">spd-conf</a>, Up: <a href="#Tools" accesskey="u" rel="up">Tools</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="spd_002dsend-1"></span><h4 class="subsection">2.5.3 spd-send</h4>

<p>spd-send is a small client/server application that allows you to
establish a connection to Speech Dispatcher and then use a simple
command line tool to send and receive SSIP protocol communication.
</p>
<p>Please see <samp>src/c/clients/spd-say/README</samp> in the Speech
Dispatcher&rsquo;s source tree for more information.
</p>
<hr>
<span id="Synthesis-Output-Modules"></span><div class="header">
<p>
Next: <a href="#Security" accesskey="n" rel="next">Security</a>, Previous: <a href="#Tools" accesskey="p" rel="prev">Tools</a>, Up: <a href="#User_0027s-Documentation" accesskey="u" rel="up">User's Documentation</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Synthesis-Output-Modules-1"></span><h3 class="section">2.6 Synthesis Output Modules</h3>
<span id="index-output-module"></span>
<span id="index-different-synthesizers"></span>

<p>Speech Dispatcher supports concurrent use of multiple output modules.  If the
output modules provide good synchronization, you can combine them when
reading messages.  For example if module1 can speak English and Czech while
module2 speaks only German, the idea is that if there is some message in
German, module2 is used, while module1 is used for the other languages.
However the language is not the only criteria for the decision.  The rules for
selection of an output module can be influenced through the configuration file
<samp>speech-dispatcher/speechd.conf</samp>.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#Provided-Functionality" accesskey="1">Provided Functionality</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Some synthesizers don&rsquo;t support the full set of SSIP features.
</td></tr>
</table>

<hr>
<span id="Provided-Functionality"></span><div class="header">
<p>
Previous: <a href="#Synthesis-Output-Modules" accesskey="p" rel="prev">Synthesis Output Modules</a>, Up: <a href="#Synthesis-Output-Modules" accesskey="u" rel="up">Synthesis Output Modules</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Provided-functionality"></span><h4 class="subsection">2.6.1 Provided functionality</h4>

<p>Please note that some output modules don&rsquo;t support the full Speech
Dispatcher functionality (e.g. spelling mode, sound icons). If there
is no easy way around the missing functionality, we don&rsquo;t try to
emulate it in some complicated way and rather try to encourage the
developers of that particular synthesizer to add that
functionality. We are actively working on adding the missing parts to
Festival, so Festival supports nearly all of the features of Speech
Dispatcher and we encourage you to use it. Much progress has also been
done with eSpeak.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#Supported-Modules" accesskey="1">Supported Modules</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<span id="Supported-Modules"></span><div class="header">
<p>
Previous: <a href="#Provided-Functionality" accesskey="p" rel="prev">Provided Functionality</a>, Up: <a href="#Provided-Functionality" accesskey="u" rel="up">Provided Functionality</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Supported-Modules-1"></span><h4 class="subsubsection">2.6.1.1 Supported Modules</h4>

<ul>
<li> Festival
Festival is a free software multi-language Text-to-Speech
synthesis system that is very flexible and extensible using the
Scheme scripting language. Currently, it supports high quality
synthesis for several languages, and on today&rsquo;s computers it runs
reasonably fast.  If you are not sure which one to use and your
language is supported by Festival, we advise you to use it. See
<a href="http://www.cstr.ed.ac.uk/projects/festival/">http://www.cstr.ed.ac.uk/projects/festival/</a>.

</li><li> eSpeak
eSpeak is a newer very lightweight free software engine with a broad
range of supported languages and a good quality of voice at high
rates. See <a href="http://espeak.sourceforge.net/">http://espeak.sourceforge.net/</a>.

</li><li> Flite
Flite (Festival Light) is a lightweight free software TTS synthesizer
intended to run on systems with limited resources. At this time, it
has only one English voice and porting voices from Festival looks
rather difficult.  With the caching mechanism provided by Speech
Dispatcher, Festival is faster than Flite in most situations.  See
<a href="http://www.speech.cs.cmu.edu/flite/">http://www.speech.cs.cmu.edu/flite/</a>.

</li><li> Generic
The Generic module can be used with any synthesizer that can be
managed by a simple command line application. See <a href="#Configuration-of-the-Generic-Output-Module">Configuration of the Generic Output Module</a>, for more details about how to use it.
However, it provides only very rudimentary support of speaking.

</li><li> Pico
The SVOX Pico engine is a software speech synthesizer for German, English (GB
and US), Spanish, French and Italian.
SVOX produces clear and distinct speech output made possible by the use of
Hidden Markov Model (HMM) algorithms.
See <a href="http://git.debian.org/?p=collab-maint/svox.git">http://git.debian.org/?p=collab-maint/svox.git</a>.
Pico documentation can be found at
<a href="http://android.git.kernel.org/?p=platform/external/svox.git;
a=tree;f=pico_resources/docs">http://android.git.kernel.org/?p=platform/external/svox.git;
a=tree;f=pico_resources/docs</a>
It includes three manuals:
- SVOX_Pico_Lingware.pdf
- SVOX_Pico_Manual.pdf
- SVOX_Pico_architecture_and_design.pdf

</li></ul>

<hr>
<span id="Security"></span><div class="header">
<p>
Previous: <a href="#Synthesis-Output-Modules" accesskey="p" rel="prev">Synthesis Output Modules</a>, Up: <a href="#User_0027s-Documentation" accesskey="u" rel="up">User's Documentation</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Security-1"></span><h3 class="section">2.7 Security</h3>

<p>Speech Dispatcher doesn&rsquo;t implement any special authentication
mechanisms but uses the standard system mechanisms to regulate access.
</p>
<p>If the default &lsquo;unix_socket&rsquo; communication mechanism is used, only the
user who starts the server can connect to it due to imposed
restrictions on the unix socket file permissions.
</p>
<p>In case of the &lsquo;inet_socket&rsquo; communication mechanism, where clients
connect to Speech Dispatcher on a specified port, theoretically
everyone could connect to it. The access is by default restricted only
for connections originating on the same machine, which can be changed
via the LocalhostAccessOnly option in the server configuration
file. In such a case, the user is reponsible to set appropriate
security restrictions on the access to the given port on his machine
from the outside network using a firewall or similar mechanism.
</p>
<hr>
<span id="Technical-Specifications"></span><div class="header">
<p>
Next: <a href="#Client-Programming" accesskey="n" rel="next">Client Programming</a>, Previous: <a href="#User_0027s-Documentation" accesskey="p" rel="prev">User's Documentation</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Technical-Specifications-1"></span><h2 class="chapter">3 Technical Specifications</h2>


<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#Communication-mechanisms" accesskey="1">Communication mechanisms</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Address-specification" accesskey="2">Address specification</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Actions-performed-on-startup" accesskey="3">Actions performed on startup</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Accepted-signals" accesskey="4">Accepted signals</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<span id="Communication-mechanisms"></span><div class="header">
<p>
Next: <a href="#Address-specification" accesskey="n" rel="next">Address specification</a>, Previous: <a href="#Technical-Specifications" accesskey="p" rel="prev">Technical Specifications</a>, Up: <a href="#Technical-Specifications" accesskey="u" rel="up">Technical Specifications</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Communication-mechanisms-1"></span><h3 class="section">3.1 Communication mechanisms</h3>

<p>Speech Dispatcher supports two communicatino mechanisms: UNIX-style
and Inet sockets, which are refered as &rsquo;unix-socket&rsquo; and &rsquo;inet-socket&rsquo;
respectively. The communication mechanism is decided on startup and
cannot be changed at runtime. Unix sockets are now the default and
preferred variant for local communication, Inet sockets are necessary
for communication over network.
</p>
<p>The mechanism for the decision of which method to use is as follows in
this order of precedence: command-line option, configuration option,
the default value &rsquo;unix-socket&rsquo;.
</p>
<p><em>Unix sockets</em> are associated with a file in the filesystem. By
default, this file is placed in the user&rsquo;s runtime directory (as
determined by the value of the XDG_RUNTIME_DIR environment variable and the
system configuration for the given user). It&rsquo;s default name is
constructed as <code>XDG_RUNTIME_DIR/speech-dispatcher/speechd.sock</code>. The access
permissions for this file are set to 600 so that it&rsquo;s restricted to
read/write by the current user.
</p>
<p>As such, access is handled properly and there are no conflicts between
the different instances of Speech Dispatcher run by the different
users.
</p>
<p>Client applications and libraries are supposed to independently
replicate the process of construction of the socket path and connect
to it, thus establishing a common communication channel in the default
setup.
</p>
<p>It should be however possible in the client libraries and is possible
in the server, to define a custom file as a socket name if needed.
Client libraries should respect the <var>SPEECHD_ADDRESS</var> environment
variable.
</p>
<p><em>Inet sockets</em> are based on communication over a given port on
the given host, two variables which must be previously agreed between
the server and client before a connection can be established. The only
implicit security restriction is the server configuration option which
can allow or disallow access from machines other than localhost.
</p>
<p>By convention, the clients should use host and port given by one of
the following sources in the following order of precedence: its own
configuration, value of the <var>SPEECHD_ADDRESS</var> environment variable
and the default pair (localhost, 6560).
</p>
<p>See <a href="#Setting-Communication-Method">Setting Communication Method</a>.
</p>
<hr>
<span id="Address-specification"></span><div class="header">
<p>
Next: <a href="#Actions-performed-on-startup" accesskey="n" rel="next">Actions performed on startup</a>, Previous: <a href="#Communication-mechanisms" accesskey="p" rel="prev">Communication mechanisms</a>, Up: <a href="#Technical-Specifications" accesskey="u" rel="up">Technical Specifications</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Address-specification-1"></span><h3 class="section">3.2 Address specification</h3>

<p>Speech Dispatcher provies several methods of communication and can be
used both locally and over network. See <a href="#Communication-mechanisms">Communication mechanisms</a>. Client applications and interface libraries need to
recognize an address, which specifies how and where to contact the
appropriate server.
</p>
<p>Address specification consits from the method and one or more of its
parameters, each item separated by a colon:
</p>
<div class="example">
<pre class="example">method:parameter1:parameter2
</pre></div>

<p>The method is either &rsquo;unix_socket&rsquo; or &rsquo;inet_socket&rsquo;. Parameters are
optional.  If not used in the address line, their default value will
be used.
</p>
<p>Two forms are currently recognized:
</p>
<div class="example">
<pre class="example">unix_socket:full/path/to/socket
inet_socket:host_ip:port
</pre></div>

<p>Examples of valid address lines are:
</p><div class="example">
<pre class="example">unix_socket
unix_socket:/tmp/test.sock
inet_socket
inet_socket:192.168.0.34
inet_socket:192.168.0.34:6563
</pre></div>

<p>Clients implement different mechanisms how the user can set the
address. Clients should respect the <var>SPEECHD_ADDRESS</var> environment
variable See <a href="#Setting-Communication-Method">Setting Communication Method</a>, unless the user
ovverrides its value by settins in the client application
itself. Clients should fallback to the default address, if neither the
environment variable or their specific configuration is set.
</p>
<p>The default communication address currently is:
</p>
<div class="example">
<pre class="example">unix_socket:/$XDG_RUNTIME_DIR/speech-dispatcher/speechd.sock
</pre></div>

<p>where &lsquo;~&rsquo; stands for the path to the users home directory.
</p>
<hr>
<span id="Actions-performed-on-startup"></span><div class="header">
<p>
Next: <a href="#Accepted-signals" accesskey="n" rel="next">Accepted signals</a>, Previous: <a href="#Address-specification" accesskey="p" rel="prev">Address specification</a>, Up: <a href="#Technical-Specifications" accesskey="u" rel="up">Technical Specifications</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Actions-performed-on-startup-1"></span><h3 class="section">3.3 Actions performed on startup</h3>

<p>What follows is an overview of the actions the server takes on startup
in this order:
</p>
<ul>
<li> Initialize logging stage 1

<p>Set loglevel to 1 and log destination to stderr (logfile is not ready yet).
</p>
</li><li> Parse command line options

<p>Read preferred communication method, destinations for logfile and pidfile
</p>
</li><li> Establish the <samp>~/.config/speech-dispatcher/</samp> and
<samp>~/.cache/speech-dispatcher/</samp> directories

<p>If pid and conf paths were not given as command line options, the
server will place them in <samp>~/.config/speech-dispatcher/</samp> and
<samp>~/.cache/speech-dispatcher/</samp> by default. If they
are not specified AND the current user doesn&rsquo;t have a system home directory,
the server will fail startup.
</p>
<p>The configuration file is pointed to <samp>~/.config/speech-dispatcher/speechd.conf</samp>
if it exists, otherwise to <samp>/etc/speech-dispatcher/speechd.conf</samp> or a similar
system location according to compile options. One of these files must
exists, otherwise Speech Dispatcher will not know where to find its output
modules.
</p>
</li><li> Create pid file

<p>Check the pid file in the determined location. If an instance of the
server is already running, log an error message and exit with error
code 1, otherwise create and lock a new pid file.
</p>
</li><li> Check for autospawning enabled

<p>If the server is started with &ndash;spawn, check whether autospawn is not
disabled in the configuration (DisableAutoSpawn config option in
speechd.conf). If it is disabled, log an error message and exit with
error code 1.
</p>
</li><li> Install signal handlers

</li><li> Create unix or inet sockets and start listening

</li><li> Initialize Speech Dispatcher

<p>Read the configuration files, setup some lateral threads, start and
initialize output modules. Reinitialize logging (stage 2) into the
final logfile destination (as determined by the command line option,
the configuration option and the default location in this order of
precedence).
</p>
<p>After this step, Speech Dispatcher is ready to accept new connections.
</p>
</li><li> Daemonize the process

<p>Fork the process, disconnect from standard input and outputs,
disconnect from parent process etc. as prescribed by the POSIX
standards.
</p>
</li><li> Initialize the speaking lateral thread

<p>Initialize the second main thread which will process the speech
request from the queues and pass them onto the Speech Dispatcher
modules.
</p>

</li><li> Start accepting new connections from clients

<p>Start listening for new connections from clients and processing them
in a loop.
</p>
</li></ul>

<hr>
<span id="Accepted-signals"></span><div class="header">
<p>
Previous: <a href="#Actions-performed-on-startup" accesskey="p" rel="prev">Actions performed on startup</a>, Up: <a href="#Technical-Specifications" accesskey="u" rel="up">Technical Specifications</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Accepted-signals-1"></span><h3 class="section">3.4 Accepted signals</h3>

<ul>
<li> SIGINT

<p>Terminate the server
</p>
</li><li> SIGHUP

<p>Reload configuration from config files but do not restart modules
</p>
</li><li> SIGUSR1

<p>Reload dead output modules (modules which were previously working but
crashed during runtime and marked as dead)
</p>
</li><li> SIGPIPE

<p>Ignored
</p>
</li></ul>

<hr>
<span id="Client-Programming"></span><div class="header">
<p>
Next: <a href="#Server-Programming" accesskey="n" rel="next">Server Programming</a>, Previous: <a href="#Technical-Specifications" accesskey="p" rel="prev">Technical Specifications</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Client-Programming-1"></span><h2 class="chapter">4 Client Programming</h2>

<p>Clients communicate with Speech Dispatcher via the Speech Synthesis
Internet Protocol (SSIP) See <cite><a href="ssip.html#Top">Speech Synthesis
Internet Protocol documentation</a></cite>.  The protocol is the actual
interface to Speech Dispatcher.
</p>
<p>Usually you don&rsquo;t need to use SSIP directly.  You can use one of the supplied
libraries, which wrap the SSIP interface.  This is the
recommended way of communicating with Speech Dispatcher.  We try so support as
many programming environments as possible.  This manual (except SSIP) contains
documentation for the C and Python libraries, however there are also other
libraries developed as external projects.  Please contact us for information
about current external client libraries.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#C-API" accesskey="1">C API</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Shared library for C/C++
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Python-API" accesskey="2">Python API</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Python module.
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Guile-API" accesskey="3">Guile API</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Common-Lisp-API" accesskey="4">Common Lisp API</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Autospawning" accesskey="5">Autospawning</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How server is started from clients
</td></tr>
</table>

<hr>
<span id="C-API"></span><div class="header">
<p>
Next: <a href="#Python-API" accesskey="n" rel="next">Python API</a>, Previous: <a href="#Client-Programming" accesskey="p" rel="prev">Client Programming</a>, Up: <a href="#Client-Programming" accesskey="u" rel="up">Client Programming</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="C-API-1"></span><h3 class="section">4.1 C API</h3>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#Initializing-and-Terminating-in-C" accesskey="1">Initializing and Terminating in C</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Speech-Synthesis-Commands-in-C" accesskey="2">Speech Synthesis Commands in C</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Speech-output-control-commands-in-C" accesskey="3">Speech output control commands in C</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Characters-and-Keys-in-C" accesskey="4">Characters and Keys in C</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Sound-Icons-in-C" accesskey="5">Sound Icons in C</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Parameter-Setting-Commands-in-C" accesskey="6">Parameter Setting Commands in C</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Other-Functions-in-C" accesskey="7">Other Functions in C</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Information-Retrieval-Commands-in-C" accesskey="8">Information Retrieval Commands in C</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Event-Notification-and-Index-Marking-in-C" accesskey="9">Event Notification and Index Marking in C</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#History-Commands-in-C">History Commands in C</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Direct-SSIP-Communication-in-C">Direct SSIP Communication in C</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<span id="Initializing-and-Terminating-in-C"></span><div class="header">
<p>
Next: <a href="#Speech-Synthesis-Commands-in-C" accesskey="n" rel="next">Speech Synthesis Commands in C</a>, Previous: <a href="#C-API" accesskey="p" rel="prev">C API</a>, Up: <a href="#C-API" accesskey="u" rel="up">C API</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Initializing-and-Terminating"></span><h4 class="subsection">4.1.1 Initializing and Terminating</h4>

<dl>
<dt id="index-SPDConnection_002a">C API function: <strong>SPDConnection*</strong> <em>spd_open(char* client_name, char* connection_name, char* user_name, SPDConnectionMode connection_mode)</em></dt>
<dd><span id="index-spd_005fopen_0028_0029"></span>

<p>Opens a new connection to Speech Dispatcher and returns a socket file
descriptor you will use to communicate with Speech Dispatcher. The
socket file descriptor is a parameter used in all the other
functions. It now uses local communication via inet sockets.
See <code>spd_open2</code> for more details.
</p>
<p>The three parameters <code>client_name</code>, <code>connection_name</code> and
<code>username</code> are there only for informational and navigational
purposes, they don&rsquo;t affect any settings or behavior of any
functions. The authentication mechanism has nothing to do with
<code>username</code>. These parameters are important for the user when he
wants to set some parameters for a given session, when he wants to
browse through history, etc. The parameter <code>connection_mode</code>
specifies how this connection should be handled internally and if
event notifications and index marking capabilities will be available.
</p>
<p><code>client_name</code> is the name of the client that opens the connection. Normally,
it should be the name of the executable, for example &ldquo;lynx&rdquo;, &ldquo;emacs&rdquo;, &ldquo;bash&rdquo;,
or &ldquo;gcc&rdquo;. It can be left as NULL.
</p>
<p><code>connection_name</code> determines the particular use of that connection. If you
use only one connection in your program, this should be set to &ldquo;main&rdquo; (passing
a NULL pointer has the same effect). If you use two or more connections in
your program, their <code>client_name</code>s should be the same, but <code>connection_name</code>s
should differ. For example: &ldquo;buffer&rdquo;, &ldquo;command_line&rdquo;, &ldquo;text&rdquo;, &ldquo;menu&rdquo;.
</p>
<p><code>username</code> should be set to the name of the user. Normally, you should
get this string from the system. If set to NULL, libspeechd will try to
determine it automatically by g_get_user_name().
</p>
<p><code>connection_mode</code> has two possible values: <code>SPD_MODE_SINGLE</code>
and <code>SPD_MODE_THREADED</code>. If the parameter is set to
<code>SPD_MODE_THREADED</code>, then <code>spd_open()</code> will open an
additional thread in your program which will handle asynchronous SSIP
replies and will allow you to use callbacks for event notifications
and index marking, allowing you to keep track of the progress
of speaking the messages. However, you must be aware that your
program is now multi-threaded and care must be taken when
using/handling signals. If <code>SPD_MODE_SINGLE</code> is chosen, the
library won&rsquo;t execute any additional threads and SSIP will run only as
a synchronous protocol, therefore event notifications and index
marking won&rsquo;t be available.
</p>
<p>It returns a newly allocated SPDConnection* structure on success, or <code>NULL</code>
on error.
</p>
<p>Each connection you open should be closed by spd_close() before the
end of the program, so that the associated connection descriptor is
closed, threads are terminated and memory is freed.
</p>
</dd></dl>

<dl>
<dt id="index-SPDConnection_002a-1">C API function: <strong>SPDConnection*</strong> <em>spd_open2(char* client_name, char* connection_name, char* user_name, SPDConnectionMode connection_mode, SPDConnectionMethod method, int autospawn)</em></dt>
<dd><span id="index-spd_005fopen2_0028_0029"></span>

<p>Opens a new connection to Speech Dispatcher and returns a socket file
descriptor. This function is the same as <code>spd_open</code> except that
it gives more control of the communication method and autospawn
functionality as described below.
</p>
<p><code>method</code> is either <code>SPD_METHOD_UNIX_SOCKET</code> or <code>SPD_METHOD_INET_SOCKET</code>. By default,
unix socket communication should be preferred, but inet sockets are necessary for cross-network
communication.
</p>
<p><code>autospawn</code> is a boolean flag specifying whether the function
should try to autospawn (autostart) the Speech Dispatcher server
process if it is not running already. This is set to 1 by default, so
this function should normally not fail even if the server is not yet
running.
</p>
</dd></dl>

<dl>
<dt id="index-void">C API function: <strong>void</strong> <em>spd_close(SPDConnection *connection)</em></dt>
<dd><span id="index-spd_005fclose_0028_0029"></span>

<p>Closes a Speech Dispatcher socket connection, terminates associated
threads (if necessary) and frees the memory allocated by
spd_open(). You should close every connection before the end of your
program.
</p>
<p><code>connection</code> is the SPDConnection connection obtained by spd_open().
</p></dd></dl>

<hr>
<span id="Speech-Synthesis-Commands-in-C"></span><div class="header">
<p>
Next: <a href="#Speech-output-control-commands-in-C" accesskey="n" rel="next">Speech output control commands in C</a>, Previous: <a href="#Initializing-and-Terminating-in-C" accesskey="p" rel="prev">Initializing and Terminating in C</a>, Up: <a href="#C-API" accesskey="u" rel="up">C API</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Speech-Synthesis-Commands"></span><h4 class="subsection">4.1.2 Speech Synthesis Commands</h4>

<dl>
<dt id="index-C-API-type">Variable: <strong>C API type</strong> <em>SPDPriority</em></dt>
<dd><span id="index-SPDPriority"></span>

<p><code>SPDPriority</code> is an enum type that represents the possible priorities that
can be assigned to a message.
</p>
<div class="example">
<pre class="example">typedef enum{
    SPD_IMPORTANT = 1,
    SPD_MESSAGE = 2,
    SPD_TEXT = 3,
    SPD_NOTIFICATION = 4,
    SPD_PROGRESS = 5
}SPDPriority;
</pre></div>

<p>See <a href="ssip.html#Top">Message Priority Model</a> in <cite>SSIP Documentation</cite>.
</p>
</dd></dl>

<dl>
<dt id="index-int">C API function: <strong>int</strong> <em>spd_say(SPDConnection* connection, SPDPriority priority, char* text);</em></dt>
<dd><span id="index-spd_005fsay_0028_0029"></span>

<p>Sends a message to Speech Dispatcher. If this message isn&rsquo;t blocked by
some message of higher priority and this CONNECTION isn&rsquo;t paused, it
will be synthesized directly on one of the output devices. Otherwise,
the message will be discarded or delayed according to its priority.
</p>
<p><code>connection</code> is the SPDConnection* connection created by spd_open().
</p>
<p><code>priority</code> is the desired priority for this message. See <a href="ssip.html#Top">Message Priority Model</a> in <cite>SSIP Documentation</cite>.
</p>
<p><code>text</code> is a null terminated string containing text you want sent
to synthesis. It must be encoded in UTF-8. Note that this doesn&rsquo;t have
to be what you will finally hear. It can be affected by different
settings, such as spelling, punctuation, text substitution etc.
</p>
<p>It returns a positive unique message identification number on success,
-1 otherwise.  This message identification number can be saved and
used for the purpose of event notification callbacks or history
handling.
</p>
</dd></dl>

<dl>
<dt id="index-int-1">C API function: <strong>int</strong> <em>spd_sayf(SPDConnection* connection, SPDPriority priority, char* format, ...);</em></dt>
<dd><span id="index-spd_005fsayf_0028_0029"></span>

<p>Similar to <code>spd_say()</code>, simulates the behavior of printf().
</p>
<p><code>format</code> is a string containing text and formatting of the parameters, such as &ldquo;%d&rdquo;,
&ldquo;%s&rdquo; etc. It must be encoded in UTF-8.
</p>
<p><code>...</code> is an arbitrary number of arguments.
</p>
<p>All other parameters are the same as for spd_say().
</p>
<p>For example:
</p><div class="example">
<pre class="example">       spd_sayf(conn, SPD_TEXT, &quot;Hello %s, how are you?&quot;, username);
       spd_sayf(conn, SPD_IMPORTANT, &quot;Fatal error on [%s:%d]&quot;, filename, line);
</pre></div>

<p>But be careful with unicode! For example this doesn&rsquo;t work:
</p>
<div class="example">
<pre class="example">       spd_sayf(conn, SPD_NOTIFY, ``Pressed key is %c.'', key);
</pre></div>

<p>Why? Because you are supposing that key is a char, but that will
fail with languages using multibyte charsets. The proper solution
is:
</p>
<div class="example">
<pre class="example">       spd_sayf(conn, SPD_NOTIFY, ``Pressed key is %s'', key);
</pre></div>
<p>where key is an encoded string.
</p>
<p>It returns a positive unique message identification number on success, -1 otherwise.
This message identification number can be saved and used for the purpose of
event notification callbacks or history handling.
</p></dd></dl>

<hr>
<span id="Speech-output-control-commands-in-C"></span><div class="header">
<p>
Next: <a href="#Characters-and-Keys-in-C" accesskey="n" rel="next">Characters and Keys in C</a>, Previous: <a href="#Speech-Synthesis-Commands-in-C" accesskey="p" rel="prev">Speech Synthesis Commands in C</a>, Up: <a href="#C-API" accesskey="u" rel="up">C API</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Speech-Output-Control-Commands"></span><h4 class="subsection">4.1.3 Speech Output Control Commands</h4>

<span id="Stop-Commands"></span><h4 class="subsubheading">Stop Commands</h4>

<dl>
<dt id="index-int-2">C API function: <strong>int</strong> <em>spd_stop(SPDConnection* connection);</em></dt>
<dd><span id="index-spd_005fstop_0028_0029"></span>

<p>Stops the message currently being spoken on a given connection. If there
is no message being spoken, does nothing. (It doesn&rsquo;t touch the messages
waiting in queues). This is intended for stops executed by the user,
not for automatic stops (because automatically you can&rsquo;t control
how many messages are still waiting in queues on the server).
</p>
<p><code>connection</code> is the SPDConnection* connection created by spd_open().
</p>
<p>It returns 0 on success, -1 otherwise.
</p></dd></dl>

<dl>
<dt id="index-int-3">C API function: <strong>int</strong> <em>spd_stop_all(SPDConnection* connection);</em></dt>
<dd><span id="index-spd_005fstop_005fall_0028_0029"></span>

<p>The same as spd_stop(), but it stops every message being said,
without distinguishing where it came from.
</p>
<p>It returns 0 on success, -1 if some of the stops failed.
</p></dd></dl>

<dl>
<dt id="index-int-4">C API function: <strong>int</strong> <em>spd_stop_uid(SPDConnection* connection, int target_uid);</em></dt>
<dd><span id="index-spd_005fstop_005fuid_0028_0029"></span>

<p>The same as spd_stop() except that it stops a client client different from
the calling one. You must specify this client in <code>target_uid</code>.
</p>
<p><code>target_uid</code> is the unique ID of the connection you want
to execute stop() on. It can be obtained from spd_history_get_client_list().
See <a href="#History-Commands-in-C">History Commands in C</a>.
</p>
<p>It returns 0 on success, -1 otherwise.
</p>
</dd></dl>

<span id="Cancel-Commands"></span><h4 class="subsubheading">Cancel Commands</h4>

<dl>
<dt id="index-int-5">C API function: <strong>int</strong> <em>spd_cancel(SPDConnection* connection);</em></dt>
<dd>
<p>Stops the currently spoken message from this connection
(if there is any) and discards all the queued messages
from this connection. This is probably what you want
to do, when you call spd_cancel() automatically in
your program.
</p></dd></dl>

<dl>
<dt id="index-int-6">C API function: <strong>int</strong> <em>spd_cancel_all(SPDConnection* connection);</em></dt>
<dd><span id="index-spd_005fcancel_005fall_0028_0029"></span>

<p>The same as spd_cancel(), but it cancels every message
without distinguishing where it came from.
</p>
<p>It returns 0 on success, -1 if some of the stops failed.
</p></dd></dl>

<dl>
<dt id="index-int-7">C API function: <strong>int</strong> <em>spd_cancel_uid(SPDConnection* connection, int target_uid);</em></dt>
<dd><span id="index-spd_005fcancel_005fuid_0028_0029"></span>

<p>The same as spd_cancel() except that it executes cancel for some other client
than the calling one. You must specify this client in <code>target_uid</code>.
</p>
<p><code>target_uid</code> is the unique ID of the connection you want to
execute cancel() on.  It can be obtained from
spd_history_get_client_list().  See <a href="#History-Commands-in-C">History Commands in C</a>.
</p>
<p>It returns 0 on success, -1 otherwise.
</p></dd></dl>

<span id="Pause-Commands"></span><h4 class="subsubheading">Pause Commands</h4>

<dl>
<dt id="index-int-8">C API function: <strong>int</strong> <em>spd_pause(SPDConnection* connection);</em></dt>
<dd><span id="index-int-spd_005fpause_0028_0029"></span>

<p>Pauses all messages received from the given connection. No messages
except for priority <code>notification</code> and <code>progress</code> are thrown
away, they are all waiting in a separate queue for resume(). Upon resume(), the
message that was being said at the moment pause() was received will be
continued from the place where it was paused.
</p>
<p>It returns immediately. However, that doesn&rsquo;t mean that the speech
output will stop immediately. Instead, it can continue speaking
the message for a while until a place where the position in the text
can be determined exactly is reached. This is necessary to be able to
provide &lsquo;resume&rsquo; without gaps and overlapping.
</p>
<p>When pause is on for the given client, all newly received
messages are also queued and waiting for resume().
</p>
<p>It returns 0 on success, -1 if something failed.
</p></dd></dl>

<dl>
<dt id="index-int-9">C API function: <strong>int</strong> <em>spd_pause_all(SPDConnection* connection);</em></dt>
<dd><span id="index-spd_005fpause_005fall_0028_0029"></span>

<p>The same as spd_pause(), but it pauses every message,
without distinguishing where it came from.
</p>
<p>It returns 0 on success, -1 if some of the pauses failed.
</p></dd></dl>

<dl>
<dt id="index-int-10">C API function: <strong>int</strong> <em>spd_pause_uid(SPDConnection* connection, int target_uid);</em></dt>
<dd><span id="index-spd_005fpause_005fuid_0028_0029"></span>

<p>The same as spd_pause() except that it executes pause for a client different from
the calling one. You must specify the client in <code>target_uid</code>.
</p>
<p><code>target_uid</code> is the unique ID of the connection you want
to pause. It can be obtained from spd_history_get_client_list().
See <a href="#History-Commands-in-C">History Commands in C</a>.
</p>
<p>It returns 0 on success, -1 otherwise.
</p></dd></dl>

<span id="Resume-Commands"></span><h4 class="subsubheading">Resume Commands</h4>

<dl>
<dt id="index-int-11">C API function: <strong>int</strong> <em>spd_resume(SPDConnection* connection);</em></dt>
<dd><span id="index-int-spd_005fresume_0028_0029"></span>

<p>Resumes all paused messages from the given connection. The rest
of the message that was being said at the moment pause() was
received will be said and all the other messages are queued
for synthesis again.
</p>
<p><code>connection</code> is the SPDConnection* connection created by spd_open().
</p>
<p>It returns 0 on success, -1 otherwise.
</p></dd></dl>

<dl>
<dt id="index-int-12">C API function: <strong>int</strong> <em>spd_resume_all(SPDConnection* connection);</em></dt>
<dd><span id="index-spd_005fresume_005fall_0028_0029"></span>

<p>The same as spd_resume(), but it resumes every paused message,
without distinguishing where it came from.
</p>
<p>It returns 0 on success, -1 if some of the pauses failed.
</p></dd></dl>

<dl>
<dt id="index-int-13">C API function: <strong>int</strong> <em>spd_resume_uid(SPDConnection* connection, int target_uid);</em></dt>
<dd><span id="index-spd_005fresume_005fuid_0028_0029"></span>

<p>The same as spd_resume() except that it executes resume for a client different from
the calling one. You must specify the client in <code>target_uid</code>.
</p>
<p><code>target_uid</code> is the unique ID of the connection you want
to resume. It can be obtained from spd_history_get_client_list().
See <a href="#History-Commands-in-C">History Commands in C</a>.
</p>
<p>It returns 0 on success, -1 otherwise.
</p></dd></dl>

<hr>
<span id="Characters-and-Keys-in-C"></span><div class="header">
<p>
Next: <a href="#Sound-Icons-in-C" accesskey="n" rel="next">Sound Icons in C</a>, Previous: <a href="#Speech-output-control-commands-in-C" accesskey="p" rel="prev">Speech output control commands in C</a>, Up: <a href="#C-API" accesskey="u" rel="up">C API</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Characters-and-Keys"></span><h4 class="subsection">4.1.4 Characters and Keys</h4>

<dl>
<dt id="index-int-14">C API function: <strong>int</strong> <em>spd_char(SPDConnection* connection, SPDPriority priority, char* character);</em></dt>
<dd><span id="index-spd_005fchar_0028_0029"></span>

<p>Says a character according to user settings for characters. For example, this can be
used for speaking letters under the cursor.
</p>
<p><code>connection</code> is the SPDConnection* connection created by spd_open().
</p>
<p><code>priority</code> is the desired priority for this
message. See <a href="ssip.html#Top">Message Priority Model</a> in <cite>SSIP Documentation</cite>.
</p>
<p><code>character</code> is a NULL terminated string of chars containing one UTF-8
character. If it contains more characters, only the first one is processed.
</p>
<p>It returns 0 on success, -1 otherwise.
</p></dd></dl>

<dl>
<dt id="index-int-15">C API function: <strong>int</strong> <em>spd_wchar(SPDConnection* connection, SPDPriority priority, wchar_t wcharacter);</em></dt>
<dd><span id="index-spd_005fsay_005fwchar_0028_0029"></span>

<p>The same as spd_char(), but it takes a wchar_t variable as its argument.
</p>
<p>It returns 0 on success, -1 otherwise.
</p></dd></dl>

<dl>
<dt id="index-int-16">C API function: <strong>int</strong> <em>spd_key(SPDConnection* connection, SPDPriority priority, char* key_name);</em></dt>
<dd><span id="index-spd_005fkey_0028_0029"></span>

<p>Says a key according to user settings for keys.
</p>
<p><code>connection</code> is the SPDConnection* connection created by spd_open().
</p>
<p><code>priority</code> is the desired priority for this
message. See <a href="ssip.html#Top">Message Priority Model</a> in <cite>SSIP Documentation</cite>.
</p>
<p><code>key_name</code> is the name of the key in a special format.
See <a href="ssip.html#Top">Speech Synthesis and Sound Output Commands</a> in <cite>SSIP
Documentation</cite>, (KEY, the corresponding SSIP command) for description
of the format of <code>key_name</code>
</p>
<p>It returns 0 on success, -1 otherwise.
</p></dd></dl>

<hr>
<span id="Sound-Icons-in-C"></span><div class="header">
<p>
Next: <a href="#Parameter-Setting-Commands-in-C" accesskey="n" rel="next">Parameter Setting Commands in C</a>, Previous: <a href="#Characters-and-Keys-in-C" accesskey="p" rel="prev">Characters and Keys in C</a>, Up: <a href="#C-API" accesskey="u" rel="up">C API</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Sound-Icons"></span><h4 class="subsection">4.1.5 Sound Icons</h4>

<dl>
<dt id="index-int-17">C API function: <strong>int</strong> <em>spd_sound_icon(SPDConnection* connection, SPDPriority priority, char* icon_name);</em></dt>
<dd><span id="index-spd_005fsound_005ficon_0028_0029"></span>

<p>Sends a sound icon ICON_NAME. These are symbolic names that are mapped
to a sound or to a text string (in the particular language) according to
Speech Dispatcher tables and user settings. Each program can also
define its own icons.
</p>
<p><code>connection</code> is the SPDConnection* connection created by spd_open().
</p>
<p><code>priority</code> is the desired priority for this
message. See <a href="ssip.html#Top">Message Priority Model</a> in <cite>SSIP Documentation</cite>.
</p>
<p><code>icon_name</code> is the name of the icon. It can&rsquo;t contain spaces, instead
use underscores (&lsquo;_&rsquo;). Icon names starting with an underscore
are considered internal and shouldn&rsquo;t be used.
</p></dd></dl>

<hr>
<span id="Parameter-Setting-Commands-in-C"></span><div class="header">
<p>
Next: <a href="#Other-Functions-in-C" accesskey="n" rel="next">Other Functions in C</a>, Previous: <a href="#Sound-Icons-in-C" accesskey="p" rel="prev">Sound Icons in C</a>, Up: <a href="#C-API" accesskey="u" rel="up">C API</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Parameter-Settings-Commands"></span><h4 class="subsection">4.1.6 Parameter Settings Commands</h4>

<p>The following parameter setting commands are available. For configuration
and history clients there are also functions for setting the value for
some other connection and for all connections. They are listed separately below.
</p>
<p>Please see <a href="ssip.html#Top">Parameter Setting Commands</a> in <cite>SSIP
Documentation</cite> for a general description of what they mean.
</p>
<dl>
<dt id="index-int-18">C API function: <strong>int</strong> <em>spd_set_data_mode(SPDConnection *connection, SPDDataMode mode)</em></dt>
<dd><span id="index-spd_005fset_005fdata_005fmode_0028_0029"></span>

<p>Set Speech Dispatcher data mode. Currently, plain text and SSML are
supported. SSML is especially useful if you want to use index marks
or include changes of voice parameters in the text.
</p>
<p><code>mode</code> is the requested data mode: <code>SPD_DATA_TEXT</code> or
<code>SPD_DATA_SSML</code>.
</p>
</dd></dl>

<dl>
<dt id="index-int-19">C API function: <strong>int</strong> <em>spd_set_language(SPDConnection* connection, char* language);</em></dt>
<dd><span id="index-spd_005fset_005flanguage_0028_0029"></span>

<p>Sets the language that should be used for synthesis.
</p>
<p><code>connection</code> is the SPDConnection* connection created by spd_open().
</p>
<p><code>language</code> is the language code as defined in RFC 1766 (&ldquo;cs&rdquo;,
&ldquo;en&rdquo;, &ldquo;en-US&rdquo;, ...).
</p>
</dd></dl>

<dl>
<dt id="index-int-20">C API function: <strong>int</strong> <em>spd_set_output_module(SPDConnection* connection, char* output_module);</em></dt>
<dd><span id="index-spd_005fset_005foutput_005fmodule_0028_0029"></span>
<span id="spd_005fset_005foutput_005fmodule"></span>
<p>Sets the output module that should be used for synthesis. The parameter
of this command should always be entered by the user in some way
and not hardcoded anywhere in the code as the available synthesizers
and their registration names may vary from machine to machine.
</p>
<p><code>connection</code> is the SPDConnection* connection created by spd_open().
</p>
<p><code>output_module</code> is the output module name under which the module
was loaded into Speech Dispatcher in its configuration (&ldquo;flite&rdquo;,
&ldquo;festival&rdquo;, &ldquo;epos-generic&rdquo;... )
</p>
</dd></dl>

<dl>
<dt id="index-char_002a">C API function: <strong>char*</strong> <em>spd_get_output_module(SPDConnection* connection);</em></dt>
<dd><span id="index-spd_005fget_005foutput_005fmodule_0028_0029"></span>
<span id="spd_005fget_005foutput_005fmodule"></span>
<p>Gets the current output module in use for synthesis.
</p>
<p><code>connection</code> is the SPDConnection* connection created by spd_open().
</p>
<p>It returns the output module name under which the module was loaded into Speech
Dispatcher in its configuration (&ldquo;flite&rdquo;, &ldquo;festival&rdquo;,  &ldquo;espeak&rdquo;... )
</p>
</dd></dl>

<dl>
<dt id="index-int-21">C API function: <strong>int</strong> <em>spd_set_punctuation(SPDConnection* connection, SPDPunctuation type);</em></dt>
<dd><span id="index-spd_005fset_005fpunctuation_0028_0029"></span>

<p>Set punctuation mode to the given value.  &lsquo;all&rsquo; means speak all
punctuation characters, &lsquo;none&rsquo; means speak no punctuation characters,
&lsquo;some&rsquo; and &lsquo;most&rsquo; mean speak intermediate sets of punctuation characters as
set in symbols tables or output modules.
</p>
<p><code>connection</code> is the SPDConnection* connection created by spd_open().
</p>
<p><code>type</code> is one of the following values: <code>SPD_PUNCT_ALL</code>,
<code>SPD_PUNCT_NONE</code>, <code>SPD_PUNCT_SOME</code>.
</p>
<p>It returns 0 on success, -1 otherwise.
</p></dd></dl>

<dl>
<dt id="index-int-22">C API function: <strong>int</strong> <em>spd_set_spelling(SPDConnection* connection, SPDSpelling type);</em></dt>
<dd><span id="index-spd_005fset_005fspelling_0028_0029"></span>

<p>Switches spelling mode on and off. If set to on, all incoming messages
from this particular connection will be processed according to appropriate
spelling tables (see spd_set_spelling_table()).
</p>
<p><code>connection</code> is the SPDConnection* connection created by spd_open().
</p>
<p><code>type</code> is one of the following values: <code>SPD_SPELL_ON</code>, <code>SPD_SPELL_OFF</code>.
</p></dd></dl>

<dl>
<dt id="index-int-23">C API function: <strong>int</strong> <em>spd_set_voice_type(SPDConnection* connection, SPDVoiceType voice);</em></dt>
<dd><span id="index-spd_005fset_005fvoice_005ftype_0028_0029"></span>
<span id="spd_005fset_005fvoice_005ftype"></span>
<p>Set a preferred symbolic voice.
</p>
<p><code>connection</code> is the SPDConnection* connection created by spd_open().
</p>
<p><code>voice</code> is one of the following values: <code>SPD_MALE1</code>,
<code>SPD_MALE2</code>, <code>SPD_MALE3</code>, <code>SPD_FEMALE1</code>, <code>SPD_FEMALE2</code>,
<code>SPD_FEMALE3</code>, <code>SPD_CHILD_MALE</code>, <code>SPD_CHILD_FEMALE</code>.
</p>
</dd></dl>

<dl>
<dt id="index-int-24">C API function: <strong>int</strong> <em>spd_set_synthesis_voice(SPDConnection* connection, char* voice_name);</em></dt>
<dd><span id="index-spd_005fset_005fvoice_005ftype_0028_0029-1"></span>
<span id="spd_005fset_005fsynthesis_005fvoice"></span>
<p>Set the speech synthesizer voice to use. Please note that synthesis
voices are an attribute of the synthesizer, so this setting only takes
effect until the output module in use is changed (via
<code>spd_set_output_module()</code> or via <code>spd_set_language</code>).
</p>
<p><code>connection</code> is the SPDConnection* connection created by spd_open().
</p>
<p><code>voice_name</code> is any of the voice name values retrieved by See <a href="#spd_005flist_005fsynthesis_005fvoices">spd_list_synthesis_voices</a>.
</p>
</dd></dl>

<dl>
<dt id="index-int-25">C API function: <strong>int</strong> <em>spd_set_voice_rate(SPDConnection* connection, int rate);</em></dt>
<dd><span id="index-spd_005fset_005fvoice_005frate_0028_0029"></span>

<p>Set voice speaking rate.
</p>
<p><code>connection</code> is the SPDConnection* connection created by spd_open().
</p>
<p><code>rate</code> is a number between -100 and +100 which means
the slowest and the fastest speech rate respectively.
</p>
</dd></dl>

<dl>
<dt id="index-int-26">C API function: <strong>int</strong> <em>spd_get_voice_rate(SPDConnection* connection);</em></dt>
<dd><span id="index-spd_005fget_005fvoice_005frate_0028_0029"></span>

<p>Get voice speaking rate.
</p>
<p><code>connection</code> is the SPDConnection* connection created by spd_open().
</p>
<p>It returns the current voice rate.
</p>
</dd></dl>

<dl>
<dt id="index-int-27">C API function: <strong>int</strong> <em>spd_set_voice_pitch(SPDConnection* connection, int pitch);</em></dt>
<dd><span id="index-spd_005fset_005fvoice_005fpitch_0028_0029"></span>

<p>Set voice pitch.
</p>
<p><code>connection</code> is the SPDConnection* connection created by spd_open().
</p>
<p><code>pitch</code> is a number between -100 and +100, which means the
lowest and the highest pitch respectively.
</p>
</dd></dl>

<dl>
<dt id="index-int-28">C API function: <strong>int</strong> <em>spd_get_voice_pitch(SPDConnection* connection);</em></dt>
<dd><span id="index-spd_005fget_005fvoice_005fpitch_0028_0029"></span>

<p>Get voice pitch.
</p>
<p><code>connection</code> is the SPDConnection* connection created by spd_open().
</p>
<p>It returns the current voice pitch.
</p>
</dd></dl>

<dl>
<dt id="index-int-29">C API function: <strong>int</strong> <em>spd_set_voice_pitch_range(SPDConnection* connection, int pitch_range);</em></dt>
<dd><span id="index-spd_005fset_005fvoice_005fpitch_0028_0029-1"></span>

<p>Set voice pitch range.
</p>
<p><code>connection</code> is the SPDConnection* connection created by spd_open().
</p>
<p><code>pitch_range</code> is a number between -100 and +100, which means the
lowest and the highest pitch range respectively.
</p>
</dd></dl>

<dl>
<dt id="index-int-30">C API function: <strong>int</strong> <em>spd_set_volume(SPDConnection* connection, int volume);</em></dt>
<dd><span id="index-spd_005fset_005fvolume_0028_0029"></span>

<p>Set the volume of the voice and sounds produced by Speech Dispatcher&rsquo;s output
modules.
</p>
<p><code>connection</code> is the SPDConnection* connection created by spd_open().
</p>
<p><code>volume</code> is a number between -100 and +100 which means
the lowest and the loudest voice respectively.
</p>
</dd></dl>

<dl>
<dt id="index-int-31">C API function: <strong>int</strong> <em>spd_get_volume(SPDConnection* connection);</em></dt>
<dd><span id="index-spd_005fget_005fvolume_0028_0029"></span>

<p>Get the volume of the voice and sounds produced by Speech Dispatcher&rsquo;s output
modules.
</p>
<p><code>connection</code> is the SPDConnection* connection created by spd_open().
</p>
<p>It returns the current volume.
</p>
</dd></dl>


<hr>
<span id="Other-Functions-in-C"></span><div class="header">
<p>
Next: <a href="#Information-Retrieval-Commands-in-C" accesskey="n" rel="next">Information Retrieval Commands in C</a>, Previous: <a href="#Parameter-Setting-Commands-in-C" accesskey="p" rel="prev">Parameter Setting Commands in C</a>, Up: <a href="#C-API" accesskey="u" rel="up">C API</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Other-Functions"></span><h4 class="subsection">4.1.7 Other Functions</h4>

<hr>
<span id="Information-Retrieval-Commands-in-C"></span><div class="header">
<p>
Next: <a href="#Event-Notification-and-Index-Marking-in-C" accesskey="n" rel="next">Event Notification and Index Marking in C</a>, Previous: <a href="#Other-Functions-in-C" accesskey="p" rel="prev">Other Functions in C</a>, Up: <a href="#C-API" accesskey="u" rel="up">C API</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Information-Retrieval-Commands"></span><h4 class="subsection">4.1.8 Information Retrieval Commands</h4>

<dl>
<dt id="index-char_002a_002a">C API function: <strong>char**</strong> <em>spd_list_modules(SPDConnection* connection)</em></dt>
<dd><span id="index-spd_005flist_005fmodules_0028_0029"></span>
<span id="spd_005flist_005fmodules"></span>

<p>Returns a null-terminated array of identification names of the available
output modules. You can subsequently set the desired output module with
See <a href="#spd_005fset_005foutput_005fmodule">spd_set_output_module</a>. In case of error, the return value is
a NULL pointer.
</p>
<p><code>connection</code> is the SPDConnection* connection created by spd_open().
</p>
</dd></dl>

<dl>
<dt id="index-char_002a_002a-1">C API function: <strong>char**</strong> <em>spd_list_voices(SPDConnection* connection)</em></dt>
<dd><span id="index-spd_005flist_005fvoices_0028_0029"></span>
<span id="spd_005flist_005fvoices"></span>
<p>Returns a null-terminated array of identification names of the
symbolic voices. You can subsequently set the desired voice
with See <a href="#spd_005fset_005fvoice_005ftype">spd_set_voice_type</a>.
</p>
<p>Please note that this is a fixed list independent of the synthesizer
in use. The given voices can be mapped to specific synthesizer voices
according to user wish or may, for example, all be mapped to the same
voice. To choose directly from the raw list of voices as implemented
in the synthesizer, See <a href="#spd_005flist_005fsynthesis_005fvoices">spd_list_synthesis_voices</a>.
</p>
<p>In case of error, the return value is a NULL pointer.
</p>
<p><code>connection</code> is the SPDConnection* connection created by spd_open().
</p>
</dd></dl>

<dl>
<dt id="index-char_002a_002a-2">C API function: <strong>char**</strong> <em>spd_list_synthesis_voices(SPDConnection* connection)</em></dt>
<dd><span id="index-spd_005flist_005fsynthesis_005fvoices_0028_0029"></span>
<span id="spd_005flist_005fsynthesis_005fvoices"></span>
<p>Returns a null-terminated array of identification names of
<code>SPDVoice*</code> structures describing the available voices as given
by the synthesizer. You can subsequently set the desired voice with
<code>spd_set_synthesis_voice()</code>.
</p>
<div class="example">
<pre class="example">typedef struct{
  char *name;   /* Name of the voice (id) */
  char *language;  /* 2/3-letter ISO language code,
                    * possibly followed by 2/3-letter ISO region code,
		    * e.g. en-US */
  char *variant;   /* a not-well defined string describing dialect etc. */
}SPDVoice;
</pre></div>

<p>Please note that the list returned is specific to each synthesizer in
use (so when you switch to another output module, you must also
retrieve a new list). If you want instead to use symbolic voice
names which are independent of the synthesizer in use, See <a href="#spd_005flist_005fvoices">spd_list_voices</a>.
</p>
<p>In case of error, the return value is a NULL pointer.
</p>
<p><code>connection</code> is the SPDConnection* connection created by spd_open().
</p>
</dd></dl>

<hr>
<span id="Event-Notification-and-Index-Marking-in-C"></span><div class="header">
<p>
Next: <a href="#History-Commands-in-C" accesskey="n" rel="next">History Commands in C</a>, Previous: <a href="#Information-Retrieval-Commands-in-C" accesskey="p" rel="prev">Information Retrieval Commands in C</a>, Up: <a href="#C-API" accesskey="u" rel="up">C API</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Event-Notification-and-Index-Marking-in-C-1"></span><h4 class="subsection">4.1.9 Event Notification and Index Marking in C</h4>

<p>When the SSIP connection is run in asynchronous mode, it is possible
to register callbacks for all the SSIP event notifications and index
mark notifications, as defined in <a href="ssip.html#Message-Event-Notification-and-Index-Marking">Message Event Notification
and Index Marking</a> in <cite>SSIP Documentation</cite>
</p>
<dl>
<dt id="index-C-API-type-1">Variable: <strong>C API type</strong> <em>SPDNotification</em></dt>
<dd><span id="index-SPDNotification"></span>
<span id="SPDNotification"></span>
<p><code>SPDNotification</code> is an enum type that represents the possible
base notification types that can be assigned to a message.
</p>
<div class="example">
<pre class="example">typedef enum{
    SPD_BEGIN = 1,
    SPD_END = 2,
    SPD_INDEX_MARKS = 4,
    SPD_CANCEL = 8,
    SPD_PAUSE = 16,
    SPD_RESUME = 32
}SPDNotification;
</pre></div>
</dd></dl>

<p>There are currently two types of callbacks in the C API.
</p>
<dl>
<dt id="index-C-API-type-2">Variable: <strong>C API type</strong> <em>SPDCallback</em></dt>
<dd><span id="index-SPDCallback"></span>
<span id="SPDCallback"></span><p><code>void (*SPDCallback)(size_t msg_id, size_t client_id, SPDNotificationType state);</code>
</p>
<p>This one is used for notifications about the events: <code>BEGIN</code>, <code>END</code>, <code>PAUSE</code>
and <code>RESUME</code>. When the callback is called, it provides three parameters for the event.
</p>
<p><code>msg_id</code> unique identification number of the message the notification is about.
</p>
<p><code>client_id</code> specifies the unique identification number of the client who sent the
message. This is usually the same connection as the connection which registered this
callback, and therefore uninteresting. However, in some special cases it might be useful
to register this callback for other SSIP connections, or register the same callback for
several connections originating from the same application.
</p>
<p><code>state</code> is the <code>SPD_Notification</code> type of this notification. See <a href="#SPDNotification">SPDNotification</a>.
</p></dd></dl>

<dl>
<dt id="index-C-API-type-3">Variable: <strong>C API type</strong> <em>SPDCallbackIM</em></dt>
<dd><span id="index-SPDCallbackIM"></span>
<p><code>void (*SPDCallbackIM)(size_t msg_id, size_t client_id, SPDNotificationType state,
char *index_mark);</code>
</p>
<p><code>SPDCallbackIM</code> is used for notifications about index marks that have been reached
in the message.  (A way to specify index marks is e.g. through the SSML element
&lt;mark/&gt; in ssml mode.)
</p>
<p>The syntax and meaning of these parameters are the same as for <a href="#SPDCallback">SPDCallback</a>
except for the additional parameter <code>index_mark</code>.
</p>
<p><code>index_mark</code> is a NULL terminated string associated with the index mark. Please
note that this string is specified by client application and therefore it needn&rsquo;t be
unique.
</p></dd></dl>

<p>One or more callbacks can be supplied for a given <code>SPDConnection*</code> connection by
assigning the values of pointers to the appropriate functions to the following connection
members:
</p>
<div class="example">
<pre class="example">    SPDCallback callback_begin;
    SPDCallback callback_end;
    SPDCallback callback_cancel;
    SPDCallback callback_pause;
    SPDCallback callback_resume;
    SPDCallbackIM callback_im;
</pre></div>

<p>There are three settings commands which will turn notifications on and
off for the current SSIP connection and cause the callbacks to be called
when the event is registered by Speech Dispatcher.
</p>
<dl>
<dt id="index-int-32">C API function: <strong>int</strong> <em>spd_set_notification_on(SPDConnection* connection, SPDNotification notification);</em></dt>
<dd><span id="index-spd_005fset_005fnotification_005fon"></span>
</dd></dl>
<dl>
<dt id="index-int-33">C API function: <strong>int</strong> <em>spd_set_notification_off(SPDConnection* connection, SPDNotification notification);</em></dt>
<dd><span id="index-spd_005fset_005fnotification_005foff"></span>
</dd></dl>
<dl>
<dt id="index-int-34">C API function: <strong>int</strong> <em>spd_set_notification(SPDConnection* connection, SPDNotification notification, const char* state);</em></dt>
<dd><span id="index-spd_005fset_005fnotification"></span>

<p>These functions will set the notification specified by the parameter
<code>notification</code> on or off (or to the given value)
respectively. Note that it is only safe to call these functions after
the appropriate callback functions have been set in the <code>SPDCallback</code>
structure. Doing otherwise is not considered an error, but the
application might miss some events due to callback functions not being
executed (e.g. the client might receive an <code>END</code> event without
receiving the corresponding <code>BEGIN</code> event in advance.
</p>
<p><code>connection</code> is the SPDConnection* connection created by spd_open().
</p>
<p><code>notification</code> is the requested type of notifications that should be reported by SSIP. See <a href="#SPDNotification">SPDNotification</a>.
Note that also &rsquo;|&rsquo; combinations are possible, as illustrated in the example below.
</p>
<p><code>state</code> must be either the string &ldquo;on&rdquo; or &ldquo;off&rdquo;, for switching the given notification on or off.
</p>
</dd></dl>

<p>The following example shows how to use callbacks for the simple
purpose of playing a message and waiting until its end. (Please note
that checks of return values in this example as well as other code
not directly related to index marking, have been removed for the purpose
of clarity.)
</p>
<div class="example">
<pre class="example">#include &lt;semaphore.h&gt;

sem_t semaphore;

/* Callback for Speech Dispatcher notifications */
void end_of_speech(size_t msg_id, size_t client_id, SPDNotificationType type)
{
   /* We don't check msg_id here since we will only send one
       message. */

   /* Callbacks are running in a separate thread, so let the
       (sleeping) main thread know about the event and wake it up. */
   sem_post(&amp;semaphore);
}

int
main(int argc, char **argv)
{
   SPDConnection *conn;

   sem_init(&amp;semaphore, 0, 0);

   /* Open Speech Dispatcher connection in THREADED mode. */
   conn = spd_open(&quot;say&quot;,&quot;main&quot;, NULL, SPD_MODE_THREADED);

   /* Set callback handler for 'end' and 'cancel' events. */
   conn-&gt;callback_end = con-&gt;callback_cancel = end_of_speech;

   /* Ask Speech Dispatcher to notify us about these events. */
   spd_set_notification_on(conn, SPD_END);
   spd_set_notification_on(conn, SPD_CANCEL);

   /* Say our message. */
   spd_sayf(conn, SPD_MESSAGE, &quot;%s&quot;, argv[1]);

   /* Wait for 'end' or 'cancel' of the sent message.
      By SSIP specifications, we are guaranteed to get
      one of these two eventually. */
   sem_wait(&amp;semaphore);

   return 0;
}
</pre></div>

<hr>
<span id="History-Commands-in-C"></span><div class="header">
<p>
Next: <a href="#Direct-SSIP-Communication-in-C" accesskey="n" rel="next">Direct SSIP Communication in C</a>, Previous: <a href="#Event-Notification-and-Index-Marking-in-C" accesskey="p" rel="prev">Event Notification and Index Marking in C</a>, Up: <a href="#C-API" accesskey="u" rel="up">C API</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="History-Commands"></span><h4 class="subsection">4.1.10 History Commands</h4>
<span id="index-spd_005fhistory_005fselect_005fclient_0028_0029"></span>
<span id="index-spd_005fget_005fclient_005flist_0028_0029"></span>
<span id="index-spd_005fget_005fmessage_005flist_005ffd_0028_0029"></span>

<hr>
<span id="Direct-SSIP-Communication-in-C"></span><div class="header">
<p>
Previous: <a href="#History-Commands-in-C" accesskey="p" rel="prev">History Commands in C</a>, Up: <a href="#C-API" accesskey="u" rel="up">C API</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Direct-SSIP-Communication-in-C-1"></span><h4 class="subsection">4.1.11 Direct SSIP Communication in C</h4>

<p>It might happen that you want to use some SSIP function that is not
available through a library or you may want to use an available
function in a different manner. (If you think there is something
missing in a library or you have some useful comment on the
available functions, please let us know.) For this purpose, there are
a few functions that will allow you to send arbitrary SSIP commands on
your connection and read the replies.
</p>
<dl>
<dt id="index-int-35">C API function: <strong>int</strong> <em>spd_execute_command(SPDConnection* connection, char *command);</em></dt>
<dd><span id="index-spd_005fexecute_005fcommand_0028_0029"></span>

<p>You can send an arbitrary SSIP command specified in the parameter <code>command</code>.
</p>
<p>If the command is successful, the function returns a 0. If there is no such
command or the command failed for some reason, it returns -1.
</p>
<p><code>connection</code> is the SPDConnection* connection created by spd_open().
</p>
<p><code>command</code> is a null terminated string containing a full SSIP command
without the terminating sequence <code>\r\n</code>.
</p>
<p>For example:
</p><div class="example">
<pre class="example">        spd_execute_command(fd, &quot;SET SELF RATE 60&quot;);
        spd_execute_command(fd, &quot;SOUND_ICON bell&quot;);
</pre></div>

<p>It&rsquo;s not possible to use this function for compound commands like <code>SPEAK</code>
where you are receiving more than one reply. If this is your case, please
see &lsquo;spd_send_data()&rsquo;.
</p></dd></dl>

<dl>
<dt id="index-char_002a-1">C API function: <strong>char*</strong> <em>spd_send_data(SPDConnection* connection, const char *message, int wfr);</em></dt>
<dd><span id="index-spd_005fsend_005fdata_0028_0029"></span>

<p>You can send an arbitrary SSIP string specified in the parameter <code>message</code>
and, if specified, wait for the reply. The string can be any SSIP command, but
it can also be textual data or a command parameter.
</p>
<p>If <code>wfr</code> (wait for reply) is set to SPD_WAIT_REPLY, you will receive the reply string
as the return value. If wfr is set to SPD_NO_REPLY, the return value is a NULL pointer.
If wfr is set to SPD_WAIT_REPLY, you should always free the returned string.
</p>
<p><code>connection</code> is the SPDConnection* connection created by spd_open().
</p>
<p><code>message</code> is a null terminated string containing a full SSIP
string.  If this is a complete SSIP command, it must include the full
terminating sequence <code>\r\n</code>.
</p>
<p><code>wfr</code> is either SPD_WAIT_REPLY (integer value of 1) or SPD_NO_REPLY (0).
This specifies if you expect to get a reply on the sent data according to SSIP.
For example, if you are sending ordinary text inside a <code>SPEAK</code> command,
you don&rsquo;t expect to get a reply, but you expect a reply after sending the final
sequence <code>\r\n.\r\n</code>.
</p>
<p>For example (simplified by not checking and freeing the returned strings):
</p><div class="example">
<pre class="example">        spd_send_data(conn, &quot;SPEAK&quot;, SPD_WAIT_REPLY);
        spd_send_data(conn, &quot;Hello world!\n&quot;, SPD_NO_REPLY);
        spd_send_data(conn, &quot;How are you today?!&quot;, SPD_NO_REPLY);
        spd_send_data(conn, &quot;\r\n.\r\n.&quot;, SPD_WAIT_REPLY);
</pre></div>

</dd></dl>


<hr>
<span id="Python-API"></span><div class="header">
<p>
Next: <a href="#Guile-API" accesskey="n" rel="next">Guile API</a>, Previous: <a href="#C-API" accesskey="p" rel="prev">C API</a>, Up: <a href="#Client-Programming" accesskey="u" rel="up">Client Programming</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Python-API-1"></span><h3 class="section">4.2 Python API</h3>

<p>There is a full Python API available in <samp>src/python/speechd/</samp> in
the source tree.  Please see the Python docstrings for full reference
about the available objects and methods.
</p>
<p>Simple Python client:
</p><div class="example">
<pre class="example">import speechd
client = speechd.SSIPClient('test')
client.set_output_module('festival')
client.set_language('en-US')
client.set_punctuation(speechd.PunctuationMode.SOME)
client.speak(&quot;Hello World!&quot;)
client.close()
</pre></div>

<p>The Python API respects the environment variables
<var>SPEECHD_ADDRESS</var> it the communication address is not specified
explicitly (see <code>SSIPClient</code> constructor arguments).
</p>
<p>Implementation of callbacks within the Python API tries to hide the
low level details of SSIP callback handling and provide a convenient
Pythonic interface.  You just pass a callable object (function) to the
<code>speak()</code> method and this function will be called whenever an
event occurs for the corresponding message.
</p>
<p>Callback example:
</p><div class="example">
<pre class="example">import speechd, time
called = []
client = speechd.SSIPClient('callback-test')
client.speak(&quot;Hi!&quot;, callback=lambda cb_type: called.append(cb_type))
time.sleep(2) # Wait for the events to happen.
print &quot;Called callbacks:&quot;, called
client.close()
</pre></div>

<p>Real-world callback functions will most often need some sort of
context information to be able to distinguish for which message the
callback was called.  This can be simply done in Python.  The
following example uses the actual message text as the context
information within the callback function.
</p>
<p>Callback context example:
</p><div class="example">
<pre class="example">import speechd, time

class CallbackExample(object):
    def __init__(self):
        self._client = speechd.SSIPClient('callback-test')

    def speak(self, text):
        def callback(callback_type):
            if callback_type == speechd.CallbackType.BEGIN:
                print &quot;Speech started:&quot;, text
            elif callback_type == speechd.CallbackType.END:
                print &quot;Speech completed:&quot;, text
            elif callback_type == speechd.CallbackType.CANCEL:
                print &quot;Speech interupted:&quot;, text
        self._client.speak(text, callback=callback,
                           event_types=(speechd.CallbackType.BEGIN,
                                        speechd.CallbackType.CANCEL,
                                        speechd.CallbackType.END))

    def go(self):
        self.speak(&quot;Hi!&quot;)
        self.speak(&quot;How are you?&quot;)
        time.sleep(4) # Wait for the events to happen.
        self._client.close()

CallbackExample().go()
</pre></div>

<p><em>Important notice:</em> The callback is called in Speech Dispatcher
listener thread.  No subsequent Speech Dispatcher interaction is
allowed from within the callback invocation.  If you need to do
something more complicated, do it in another thread to prevent
deadlocks in SSIP communication.
</p>
<hr>
<span id="Guile-API"></span><div class="header">
<p>
Next: <a href="#Common-Lisp-API" accesskey="n" rel="next">Common Lisp API</a>, Previous: <a href="#Python-API" accesskey="p" rel="prev">Python API</a>, Up: <a href="#Client-Programming" accesskey="u" rel="up">Client Programming</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Guile-API-1"></span><h3 class="section">4.3 Guile API</h3>

<p>The Guile API can be found <samp>src/guile/</samp> in
the source tree, however it&rsquo;s still considered to be
at the experimental stage. Please read <samp>src/guile/README</samp>.
</p>
<hr>
<span id="Common-Lisp-API"></span><div class="header">
<p>
Next: <a href="#Autospawning" accesskey="n" rel="next">Autospawning</a>, Previous: <a href="#Guile-API" accesskey="p" rel="prev">Guile API</a>, Up: <a href="#Client-Programming" accesskey="u" rel="up">Client Programming</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Common-Lisp-API-1"></span><h3 class="section">4.4 Common Lisp API</h3>

<p>The Common Lisp API can be found <samp>src/cl/</samp> in
the source tree, however it&rsquo;s still considered to be
at the experimental stage. Please read <samp>src/cl/README</samp>.
</p>
<hr>
<span id="Autospawning"></span><div class="header">
<p>
Previous: <a href="#Common-Lisp-API" accesskey="p" rel="prev">Common Lisp API</a>, Up: <a href="#Client-Programming" accesskey="u" rel="up">Client Programming</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Autospawning-1"></span><h3 class="section">4.5 Autospawning</h3>

<p>It is suggested that client libraries offer an autospawn functionality
to automatically start the server process when connecting locally and if
it is not already running. E.g. if the client application starts and
Speech Dispatcher is not running already, the client will start Speech
Dispatcher.
</p>
<p>The library API should provide a possibility to turn this
functionality off, but we suggest to set the default behavior to
autospawn.
</p>
<p>Autospawn is performed by executing Speech Dispatcher with the &ndash;spawn
parameter under the same user and permissions as the client process:
</p>
<div class="example">
<pre class="example">speech-dispatcher --spawn
</pre></div>

<p>With the <code>--spawn</code> parameter, the process will start and return
with an exit code of 0 only if a) it is not already running (pidfile
check) b) the server doesn&rsquo;t have autospawn disabled in its
configuration c) no other error preventing the start
occurs. Otherwise, Speech Dispatcher is not started and the error code
of 1 is returned.
</p>
<p>The client library should redirect its stdout and stderr outputs
either to nowhere or to its logging system. It should subsequently
completely detach from the newly spawned process.
</p>
<p>Due to a bug in Speech Dispatcher, it is currently necessary to
include a wait statement after the autospawn for about 0.5 seconds
before attempting a connection.
</p>
<p>Please see how autospawn is implemented in the C API and in the Python
API for an example.
</p>
<hr>
<span id="Server-Programming"></span><div class="header">
<p>
Next: <a href="#Download-and-Contact" accesskey="n" rel="next">Download and Contact</a>, Previous: <a href="#Client-Programming" accesskey="p" rel="prev">Client Programming</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Server-Programming-1"></span><h2 class="chapter">5 Server Programming</h2>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#Server-Core" accesskey="1">Server Core</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Internal structure and functionality overview.
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Output-Modules" accesskey="2">Output Modules</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Plugins for various speech synthesizers.
</td></tr>
</table>

<hr>
<span id="Server-Core"></span><div class="header">
<p>
Next: <a href="#Output-Modules" accesskey="n" rel="next">Output Modules</a>, Previous: <a href="#Server-Programming" accesskey="p" rel="prev">Server Programming</a>, Up: <a href="#Server-Programming" accesskey="u" rel="up">Server Programming</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Server-Core-1"></span><h3 class="section">5.1 Server Core</h3>

<p>The main documentation for the server core is the code itself. This section
is only a general introduction intended to give you some basic information
and hints where to look for things. If you are going to make some modifications
in the server core, we will be happy if you get in touch with us on
<a href="mailto:speechd-discuss@nongnu.org">speechd-discuss@nongnu.org</a>.
</p>
<p>The server core is composed of two main parts, each of them implemented
in a separate thread. The <em>server part</em> handles the communication
with clients and, with the desired configuration options, stores the messages
in the priority queue. The <em>speaking part</em> takes care of
communicating with the output modules, pulls messages out of the priority
queue at the correct time and sends them to the appropriate synthesizer.
</p>
<p>Synchronization between these two parts is done by thread mutexes.
Additionally, synchronization of the speaking part from both sides
(server part, output modules) is done via a SYSV/IPC semaphore.
</p>
<span id="Server-part"></span><h4 class="subheading">Server part</h4>

<p>After switching to the daemon mode (if required), it reads configuration
files and initializes the speaking part. Then it opens the socket
and waits for incoming data. This is implemented mainly in
<samp>src/server/speechd.c</samp> and <samp>src/server/server.c</samp>.
</p>
<p>There are three types of events: new client connects to speechd,
old client disconnects, or a client sends some data. In the third
case, the data is passed to the <code>parse()</code> function defined
in <samp>src/server/parse.c</samp>.
</p>
<p>If the incoming data is a new message, it&rsquo;s stored in a
queue according to its priority. If it is SSIP
commands, it&rsquo;s handled by the appropriate handlers.
Handling of the <code>SET</code> family of commands can be found
in <samp>src/server/set.c</samp> and <code>HISTORY</code> commands are
processed in <samp>src/server/history.c</samp>.
</p>
<p>All reply messages of SSIP are defined in <samp>src/server/msg.h</samp>.
</p>
<span id="Speaking-part"></span><h4 class="subheading">Speaking part</h4>

<p>This thread, the function <code>speak()</code> defined in
<samp>src/server/speaking.c</samp>, is created from the server part process
shortly after initialization. Then it enters an infinite loop and
waits on a SYSV/IPC semaphore until one of the following actions
happen:
</p>
<ul>
<li> The server adds a new message to the queue of messages waiting
to be said.
</li><li> The currently active output module signals that the message
that was being spoken is done.
</li><li> Pause or resume is requested.
</li></ul>

<p>After handling the rest of the priority interaction (like actions
needed to repeat the last priority progress message) it decides
which action should be performed. Usually it&rsquo;s picking up
a message from the queue and sending it to the desired output
module (synthesizer), but sometimes it&rsquo;s handling the pause
or resume requests, and sometimes it&rsquo;s doing nothing.
</p>
<p>As said before, this is the part of Speech Dispatcher that
talks to the output modules. It does so by using the output
interface defined in <samp>src/server/output.c</samp>.
</p>
<hr>
<span id="Output-Modules"></span><div class="header">
<p>
Previous: <a href="#Server-Core" accesskey="p" rel="prev">Server Core</a>, Up: <a href="#Server-Programming" accesskey="u" rel="up">Server Programming</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Output-Modules-1"></span><h3 class="section">5.2 Output Modules</h3>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#Basic-Structure" accesskey="1">Basic Structure</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">The definition of an output module.
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Communication-Protocol-for-Output-Modules" accesskey="2">Communication Protocol for Output Modules</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#How-to-Write-New-Output-Module" accesskey="3">How to Write New Output Module</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How to include support for new synthesizers
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#The-Skeleton-of-an-Output-Module" accesskey="4">The Skeleton of an Output Module</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Output-Module-Functions" accesskey="5">Output Module Functions</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Module-Utils-Functions-and-Macros" accesskey="6">Module Utils Functions and Macros</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Index-Marks-in-Output-Modules" accesskey="7">Index Marks in Output Modules</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<span id="Basic-Structure"></span><div class="header">
<p>
Next: <a href="#Communication-Protocol-for-Output-Modules" accesskey="n" rel="next">Communication Protocol for Output Modules</a>, Previous: <a href="#Output-Modules" accesskey="p" rel="prev">Output Modules</a>, Up: <a href="#Output-Modules" accesskey="u" rel="up">Output Modules</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Basic-Structure-1"></span><h4 class="subsection">5.2.1 Basic Structure</h4>

<p>Speech Dispatcher output modules are independent applications that,
using a simple common communication protocol, read commands from
standard input and then output replies on standard output,
communicating the requests to the particular software or hardware
synthesizer. Everything the output module writes on standard output
or reads from standard input should conform to the specifications
of the communication protocol. Additionally, standard error output
is used for logging of the modules.
</p>
<p>Output module binaries are usually located in
<samp>bin/speechd-modules/</samp> and are loaded automatically when Speech
Dispatcher starts, according to configuration.  Their standard
input/output/error output is redirected to a pipe to Speech Dispatcher
and this way both sides can communicate.
</p>
<p>When the modules start, they are passed the name of a configuration file
that should be used for this particular output module.
</p>
<p>Each output module is started by Speech Dispatcher as:
</p>
<div class="example">
<pre class="example">my_module &quot;configfile&quot;
</pre></div>

<p>where <code>configfile</code> is the full path to the desired configuration
file that the output module should parse.
</p>
<hr>
<span id="Communication-Protocol-for-Output-Modules"></span><div class="header">
<p>
Next: <a href="#How-to-Write-New-Output-Module" accesskey="n" rel="next">How to Write New Output Module</a>, Previous: <a href="#Basic-Structure" accesskey="p" rel="prev">Basic Structure</a>, Up: <a href="#Output-Modules" accesskey="u" rel="up">Output Modules</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Communication-Protocol-for-Output-Modules-1"></span><h4 class="subsection">5.2.2 Communication Protocol for Output Modules</h4>

<p>The protocol by which the output modules communicate on standard
input/output is based on <a href="ssip.html#Top">SSIP</a> in <cite>SSIP
Documentation</cite>, although it is highly simplified and a little bit
modified for the different purpose here. Another difference
is that event notification is obligatory in modules communication,
while in SSIP, this is an optional feature. This is because Speech
Dispatcher has to know all the events happening in the output modules
for the purpose of synchronization of various messages.
</p>
<p>Since it&rsquo;s very similar to SSIP, <a href="ssip.html#Top">General Rules</a> in <cite>SSIP
Documentation</cite>, for a general description of what the protocol looks
like. One of the exceptions is that since the output modules
communicate on standard input/output, we use only <code>LF</code> as the
line separator.
</p>
<p>The return values are:
</p><ul>
<li> 2xx         OK
</li><li> 3xx         CLIENT ERROR or BAD SYNTAX or INVALID VALUE
</li><li> 4xx         OUTPUT MODULE ERROR or INTERNAL ERROR

</li><li> 700         EVENT INDEX MARK
</li><li> 701         EVENT BEGIN
</li><li> 702         EVENT END
</li><li> 703         EVENT STOP
</li><li> 704         EVENT PAUSE
</li></ul>

<dl compact="compact">
<dt><code>SPEAK</code></dt>
<dd><p>Start receiving a text message in the SSML format and synthesize it.
After sending a reply to the command, output module waits for the text
of the message.  The text can spread over any number of lines and is
finished by an end of line marker followed by the line containing the
single character <code>.</code> (dot).  Thus the complete character sequence
closing the input text is <code>LF . LF</code>.  If any line within the sent
text contains only a dot, an extra dot should be prepended before it.
</p>
<p>During reception of the text message, output module doesn&rsquo;t send a
response to the particular lines sent.  The response line is sent only
immediately after the <code>SPEAK</code> command and after receiving the
closing dot line. This doesn&rsquo;t provide any means of synchronization,
instead, event notification is used for this purpose.
</p>
<p>There is no explicit upper limit on the size of the text.
</p>
<p>If the <code>SPEAK</code> command is received while the output module
is already speaking, it is considered an error.
</p>
<p>Example:
</p><div class="example">
<pre class="example">SPEAK
202 OK SEND DATA
&lt;speak&gt;
Hello, GNU!
&lt;/speak&gt;
.
200 OK SPEAKING
</pre></div>

<p>After receiving the full text (or the first part of it), the output
module is supposed to start synthesizing it and take care of
delivering it to an audio device. When (or just before) the first
synthesized samples are delivered to the audio and start playing, the
output module must send the <code>BEGIN</code> event over the communication
socket to Speech Dispatcher, See <a href="#Events-notification-and-index-marking">Events notification and index marking</a>. After the audio stops playing, the event <code>STOP</code>,
<code>PAUSE</code> or <code>END</code> must be delivered to Speech
Dispatcher. Additionally, if supported by the given synthesizer, the
output module can issue events associated with the included SSML index
marks when they are reached in the audio output.
</p>
</dd>
<dt><code>CHAR</code></dt>
<dd><p>Synthesize a character. If the synthesizer supports a different behavior
for the event of &ldquo;character&rdquo;, this should be used.
</p>
<p>It works like the command <code>SPEAK</code> above, except that the argument
has to be exactly one line long. It contains the UTF-8 form of exactly
one character.
</p>
</dd>
<dt><code>KEY</code></dt>
<dd><p>Synthesize a key name. If the synthesizer supports a different behavior
for the event of &ldquo;key name&rdquo;, this should be used.
</p>
<p>It works like the command <code>SPEAK</code> above, except that the argument
has to be exactly one line long. See <a href="ssip.html#Top">SSIP KEY</a> in <cite>SSIP
Documentation</cite>, for the description of the allowed arguments.
</p>
</dd>
<dt><code>SOUND_ICON</code></dt>
<dd><p>Produce a sound icon. According to the configuration of the particular
synthesizer, this can produce either a sound (e.g. .wav) or synthesize
some text.
</p>
<p>It works like the command <code>SPEAK</code> above, except that the argument
has to be exactly one line long. It contains the symbolic name of the
icon that should be said. See <a href="ssip.html#Top">SSIP SOUND_ICON</a> in <cite>SSIP
Documentation</cite>, for more detailed description of the sound icons
mechanism.
</p>
</dd>
<dt><code>STOP</code></dt>
<dd><p>Immediately stop speaking on the output device and cancel synthesizing
the current message so that the output module is prepared to receive a
new message. If there is currently no message being synthesized, it is
not considered an error to call <code>STOP</code> anyway.
</p>
<p>This command is asynchronous. The output module is not supposed to
send any reply (not even error reply).
</p>
<p>It should return immediately, although stopping the synthesizer may
require a little bit more time. The module must issue one of the events
<code>STOPPED</code> or <code>END</code> when the module is finally
stopped. <code>END</code> is issued when the playing stopped by itself
before the module could terminate it or if the architecture of the
output module doesn&rsquo;t allow it to decide, otherwise <code>STOPPED</code>
should be used.
</p>
<div class="example">
<pre class="example">STOP
</pre></div>

</dd>
<dt><code>PAUSE</code></dt>
<dd><p>Stop speaking the current message at a place where we can exactly
determine the position (preferably after a <code>__spd_</code> index mark).  This
doesn&rsquo;t have to be immediate and can be delayed even for a few
seconds. (Knowing the position exactly is important so that we can
later continue the message without gaps or overlapping.) It doesn&rsquo;t do
anything else (like storing the message etc.).
</p>
<p>This command is asynchronous. The output module is not supposed to
send any reply (not even error reply).
</p>
<p>For example:
</p><div class="example">
<pre class="example">PAUSE
</pre></div>

</dd>
<dt><code>SET</code></dt>
<dd><p>Set one of several speech parameters for the future messages.
</p>
<p>Each of the parameters is written on a single line in the form
</p><div class="example">
<pre class="example">name=value
</pre></div>
<p>where <code>value</code> can be either a number or a string, depending upon
the name of the parameter.
</p>
<p>The <code>SET</code> environment is terminated by a dot on a single line.
Thus the complete character sequence closing the input text is
<code>LF . LF</code>
</p>
<p>During reception of the settings, output module doesn&rsquo;t send any
response to the particular lines sent.  The response line is sent only
immediately after the <code>SET</code> command and after receiving the
closing dot line.
</p>
<p>The available parameters that accept numerical values are <code>rate</code>,
<code>pitch</code> and <code>pitch_range</code>.
</p>
<p>The available parameters that accept string values are
<code>punctuation_mode</code>, <code>spelling_mode</code>, <code>cap_let_recogn</code>,
<code>voice</code>, and <code>language</code>.  The arguments are the same as for the
corresponding SSIP commands, except that they are written with small
letters. See <a href="ssip.html#Top">Parameter Setting Commands</a> in <cite>SSIP
Documentation</cite>.  The conversion between these string values and the
corresponding C enum variables can be easily done using
<samp>src/common/fdsetconv.c</samp>.
</p>
<p>Not all of these parameters must be set and the value of the string
arguments can also be <code>NULL</code>. If some of the parameters aren&rsquo;t
set, the output module should use its default.
</p>
<p>It&rsquo;s not necessary to set these parameters on the synthesizer right
away, instead, it can be postponed until some message to be spoken arrives.
</p>
<p>Here is an example:
</p><div class="example">
<pre class="example">SET
203 OK RECEIVING SETTINGS
rate=20
pitch=-10
pitch_range=50
punctuation_mode=all
spelling_mode=on
punctuation_some=NULL
.
203 OK SETTINGS RECEIVED
</pre></div>

</dd>
<dt><code>AUDIO</code></dt>
<dd><p>Audio has exactly the same structure as <code>SET</code>, but is transmitted
only once immediatelly after <code>INIT</code> to transmit the requested audio
parameters and tell the output module to open the audio device.
</p>
</dd>
<dt><code>QUIT</code></dt>
<dd><p>Terminates the output module. It should send the response, deallocate
all the resources, close all descriptors, terminate all child
processes etc. Then the output module should exit itself.
</p>
<div class="example">
<pre class="example">QUIT
210 OK QUIT
</pre></div>
</dd>
</dl>

<span id="Events-notification-and-index-marking-1"></span><h4 class="subsubsection">5.2.2.1 Events notification and index marking</h4>
<span id="Events-notification-and-index-marking"></span>
<p>Each output module must take care of sending asynchronous
notifications whenever the synthesizer (or the module) starts or stops
output audio on the speakers. Additionally, whenever possible, the
output module should report back to Speech Dispatcher index marks
found in the incoming SSML text whenever they are reached while
speaking. See SSML specifications for more details about the
<code>mark</code> element
</p>
<p>Event and index mark notifications are reported by simply writing them
to the standard output. An event notification must never get in
between synchronous commands (those which require a reply) and their
reply. Before Speech Dispatcher sends any new requests (like
<code>SET</code>, <code>SPEAK</code> etc.) it waits for the previous request to be
terminated by the output module by signalling <code>STOP</code>, <code>END</code>
or <code>PAUSE</code> index marks. So the only thing the output module must
ensure in order to satisfy this requirement is that it doesn&rsquo;t send
any index marks until it acknowledges the receival of the new message
via <code>200 OK SPEAKING</code>. It must also ensure that index marks
written to the pipe are well ordered &ndash; of course it doesn&rsquo;t make any
sense and it is an error to send any index marks after <code>STOP</code>,
<code>END</code> or <code>PAUSE</code> is sent.
</p>

<dl compact="compact">
<dt><code>BEGIN</code></dt>
<dd>
<p>This event must be issued whenever the module starts to speak the
given message. If this is not possible, it can issue it when it
starts to synthesize the message or when it receives the message.
</p>
<p>It is prepended by the code <code>701</code> and takes the form
</p>
<div class="example">
<pre class="example">701 BEGIN
</pre></div>

</dd>
<dt><code>END</code></dt>
<dd>
<p>This event must be issued whenever the module terminates speaking the
given message because it reached its end. If this is not possible, it
can issue this event when it is ready to receive a new message after
speaking the previous message.
</p>
<p>Each <code>END</code> must always be preceeded (possibly not directly) by a
<code>BEGIN</code>.
</p>
<p>It is prepended by the code <code>702</code> and takes the form
</p>
<div class="example">
<pre class="example">702 END
</pre></div>

</dd>
<dt><code>STOP</code></dt>
<dd>
<p>This event should be issued whenever the module terminates speaking
the given message without reaching its end (as a consequence of
receiving the STOP command or because of some error) not because of
a <code>PAUSE</code> command. When the synthesizer in use doesn&rsquo;t allow
the module to decide, the event <code>END</code> can be used instead.
</p>
<p>Each <code>STOP</code> must always be preceeded (possibly not directly) by a
<code>BEGIN</code>.
</p>
<p>It is prepended by the code <code>703</code> and takes the form
</p>
<div class="example">
<pre class="example">703 STOP
</pre></div>

</dd>
<dt><code>PAUSE</code></dt>
<dd>
<p>This event should be issued whenever the module terminates speaking
the given message without reaching its end because of receiving the
<code>PAUSE</code> command.
</p>
<p>Each <code>PAUSE</code> must always be preceeded (possibly not directly) by a
<code>BEGIN</code>.
</p>
<p>It is prepended by the code <code>704</code> and takes the form
</p>
<div class="example">
<pre class="example">704 PAUSE
</pre></div>

</dd>
<dt><code>INDEX MARK</code></dt>
<dd>
<p>This event should be issued by the output module (if supported)
whenever an index mark (SSML tag <code>&lt;mark/&gt;</code>) is passed while speaking
a message. It is preceeded by the code <code>700</code> and takes the form
</p>
<div class="example">
<pre class="example">700-name
700 INDEX MARK
</pre></div>

<p>where <code>name</code> is the value of the SSML attribute <code>name</code> in
the tag <code>&lt;mark/&gt;</code>.
</p>
</dd>
</dl>

<hr>
<span id="How-to-Write-New-Output-Module"></span><div class="header">
<p>
Next: <a href="#The-Skeleton-of-an-Output-Module" accesskey="n" rel="next">The Skeleton of an Output Module</a>, Previous: <a href="#Communication-Protocol-for-Output-Modules" accesskey="p" rel="prev">Communication Protocol for Output Modules</a>, Up: <a href="#Output-Modules" accesskey="u" rel="up">Output Modules</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="How-to-Write-New-Output-Module-1"></span><h4 class="subsection">5.2.3 How to Write New Output Module</h4>

<p>If you want to write your own output module, there are basically two
ways to do it. Either you can program it all yourself, which is fine
as long as you stick to the definition of an output module and its
communication protocol, or you can use our <samp>module_*.c</samp> tools.
If you use these tools, you will only have to write the core functions
like module_speak() and module_stop etc. and you will not have to
worry about the communication protocol and other formal things that
are common for all modules. Here is how you can do it using the
provided tools.
</p>
<p>We will recommend here a basic structure of the code for an output
module you should follow, although it&rsquo;s perfectly ok to establish your
own if you have reasons to do so, if all the necessary functions and
data are defined somewhere in the file. For this purpose, we will use
examples from the output module for Flite (Festival Lite), so it&rsquo;s
recommended to keep looking at <code>flite.c</code> for reference.
</p>
<p>A few rules you should respect:
</p><ul>
<li> The <samp>module_*.c</samp> files should be included at the specified place and
in the specified order, because they include directly some pieces of the
code and won&rsquo;t work in other places.
</li><li> If one or more new threads are used in the output module, they must block all signals.
</li><li> On module_close(), all lateral threads and processes should be terminated,
all memory freed. Don&rsquo;t assume module_close() is always called before exit()
and the sources will be freed automatically.
</li><li> We will be happy if all the copyrights are assigned to Brailcom, o.p.s.
in order for us to be in a better legal position against possible intruders.
</li></ul>

<hr>
<span id="The-Skeleton-of-an-Output-Module"></span><div class="header">
<p>
Next: <a href="#Output-Module-Functions" accesskey="n" rel="next">Output Module Functions</a>, Previous: <a href="#How-to-Write-New-Output-Module" accesskey="p" rel="prev">How to Write New Output Module</a>, Up: <a href="#Output-Modules" accesskey="u" rel="up">Output Modules</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="The-Skeleton-of-an-Output-Module-1"></span><h4 class="subsection">5.2.4 The Skeleton of an Output Module</h4>

<p>Each output module should include <samp>module_utils.h</samp> where the
SPDMsgSettings structure is defined to be able to handle the different
speech synthesis settings.  This file also provides tools which help
with writing output modules and making the code simpler.
</p>
<div class="example">
<pre class="example">#include &quot;module_utils.h&quot;
</pre></div>

<p>If your plugin needs the audio tools (if you take
care of the output to the soundcard instead of the synthesizer),
you also have to include <samp>spd_audio.h</samp>
</p>
<div class="example">
<pre class="example">#include &quot;spd_audio.h&quot;
</pre></div>

<p>The definition of macros <code>MODULE_NAME</code> and <code>MODULE_VERSION</code>
should follow:
</p>
<div class="example">
<pre class="example">#define MODULE_NAME     &quot;flite&quot;
#define MODULE_VERSION  &quot;0.1&quot;
</pre></div>

<p>If you want to use the <code>DBG(message)</code> macro from <samp>module_utils.c</samp>
to print out debugging messages, you should insert these two lines. (Please
don&rsquo;t use printf for debugging, this doesn&rsquo;t work with multiple processes!)
(You will later have to actually start debugging in <code>module_init()</code>)
</p>
<div class="example">
<pre class="example">DECLARE_DEBUG();
</pre></div>

<p>You don&rsquo;t have to define the prototypes of the core functions
like module_speak() and module_stop(), these are already
defined in <samp>module_utils.h</samp>
</p>
<p>Optionally, if your output module requires some special configuration,
apart from defining voices and configuring debugging (they are handled
differently, see below), you can declare the requested option
here. It will expand into a dotconf callback and declaration of the
variable.
</p>
<p>(You will later have to actually register these options for
Speech Dispatcher in <code>module_load()</code>)
</p>
<p>There are currently 4 types of possible configuration options:
</p>
<ul>
<li> <code>MOD_OPTION_1_INT(name);   /* Set up `int name' */</code>
</li><li> <code>MOD_OPTION_1_STR(name);   /* Set up `char* name' */</code>
</li><li> <code>MOD_OPTION_2(name);       /* Set up `char *name[2]' */</code>
</li><li> <code>MOD_OPTION_{2,3}_HT(name);  /* Set up a hash table */</code>
</li></ul>

<p>See <a href="#Output-Modules-Configuration">Output Modules Configuration</a>.
</p>
<p>For example Flite uses 2 options:
</p><div class="example">
<pre class="example">MOD_OPTION_1_INT(FliteMaxChunkLength);
MOD_OPTION_1_STR(FliteDelimiters);
</pre></div>

<p>Every output module is started in 2 phases: <em>loading</em> and
<em>initialization</em>.
</p>
<p>The goal of loading is to initialize empty structures for storing
settings and declare the DotConf callbacks for parsing configuration
files. In the second phase, initialization, all the configuration has
been read and the output module can accomplish the rest (check if
the synthesizer works, set up threads etc.).
</p>
<p>You should start with the definition of <code>module_load()</code>.
</p>
<div class="example">
<pre class="example">int
module_load(void)
{
</pre></div>

<p>Then you should initialize the settings tables. These are defined in
<samp>module_utils.h</samp> and will be used to store the settings received
by the <code>SET</code> command.
</p><div class="example">
<pre class="example">    INIT_SETTINGS_TABLES();
</pre></div>

<p>Also, define the configuration callbacks for debugging if you use
the <code>DBG()</code> macro.
</p>
<div class="example">
<pre class="example">    REGISTER_DEBUG();
</pre></div>

<p>Now you can finally register the options for the configuration file
parsing. Just use these macros:
</p><ul>
<li> MOD_OPTION_1_INT_REG(name, default);  /* for integer parameters */
        </li><li> MOD_OPTION_1_STR_REG(name, default);  /* for string parameters */
        </li><li> MOD_OPTION_MORE_REG(name);   /* for an array of strings */
        </li><li> MOD_OPTION_HT_REG(name);     /* for hash tables */
</li></ul>

<p>Again, an example from Flite:
</p><div class="example">
<pre class="example">    MOD_OPTION_1_INT_REG(FliteMaxChunkLength, 300);
    MOD_OPTION_1_STR_REG(FliteDelimiters, &quot;.&quot;);
</pre></div>

<p>If you want to enable the mechanism for setting
voices through AddVoice, use this function (for
an example see <code>generic.c</code>):
</p>
<p>Example from Festival:
</p><div class="example">
<pre class="example">    module_register_settings_voices();
</pre></div>

<p>See <a href="#Output-Modules-Configuration">Output Modules Configuration</a>.
</p>
<p>If everything went correctly, the function should return 0, otherwise -1.
</p>
<div class="example">
<pre class="example">    return 0;
}
</pre></div>

<p>The second phase of starting an output module is handled by:
</p>
<div class="example">
<pre class="example">int
module_init(void)
{
</pre></div>

<p>If you use the DBG() macro, you should init debugging on the start
of this function. From that moment on, you can use DBG(). Apart from that,
the body of this function is entirely up to you. You should do all the
necessary initialization of the particular synthesizer.  All declared
configuration variables and configuration hash tables, together with
the definition of voices, are filled with their values (either default
or read from configuration), so you can use them already.
</p>
<div class="example">
<pre class="example">   INIT_DEBUG();
   DBG(&quot;FliteMaxChunkLength = %d\n&quot;, FliteMaxChunkLength);
   DBG(&quot;FliteDelimiters = %s\n&quot;, FliteDelimiters);
</pre></div>

<p>This function should return 0 if the module was initialized
successfully, or -1 if some failure was encountered. In this case, you
should clean up everything, cancel threads, deallocate memory etc.; no
more functions of this output module will be touched (except for other
tries to load and initialize the module).
</p>
<p>Example from Flite:
</p>
<div class="example">
<pre class="example">    /* Init flite and register a new voice */
    flite_init();
    flite_voice = register_cmu_us_kal();

    if (flite_voice == NULL){
        DBG(&quot;Couldn't register the basic kal voice.\n&quot;);
        return -1;
    }
    [...]
</pre></div>

<p>The third part is opening the audio. This is commanded
by the <code>AUDIO</code> protocol command. If the synthesizer is able
to retrieve audio data, it is desirable to open the <code>spd_audio</code>
output according to the requested parameters and then use this
method for audio output. Audio initialization can be done as
follows:
</p>
<div class="example">
<pre class="example">int
module_audio_init(char **status_info){
  DBG(&quot;Opening audio&quot;);
  return module_audio_init_spd(status_info);
}
</pre></div>

<p>If it is impossible to retrieve audio from the synthesizer and
the synthesizer itself is used for playback, than the module must
still contain this function, but it should just return 0 and
do nothing.
</p>
<p>Now you have to define all the synthesis control functions
<code>module_speak</code>, <code>module_stop</code> etc.  See <a href="#Output-Module-Functions">Output Module Functions</a>.
</p>
<p>At the end, this simple include provides the main() function and all
the functionality related to being an output module of Speech
Dispatcher (parsing argv[] parameters, communicating on stdin/stdout,
...). It&rsquo;s recommended to study this file carefully and try to
understand what exactly it does, as it will be part of the source code
of your output module.
</p>
<div class="example">
<pre class="example">#include &quot;module_main.c&quot;
</pre></div>

<p>If it doesn&rsquo;t work, it&rsquo;s most likely not your fault. Complain!  This
manual is not complete and the instructions in this sections aren&rsquo;t
either. Get in touch with us and together we can figure out what&rsquo;s
wrong, fix it and then warn others in this manual.
</p>
<hr>
<span id="Output-Module-Functions"></span><div class="header">
<p>
Next: <a href="#Module-Utils-Functions-and-Macros" accesskey="n" rel="next">Module Utils Functions and Macros</a>, Previous: <a href="#The-Skeleton-of-an-Output-Module" accesskey="p" rel="prev">The Skeleton of an Output Module</a>, Up: <a href="#Output-Modules" accesskey="u" rel="up">Output Modules</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Output-Module-Functions-1"></span><h4 class="subsection">5.2.5 Output Module Functions</h4>

<dl>
<dt id="index-int-36">Output Module Functions: <strong>int</strong> <em>module_speak (char *data, size_t bytes, EMessageType msgtype)</em></dt>
<dd><span id="index-module_005fspeak_0028_0029"></span>

<p>This is the function where the actual speech output is produced. It is
called every time Speech Dispatcher decides to send a message to
synthesis. The data of length <var>bytes</var> are passed in
a NULL terminated string <var>data</var>.  The argument <var>msgtype</var>
defines what type of message it is (different types should be handled
differently, if the synthesizer supports it).
</p>
<p>Each output module should take care of setting the output device to
the parameters from msg_settings (defined in module_utils.h) (See
SPDMsgSettings in <samp>module_utils.h</samp>). However, it is not an error if
some of these values are ignored. At least rate, pitch and language
should be set correctly.
</p>
<p>Speed and pitch are values between -100 and 100 included. 0 is the default
value that represents normal speech flow. So -100 is the slowest (or lowest)
and +100 is the fastest (or highest) speech.
</p>
<p>The language parameter is given as a null-terminated string containing
the name of the language according to RFC 1766 (en, cs, fr, en-US, ...). If the
requested language is not supported by this synthesizer, it&rsquo;s ok to abort
and return 0, because that&rsquo;s an error in user settings.
</p>
<p>An easy way to set the parameters is using the UPDATE_PARAMETER() and
UPDATE_STRING_PARAMETER() macros. See <a href="#Module-Utils-Functions-and-Macros">Module Utils Functions and Macros</a>.
</p>
<p>Example from festival:
</p><div class="example">
<pre class="example">    UPDATE_STRING_PARAMETER(language, festival_set_language);
    UPDATE_PARAMETER(voice, festival_set_voice);
    UPDATE_PARAMETER(rate, festival_set_rate);
    UPDATE_PARAMETER(pitch, festival_set_pitch);
    UPDATE_PARAMETER(punctuation_mode, festival_set_punctuation_mode);
    UPDATE_PARAMETER(cap_let_recogn, festival_set_cap_let_recogn);
</pre></div>

<p>This function should return 0 if it fails and 1 if the delivery
to the synthesizer is successful. It should return immediately,
because otherwise, it would block stopping, priority handling
and other important things in Speech Dispatcher.
</p>
<p>If there is a need to stay longer, you should create a separate thread
or process. This is for example the case of some software synthesizers
which use a blocking function (eg. spd_audio_play) or hardware devices
that have to send data to output modules at some particular
speed. Note that if you use threads for this purpose, you have to set
them to ignore all signals. The simplest way to do this is to call
<code>set_speaking_thread_parameters()</code> which is defined in
module_utils.c.  Call it at the beginning of the thread code.
</p></dd></dl>

<dl>
<dt id="index-int-module_005fstop">Output module function: <strong>int module_stop</strong> <em>(void)</em></dt>
<dd><span id="index-module_005fstop_0028_0029"></span>

<p>This function should stop the synthesis of the currently spoken message
immediately and throw away the rest of the message.
</p>
<p>This function should return immediately.  Speech Dispatcher will
not send another command until module_report_event_stop() is called.
Note that you cannot call module_report_event_stop() from within
the call to module_stop().  The best thing to do is emit
the stop event from another thread.
</p>
<p>It should return 0 on success, -1 otherwise.
</p></dd></dl>

<dl>
<dt id="index-size_005ft-module_005fpause">Output module function: <strong>size_t module_pause</strong> <em>(void)</em></dt>
<dd><span id="index-module_005fpause_0028_0029"></span>

<p>This function should stop speaking on the synthesizer (or sending
data to soundcard) just after sending an <code>__spd_</code> index
mark so that Speech Dispatcher knows the position of stop.
</p>
<p>The pause can wait for a short time until
an index mark is reached. However, if it&rsquo;s not possible to determine
the exact position, this function should have the same effect
as <code>module_stop</code>.
</p>
<p>This function should return immediately.  Speech Dispatcher will
not send another command until module_report_event_pause() is called.
Note that you cannot call module_report_event_pause() from within
the call to module_pause().  The best thing to do is emit
the pause event from another thread.
</p>
<p>For some software synthesizers, the desired effect can be archieved in this way:
When <code>module_speak()</code> is called, you execute a separate
process and pass it the requested message. This process
cuts the message into sentences and then runs in a loop
and sends the pieces to synthesis. If a signal arrives
from <code>module_pause()</code>, you set a flag and stop the loop
at the point where next piece of text would be synthesized.
</p>
<p>It&rsquo;s not an error if this function is called when the device
is not speaking. In this case, it should return 0.
</p>
<p>Note there is no module_resume() function.  The semantics of
<code>module_pause()</code> is the same as <code>module_stop()</code> except that
your module should stop after reaching a <code>__spd_</code> index mark.
Just like <code>module_stop()</code>, it should discard the rest of the
message after pausing.  On the next <code>module_speak()</code> call,
Speech Dispatcher will resend the rest of the message after the
index mark.
</p></dd></dl>


<hr>
<span id="Module-Utils-Functions-and-Macros"></span><div class="header">
<p>
Next: <a href="#Index-Marks-in-Output-Modules" accesskey="n" rel="next">Index Marks in Output Modules</a>, Previous: <a href="#Output-Module-Functions" accesskey="p" rel="prev">Output Module Functions</a>, Up: <a href="#Output-Modules" accesskey="u" rel="up">Output Modules</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Module-Utils-Functions-and-Macros-1"></span><h4 class="subsection">5.2.6 Module Utils Functions and Macros</h4>

<p>This section describes the various variables, functions and macros
that are available in the <samp>module_utils.h</samp> file. They are
intended to make writing new output modules easier and allow the
programmer to reuse existing pieces of code instead of writing
everything from scratch.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="#Initialization-Macros-and-Functions" accesskey="1">Initialization Macros and Functions</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Generic-Macros-and-Functions" accesskey="2">Generic Macros and Functions</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Functions-used-by-module_005fmain_002ec" accesskey="3">Functions used by module_main.c</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Functions-for-use-when-talking-to-synthesizer" accesskey="4">Functions for use when talking to synthesizer</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Multi_002dprocess-output-modules" accesskey="5">Multi-process output modules</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="#Memory-Handling-Functions" accesskey="6">Memory Handling Functions</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr>
<span id="Initialization-Macros-and-Functions"></span><div class="header">
<p>
Next: <a href="#Generic-Macros-and-Functions" accesskey="n" rel="next">Generic Macros and Functions</a>, Previous: <a href="#Module-Utils-Functions-and-Macros" accesskey="p" rel="prev">Module Utils Functions and Macros</a>, Up: <a href="#Module-Utils-Functions-and-Macros" accesskey="u" rel="up">Module Utils Functions and Macros</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Initialization-Macros-and-Functions-1"></span><h4 class="subsubsection">5.2.6.1 Initialization Macros and Functions</h4>

<dl>
<dt id="index-INIT_005fSETTINGS_005fTABLES">Module Utils macro: <strong>INIT_SETTINGS_TABLES</strong> <em>()</em></dt>
<dd><span id="index-INIT_005fSETTINGS_005fTABLES-1"></span>
<p>This macro initializes the settings tables where the parameters
received with the <code>SET</code> command are stored. You must call
this macro if you want to use the <code>UPDATE_PARAMETER()</code>
and <code>UPDATE_STRING_PARAMETER()</code> macros.
</p>
<p>It is intended to be called from inside a function just
after the output module starts.
</p></dd></dl>

<span id="Debugging-Macros"></span><h4 class="subsubsection">5.2.6.2 Debugging Macros</h4>
<dl>
<dt id="index-DBG">Module Utils macro: <strong>DBG</strong> <em>(format, ...)</em></dt>
<dd><span id="index-DBG-1"></span>
<p>DBG() outputs a debugging message, if the <code>Debug</code> option in module&rsquo;s
configuration is set, to the file specified in configuration ad
<code>DebugFile</code>. The parameter syntax is the same as for the printf()
function. In fact, it calls printf() internally.
</p></dd></dl>

<dl>
<dt id="index-FATAL">Module Utils macro: <strong>FATAL</strong> <em>(text)</em></dt>
<dd><span id="index-FATAL-1"></span>
<p>Outputs a message specified as <code>text</code> and calls exit() with
the value EXIT_FAILURE. This terminates the whole output module
without trying to kill the child processes or freeing other
resources other than those that will be freed by the system.
</p>
<p>It is intended to be used after some severe error has occurred.
</p></dd></dl>

<hr>
<span id="Generic-Macros-and-Functions"></span><div class="header">
<p>
Next: <a href="#Functions-used-by-module_005fmain_002ec" accesskey="n" rel="next">Functions used by module_main.c</a>, Previous: <a href="#Initialization-Macros-and-Functions" accesskey="p" rel="prev">Initialization Macros and Functions</a>, Up: <a href="#Module-Utils-Functions-and-Macros" accesskey="u" rel="up">Module Utils Functions and Macros</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Generic-Macros-and-Functions-1"></span><h4 class="subsubsection">5.2.6.3 Generic Macros and Functions</h4>

<dl>
<dt id="index-UPDATE_005fPARAMETER">Module Utils macro: <strong>UPDATE_PARAMETER</strong> <em>(param, setter)</em></dt>
<dd><span id="index-UPDATE_005fPARAMETER-1"></span>
<p>Tests if the integer or enum parameter specified in <code>param</code>
(e.g. rate, pitch, cap_let_recogn, ...) changed since the
last time when the <code>setter</code> function was called.
</p>
<p>If it changed, it calls the function <code>setter</code> with the
new value. (The new value is stored in the msg_settings
structure that is created by module_utils.h, which
you normally don&rsquo;t have to care about.)
</p>
<p>The function <code>setter</code> should be defined as:
</p><div class="example">
<pre class="example">void setter_name(type value);
</pre></div>

<p>Please look at the <code>SET</code> command in the communication protocol
for the list of all available parameters.
see <a href="#Communication-Protocol-for-Output-Modules">Communication Protocol for Output Modules</a>.
</p>
<p>An example from Festival output module:
</p><pre class="verbatim">static void
festival_set_rate(signed int rate)
{
    assert(rate &gt;= -100 &amp;&amp; rate &lt;= +100);
    festivalSetRate(festival_info, rate);
}
[...]
int
module_speak(char *data, size_t bytes, EMessageType msgtype)
{
    [...]
    UPDATE_PARAMETER(rate, festival_set_rate);
    UPDATE_PARAMETER(pitch, festival_set_pitch);
    [...]
}
</pre></dd></dl>

<dl>
<dt id="index-UPDATE_005fSTRING_005fPARAMETER">Module Utils macro: <strong>UPDATE_STRING_PARAMETER</strong> <em>(param, setter)</em></dt>
<dd><span id="index-UPDATE_005fSTRING_005fPARAMETER-1"></span>
<p>The same as <code>UPDATE_PARAMETER</code> except that it works for
parameters with a string value.
</p></dd></dl>

<hr>
<span id="Functions-used-by-module_005fmain_002ec"></span><div class="header">
<p>
Next: <a href="#Functions-for-use-when-talking-to-synthesizer" accesskey="n" rel="next">Functions for use when talking to synthesizer</a>, Previous: <a href="#Generic-Macros-and-Functions" accesskey="p" rel="prev">Generic Macros and Functions</a>, Up: <a href="#Module-Utils-Functions-and-Macros" accesskey="u" rel="up">Module Utils Functions and Macros</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Functions-used-by-module_005fmain_002ec-1"></span><h4 class="subsubsection">5.2.6.4 Functions used by <samp>module_main.c</samp></h4>

<dl>
<dt id="index-char_002a-2">Module Utils function: <strong>char*</strong> <em>do_speak(void)</em></dt>
<dd><span id="index-do_005fspeak"></span>
<p>Takes care of communication after the <code>SPEAK</code> command was
received. Calls <code>module_speak()</code> when the full text is received.
</p>
<p>It returns a response according to the communication protocol.
</p></dd></dl>

<dl>
<dt id="index-char_002a-3">Module Utils function: <strong>char*</strong> <em>do_stop(void)</em></dt>
<dd><span id="index-do_005fstop"></span>
<p>Calls the <code>module_stop()</code> function of the particular
output module.
</p>
<p>It returns a response according to the communication protocol.
</p></dd></dl>

<dl>
<dt id="index-char_002a-4">Module Utils function: <strong>char*</strong> <em>do_pause(void)</em></dt>
<dd><span id="index-do_005fpause"></span>
<p>Calls the <code>module_pause()</code> function of the particular
output module.
</p>
<p>It returns a response according to the communication protocol
and the value returned by <code>module_pause()</code>.
</p></dd></dl>

<dl>
<dt id="index-char_002a-5">Module Utils function: <strong>char*</strong> <em>do_set()</em></dt>
<dd><span id="index-do_005fset"></span>
<p>Takes care of communication after the <code>SET</code> command was
received. Doesn&rsquo;t call any particular function of the output module,
only sets the values in the settings tables. (You should then call the
<code>UPDATE_PARAMETER()</code> macro in module_speak() to actually set the
synthesizer to these values.)
</p>
<p>It returns a response according to the communication protocol.
</p></dd></dl>

<dl>
<dt id="index-char_002a-6">Module Utils function: <strong>char*</strong> <em>do_speaking()</em></dt>
<dd><span id="index-do_005fspeaking"></span>
<p>Calls the <code>module_speaking()</code> function.
</p>
<p>It returns a response according to the communication protocol
and the value returned by <code>module_speaking()</code>.
</p></dd></dl>

<dl>
<dt id="index-void-1">Module Utils function: <strong>void</strong> <em>do_quit()</em></dt>
<dd><span id="index-do_005fquit"></span>
<p>Prints the farewell message to the standard output, according
to the protocol. Then it calls <code>module_close()</code>.
</p></dd></dl>

<hr>
<span id="Functions-for-use-when-talking-to-synthesizer"></span><div class="header">
<p>
Next: <a href="#Multi_002dprocess-output-modules" accesskey="n" rel="next">Multi-process output modules</a>, Previous: <a href="#Functions-used-by-module_005fmain_002ec" accesskey="p" rel="prev">Functions used by module_main.c</a>, Up: <a href="#Module-Utils-Functions-and-Macros" accesskey="u" rel="up">Module Utils Functions and Macros</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Functions-for-use-when-talking-to-synthesizer-1"></span><h4 class="subsubsection">5.2.6.5 Functions for use when talking to synthesizer</h4>

<dl>
<dt id="index-static">Module Utils function: <strong>static</strong> <em>int module_get_message_part ( const char* message, char* part, unsigned int *pos, size_t maxlen, const char* dividers)</em></dt>
<dd><span id="index-module_005fget_005fmessage_005fpart"></span>

<p>Gets a part of the <code>message</code> according to the specified <code>dividers</code>.
</p>
<p>It scans the text in <code>message</code> from the byte specified by
<code>*pos</code> and looks for one of the characters specified in
<code>dividers</code> followed by a whitespace character or the
terminating NULL byte. If one of them is encountered, the read text is
stored in <code>part</code> and the number of bytes read is
returned. If end of <code>message</code> is reached, the return value is
-1.
</p>
<p><code>message</code> is the text to process. It must be a NULL-terminated
uni-byte string.
</p>
<p><code>part</code> is a pointer to the place where the output text should
be stored. It must contain at least <code>maxlen</code> bytes of space.
</p>
<p><code>maxlen</code> is the maximum number of bytes that should be written
to <code>part</code>.
</p>
<p><code>dividers</code> is a NULL-terminated uni-byte string containing
the punctuation characters where the message should be divided
into smaller parts (if they are followed by whitespace).
</p>
<p>After returning, <code>pos</code> is the position
where the function terminated in processing <code>message</code>.
</p></dd></dl>

<dl>
<dt id="index-void-2">Output module function: <strong>void</strong> <em>module_report_index_mark(char *mark)</em></dt>
<dd><span id="index-module_005freport_005findex_005fmark"></span>
</dd></dl>
<dl>
<dt id="index-void-3">Output module function: <strong>void</strong> <em>module_report_event_*()</em></dt>
<dd><span id="index-module_005freport_005fevent_005f_002a"></span>

<p>The <code>module_report_</code> functions serve for reporting event
notifications and index marking events. You should use them whenever
you get an event from the synthesizer which is defined in the output
module communication protocol.
</p>
<p>Note that you cannot call these functions from within a call
to module_speak(), module_stop(), or module_pause().  The best
way to do this is to emit the events from another thread.
</p>
</dd></dl>

<dl>
<dt id="index-int-37">Output module function: <strong>int</strong> <em>module_close(void)</em></dt>
<dd><span id="index-module_005fclose"></span>

<p>This function is called when Speech Dispatcher terminates.  The output
module should terminate all threads and processes, free all resources,
close all sockets etc.  Never assume this function is called only when
Speech Dispatcher terminates and exit(0) will do the work for you.  It&rsquo;s
perfectly ok for Speech Dispatcher to load, unload or reload output modules
in the middle of its run.
</p>
</dd></dl>

<hr>
<span id="Multi_002dprocess-output-modules"></span><div class="header">
<p>
Next: <a href="#Memory-Handling-Functions" accesskey="n" rel="next">Memory Handling Functions</a>, Previous: <a href="#Functions-for-use-when-talking-to-synthesizer" accesskey="p" rel="prev">Functions for use when talking to synthesizer</a>, Up: <a href="#Module-Utils-Functions-and-Macros" accesskey="u" rel="up">Module Utils Functions and Macros</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Multi_002dprocess-output-modules-1"></span><h4 class="subsubsection">5.2.6.6 Multi-process output modules</h4>

<dl>
<dt id="index-size_005ft">Module Utils function: <strong>size_t</strong> <em>module_parent_wfork ( TModuleDoublePipe dpipe,</em></dt>
<dd><p>const char* message, SPDMessageType msgtype, const size_t maxlen,
const char* dividers, int *pause_requested)
<span id="index-module_005fparent_005fwfork"></span>
</p>
<p>It simply sends the data to the
child in smaller pieces and waits for confirmation with a single
<code>C</code> character on the pipe from child to parent.
</p>
<p><code>dpipe</code> is a parameter which contains the information
necessary for communicating through pipes between the parent and the
child and vice-versa.
</p>
<div class="example">
<pre class="example">typedef struct{
    int pc[2];            /* Parent to child pipe */
    int cp[2];            /* Child to parent pipe */
}TModuleDoublePipe;
</pre></div>

<p><code>message</code> is a pointer to a NULL-terminated string containing the message
for synthesis.
</p>
<p><code>msgtype</code> is  the type of the message for synthesis.
</p>
<p><code>maxlen</code> is the maximum number of bytes that should be transfered
over the pipe.
</p>
<p><code>dividers</code> is a NULL-terminated string containing the punctuation characters
at which this function should divide the message into smaller pieces.
</p>
<p><code>pause_requested</code> is a pointer to an integer flag, which is either 0 if
no pause request is pending, or 1 if the function should terminate
at a convenient place in the message because a pause is requested.
</p>
<p>In the beginning, it initializes the pipes and then it enters a simple cycle:
</p><ol>
<li> Reads a part of the message or an index mark using
<code>module_get_message_part()</code>.
</li><li> Looks if there isn&rsquo;t a pending request for pause and handles
it.
</li><li> Sends the current part of the message to the child
using <code>module_parent_dp_write()</code>.
</li><li> Waits until a single character <code>C</code> comes from the other pipe
using <code>module_parent_dp_read()</code>.
</li><li> Repeats the cycle or terminates, if there is no more data.
</li></ol>
</dd></dl>

<dl>
<dt id="index-int-38">Module Utils function: <strong>int</strong> <em>module_parent_wait_continue(TModuleDoublePipe dpipe)</em></dt>
<dd><span id="index-module_005fparent_005fwait_005fcontinue"></span>
<p>Waits until the character <code>C</code> (continue) is read from the pipe from child.
This function is intended to be run from the parent.
</p>
<p><code>dpipe</code> is the double pipe used for communication between the child and parent.
</p>
<p>Returns 0 if the character was read or 1 if the pipe was broken before the
character could be read.
</p></dd></dl>

<dl>
<dt id="index-void-4">Module Utils function: <strong>void</strong> <em>module_parent_dp_init (TModuleDoublePipe dpipe)</em></dt>
<dd><span id="index-module_005fparent_005fdp_005finit"></span>
<p>Initializes pipes (dpipe) in the parent. Currently it only closes the unnecessary ends.
</p></dd></dl>

<dl>
<dt id="index-void-5">Module Utils function: <strong>void</strong> <em>module_child_dp_close (TModuleDoublePipe dpipe)</em></dt>
<dd><span id="index-module_005fchild_005fdp_005finit"></span>
<p>Initializes pipes (dpipe) in the child. Currently it only closes the unnecessary ends.
</p></dd></dl>

<dl>
<dt id="index-void-6">Module Utils function: <strong>void</strong> <em>module_child_dp_write(TModuleDoublePipe dpipe,  const char *msg, size_t bytes)</em></dt>
<dd><span id="index-module_005fchild_005fdp_005fwrite"></span>
<p>Writes the specified number of <code>bytes</code> from <code>msg</code> to the pipe to the
parent. This function is intended, as the prefix says, to be run from the child.
Uses the pipes defined in <code>dpipe</code>.
</p></dd></dl>

<dl>
<dt id="index-void-7">Module Utils function: <strong>void</strong> <em>module_parent_dp_write(TModuleDoublePipe dpipe,  const char *msg, size_t bytes)</em></dt>
<dd><span id="index-module_005fparent_005fdp_005fwrite"></span>
<p>Writes the specified number of <code>bytes</code> from <code>msg</code> into the pipe to the
child. This function is intended, as the prefix says, to be run from the parent.
Uses the pipes defined in <code>dpipe</code>.
</p></dd></dl>

<dl>
<dt id="index-int-39">Module Utils function: <strong>int</strong> <em>module_child_dp_read(TModuleDoublePipe dpipe  char *msg, size_t maxlen)</em></dt>
<dd><span id="index-module_005fchild_005fdp_005fread"></span>
<p>Reads up to <code>maxlen</code> bytes from the pipe from parent into the buffer <code>msg</code>.
This function is intended, as the prefix says, to be run from the child.
Uses the pipes defined in <code>dpipe</code>.
</p></dd></dl>

<dl>
<dt id="index-int-40">Module Utils function: <strong>int</strong> <em>module_parent_dp_read(TModuleDoublePipe dpipe,  char *msg, size_t maxlen)</em></dt>
<dd><span id="index-module_005fparent_005fdp_005fread"></span>
<p>Reads up to <code>maxlen</code> bytes from the pipe from child into the buffer <code>msg</code>.
This function is intended, as the prefix says, to be run from the parent.
Uses the pipes defined in <code>dpipe</code>.
</p></dd></dl>

<dl>
<dt id="index-void-8">Module Utils function: <strong>void</strong> <em>module_sigblockall(void)</em></dt>
<dd><span id="index-module_005fsigblockall"></span>
<p>Blocks all signals. This is intended to be run from the child processes
and threads so that their signal handling won&rsquo;t interfere with the
parent.
</p></dd></dl>

<dl>
<dt id="index-void-9">Module Utils function: <strong>void</strong> <em>module_sigunblockusr(sigset_t *some_signals)</em></dt>
<dd><span id="index-module_005fsigunblockusr"></span>
<p>Use the set <code>some_signals</code> to unblock SIGUSR1.
</p></dd></dl>

<dl>
<dt id="index-void-10">Module Utils function: <strong>void</strong> <em>module_sigblockusr(sigset_t *some_signals)</em></dt>
<dd><span id="index-module_005fsigblockusr"></span>
<p>Use the set <code>some_signals</code> to block SIGUSR1.
</p></dd></dl>

<hr>
<span id="Memory-Handling-Functions"></span><div class="header">
<p>
Previous: <a href="#Multi_002dprocess-output-modules" accesskey="p" rel="prev">Multi-process output modules</a>, Up: <a href="#Module-Utils-Functions-and-Macros" accesskey="u" rel="up">Module Utils Functions and Macros</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Memory-Handling-Functions-1"></span><h4 class="subsubsection">5.2.6.7 Memory Handling Functions</h4>

<dl>
<dt id="index-static-1">Module Utils function: <strong>static</strong> <em>void* xmalloc (size_t size)</em></dt>
<dd><span id="index-xmalloc"></span>
<p>The same as the classical <code>malloc()</code> except that it executes
<code>FATAL(``Not enough memory'')</code> on error.
</p></dd></dl>

<dl>
<dt id="index-static-2">Module Utils function: <strong>static</strong> <em>void* xrealloc (void *data, size_t size)</em></dt>
<dd><span id="index-xrealloc"></span>
<p>The same as the classical <code>realloc()</code> except that it also accepts
<code>NULL</code> as <code>data</code>. In this case, it behaves as <code>xmalloc</code>.
</p></dd></dl>

<dl>
<dt id="index-void-11">Module Utils function: <strong>void</strong> <em>xfree(void *data)</em></dt>
<dd><span id="index-xfree"></span>
<p>The same as the classical <code>free()</code> except that it checks
if data isn&rsquo;t NULL before calling <code>free()</code>.
</p></dd></dl>

<hr>
<span id="Index-Marks-in-Output-Modules"></span><div class="header">
<p>
Previous: <a href="#Module-Utils-Functions-and-Macros" accesskey="p" rel="prev">Module Utils Functions and Macros</a>, Up: <a href="#Output-Modules" accesskey="u" rel="up">Output Modules</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Index-Marks-in-Output-Modules-1"></span><h4 class="subsection">5.2.7 Index Marks in Output Modules</h4>

<p>Output modules need to provide some kind of synchronization and they have to
give Speech Dispatcher back some information about what part of the message
is currently being said. On the other hand, output modules are not able to tell
the exact position in the text because various conversions and message processing take place
(sometimes punctuation and spelling substitution, the message needs to be
recoded from multibyte to unibyte coding etc.) before the text reaches
the synthesizer.
</p>
<p>For this reason, Speech Dispatcher places so-called index marks in
the text it sends to its output modules. They have the form:
</p>
<div class="example">
<pre class="example">&lt;mark name=&quot;id&quot;/&gt;
</pre></div>

<p><code>id</code> is the identifier associated with each index
mark. Within a <code>module_speak()</code> message, each identifer is unique.
It consists of the string <code>__spd_</code> and a counter number.  Numbers
begin from zero for each message.  For example, the fourth index mark
within a message looks like
</p>
<div class="example">
<pre class="example">&lt;mark name=&quot;__spd_id_3&quot;/&gt;
</pre></div>

<p>When an index mark is reached, its identifier should be stored
so that the output module is able to tell Speech Dispatcher the identifier
of the last index mark. Also, index marks are the best place to stop
when the module is requested to pause (although it&rsquo;s ok to stop at
some place close by and report the last index mark).
</p>
<p>Notice that index marks are in SSML format using the <code>mark</code> tag.
</p>
<hr>
<span id="Download-and-Contact"></span><div class="header">
<p>
Next: <a href="#Reporting-Bugs" accesskey="n" rel="next">Reporting Bugs</a>, Previous: <a href="#Server-Programming" accesskey="p" rel="prev">Server Programming</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Download"></span><h2 class="chapter">6 Download</h2>

<p>You can download Speech Dispatcher&rsquo;s latest release source code from
<a href="http://www.freebsoft.org/speechd">http://www.freebsoft.org/speechd</a>. There is also information
on how to set up anonymous access to our git repository.
</p>
<p>However, you may prefer to download Speech Dispatcher in a binary
package for your system. We don&rsquo;t distribute such packages ourselves.
If you run Debian GNU/Linux, it should be in the central repository
under the name <code>speech-dispatcher</code> or <code>speechd</code>. If you run
an rpm-based distribution like RedHat, Mandrake or SuSE Linux, please
try to look at <a href="http://www.rpmfind.net/">http://www.rpmfind.net/</a>.
</p>
<p>If you want to contact us, please look at
<a href="http://www.freebsoft.org/contact">http://www.freebsoft.org/contact</a>
or use the email <a href="mailto:users@lists.freebsoft.org">users@lists.freebsoft.org</a>.
</p>
<hr>
<span id="Reporting-Bugs"></span><div class="header">
<p>
Next: <a href="#How-You-Can-Help" accesskey="n" rel="next">How You Can Help</a>, Previous: <a href="#Download-and-Contact" accesskey="p" rel="prev">Download and Contact</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Reporting-Bugs-1"></span><h2 class="chapter">7 Reporting Bugs</h2>

<p>If you believe you found a bug in Speech Dispatcher, we will be very
grateful if you let us know about it. Please do it by email on the
address <a href="mailto:speechd@bugs.freebsoft.org">speechd@bugs.freebsoft.org</a>, but please don&rsquo;t send us
messages larger than half a megabyte unless we ask you.
</p>
<p>To report a bug in a way that is useful for the developers is not
as easy as it may seem. Here are some hints that you should follow in
order to give us the best information so that we can find and fix
the bug easily.
</p>
<p>First of all, please try to describe the problem as exactly as you
can. We prefer raw data over speculations about where the problem may
lie. Please try to explain in what situation the bug happens. Even
if it&rsquo;s a general bug that happens in many situations, please try to
describe at least one case in as much detail, as possible.
</p>
<p>Also, please specify the versions of programs that you use when
the bug happens. This is not only Speech Dispatcher, but also
the client application you use (speechd-el, say, etc.) and
the synthesizer name and version.
</p>
<p>If you can reproduce the bug, please send us the log file also.  This
is very useful, because otherwise, we may not be able to reproduce the
bug with our configuration and program versions that differ from
yours. Configuration must be set to logging priority at least 4, but
best 5, so that it&rsquo;s useful for debugging purposes. You can do so in
<samp>etc/speech-dispatcher/speechd.conf</samp> by modifying the variable
<code>LogLevel</code>. Also, you may want to modify the log destination with
variable <code>LogFile</code>. After modifying these options, please restart
Speech Dispatcher and repeat the situation in which the bug
happens. After it happened, please take the log and attach it to the
bug report, preferably compressed using <code>gzip</code>. But note, that
when logging with level 5, all the data that come from Speech Dispatcher
is also recorded, so make sure there is no sensitive information
when you are reproducing the bug. Please make sure you switch back
to priority 3 or lower logging, because priority 4 or 5 produces
really huge logs.
</p>
<p>If you are a programmer and you find a bug that is reproducible in
SSIP, you can send us the sequence of SSIP commands that lead to the
bug (preferably from starting the connection). You can also try to
reproduce the bug in a simple test-script under
<samp>speech-dispatcher/src/tests</samp> in the source tree. Please check
<samp>speech-dispatcher/src/tests/README</samp> and see the other tests
scripts there for an example.
</p>
<p>When the bug is a SEGMENTATION FAULT, a backtrace from gdb is also
valuable, but if you are not familiar with gdb, don&rsquo;t bother with
that, we may ask you to do it later.
</p>
<p>Finally, you may also send us a guess of what you think
happens in Speech Dispatcher that causes the bug, but this is
usually not very helpful. If you are able to provide additional technical
information instead, please do so.
</p>
<hr>
<span id="How-You-Can-Help"></span><div class="header">
<p>
Next: <a href="#Appendices" accesskey="n" rel="next">Appendices</a>, Previous: <a href="#Reporting-Bugs" accesskey="p" rel="prev">Reporting Bugs</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="How-You-Can-Help-1"></span><h2 class="chapter">8 How You Can Help</h2>

<p>If you want to contribute to the development of Speech Dispatcher,
we will be very happy if you do so. Please contact us on
<a href="mailto:users@lists.freebsoft.org">users@lists.freebsoft.org</a>.
</p>
<p>Here is a short, definitively not exhaustive, list of how you can
help us and other users.
</p>
<ul>
<li> <em>Donate money:</em> We are a non-profit organization and we can&rsquo;t work without
funding. Brailcom, o.p.s. created Speech Dispatcher, speechd-el and also works
on other projects to help blind and visually impaired users of computers. We build
on Free Software and GNU/Linux, because we believe this is the right way. But it
won&rsquo;t be possible when we have no money. <a href="http://www.freebsoft.org/">http://www.freebsoft.org/</a>

</li><li> <em>Report bugs:</em> Every user, even if he can&rsquo;t give us money and he is not
a programmer, can help us very much by just using our software and telling
us about the bugs and inconveniences he encounters. A good user community that
reports bugs is a crucial part of development of a good Free Software package.
We can&rsquo;t test our software under all circumstances and on all platforms, so each
constructive bug report is highly appreciated. You can report bugs in Speech
Dispatcher on <a href="mailto:speechd@bugs.freebsoft.org">speechd@bugs.freebsoft.org</a>.

</li><li> <em>Write or modify an application to support synthesis:</em> With
Speech Dispatcher, we have provided an interface that allows
applications easy access to speech synthesis. However powerful, it&rsquo;s
no more than an interface, and it&rsquo;s useless on its own. Now it&rsquo;s time
to write the particular client applications, or modify existing
applications so that they can support speech synthesis.  It is useful
if the application needs a specific interface for blind people or if
it wants to use speech synthesis for educational or other purposes.

</li><li> <em>Develop new voices and language definitions for Festival:</em> In
the world of Free Software, currently Festival is the most promising
interface for Text-to-Speech processing and speech synthesis. It&rsquo;s
an extensible and highly configurable platform for developing synthetic
voices. If there is a lack of synthetic voices or no voices at all for
some language, we believe the wisest solution is to try to develop
a voice in Festival. It&rsquo;s certainly not advisable to develop your
own synthesizer if the goal is producing a quality voice system
in a reasonable time. Festival developers provide nice documentation
about how to develop a voice and a lot of tools that help doing
this. We found that some language definitions can be constructed
by canibalizing the already existing definitions and can be tuned
later. As for the voice samples, one can temporarily use the
MBROLA project voices. But please note that, although they are
downloadable for free (as price), they are not Free Software
and it would be wonderful if we could replace them by Free Software
alternatives as soon as possible.
See <a href="http://www.cstr.ed.ac.uk/projects/festival/">http://www.cstr.ed.ac.uk/projects/festival/</a>.

</li><li> <em>Help us with this or other Free-b-Soft projects:</em> Please look at
<a href="http://www.freebsoft.org">http://www.freebsoft.org</a> to find information about our
projects. There is a plenty of work to be done for the blind and
visually impaired people to make their work with computers easier.

</li><li> <em>Spread the word about Speech Dispatcher and Free Software:</em> You can
help us, and the whole community around Free Software, just by telling
your friends about the amazing world of Free Software. It doesn&rsquo;t
have to be just about Speech Dispatcher; you can tell them about
other projects or about Free Software in general. Remember that
Speech Dispatcher could only arise out of understanding of some people
of the principles and ideas behind Free Software. And this is mostly
the same for the rest of the Free Software world.
See <a href="http://www.gnu.org/">http://www.gnu.org/</a> for more information about GNU/Linux
and Free Software.

</li></ul>

<hr>
<span id="Appendices"></span><div class="header">
<p>
Next: <a href="#GNU-General-Public-License" accesskey="n" rel="next">GNU General Public License</a>, Previous: <a href="#How-You-Can-Help" accesskey="p" rel="prev">How You Can Help</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Appendices-1"></span><h2 class="appendix">Appendix A Appendices</h2>

<hr>
<span id="GNU-General-Public-License"></span><div class="header">
<p>
Next: <a href="#GNU-Free-Documentation-License" accesskey="n" rel="next">GNU Free Documentation License</a>, Previous: <a href="#Appendices" accesskey="p" rel="prev">Appendices</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="GNU-General-Public-License-1"></span><h2 class="appendix">Appendix B GNU General Public License</h2>
<div align="center">Version 2, June 1991
</div><span id="index-GPL_002c-GNU-General-Public-License"></span>

<div align="center">Version 2, June 1991
</div>

<div class="display">
<pre class="display">Copyright &copy; 1989, 1991 Free Software Foundation, Inc.
51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA

Everyone is permitted to copy and distribute verbatim copies
of this license document, but changing it is not allowed.
</pre></div>

<span id="Preamble"></span><h3 class="heading">Preamble</h3>

<p>The licenses for most software are designed to take away your
freedom to share and change it.  By contrast, the GNU General Public
License is intended to guarantee your freedom to share and change free
software&mdash;to make sure the software is free for all its users.  This
General Public License applies to most of the Free Software
Foundation&rsquo;s software and to any other program whose authors commit to
using it.  (Some other Free Software Foundation software is covered by
the GNU Lesser General Public License instead.)  You can apply it to
your programs, too.
</p>
<p>When we speak of free software, we are referring to freedom, not
price.  Our General Public Licenses are designed to make sure that you
have the freedom to distribute copies of free software (and charge for
this service if you wish), that you receive source code or can get it
if you want it, that you can change the software or use pieces of it
in new free programs; and that you know you can do these things.
</p>
<p>To protect your rights, we need to make restrictions that forbid
anyone to deny you these rights or to ask you to surrender the rights.
These restrictions translate to certain responsibilities for you if you
distribute copies of the software, or if you modify it.
</p>
<p>For example, if you distribute copies of such a program, whether
gratis or for a fee, you must give the recipients all the rights that
you have.  You must make sure that they, too, receive or can get the
source code.  And you must show them these terms so they know their
rights.
</p>
<p>We protect your rights with two steps: (1) copyright the software, and
(2) offer you this license which gives you legal permission to copy,
distribute and/or modify the software.
</p>
<p>Also, for each author&rsquo;s protection and ours, we want to make certain
that everyone understands that there is no warranty for this free
software.  If the software is modified by someone else and passed on, we
want its recipients to know that what they have is not the original, so
that any problems introduced by others will not reflect on the original
authors&rsquo; reputations.
</p>
<p>Finally, any free program is threatened constantly by software
patents.  We wish to avoid the danger that redistributors of a free
program will individually obtain patent licenses, in effect making the
program proprietary.  To prevent this, we have made it clear that any
patent must be licensed for everyone&rsquo;s free use or not licensed at all.
</p>
<p>The precise terms and conditions for copying, distribution and
modification follow.
</p>
<span id="TERMS-AND-CONDITIONS-FOR-COPYING_002c-DISTRIBUTION-AND-MODIFICATION"></span><h3 class="heading">TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION</h3>

<ol start="0">
<li> This License applies to any program or other work which contains
a notice placed by the copyright holder saying it may be distributed
under the terms of this General Public License.  The &ldquo;Program&rdquo;, below,
refers to any such program or work, and a &ldquo;work based on the Program&rdquo;
means either the Program or any derivative work under copyright law:
that is to say, a work containing the Program or a portion of it,
either verbatim or with modifications and/or translated into another
language.  (Hereinafter, translation is included without limitation in
the term &ldquo;modification&rdquo;.)  Each licensee is addressed as &ldquo;you&rdquo;.

<p>Activities other than copying, distribution and modification are not
covered by this License; they are outside its scope.  The act of
running the Program is not restricted, and the output from the Program
is covered only if its contents constitute a work based on the
Program (independent of having been made by running the Program).
Whether that is true depends on what the Program does.
</p>
</li><li> You may copy and distribute verbatim copies of the Program&rsquo;s
source code as you receive it, in any medium, provided that you
conspicuously and appropriately publish on each copy an appropriate
copyright notice and disclaimer of warranty; keep intact all the
notices that refer to this License and to the absence of any warranty;
and give any other recipients of the Program a copy of this License
along with the Program.

<p>You may charge a fee for the physical act of transferring a copy, and
you may at your option offer warranty protection in exchange for a fee.
</p>
</li><li> You may modify your copy or copies of the Program or any portion
of it, thus forming a work based on the Program, and copy and
distribute such modifications or work under the terms of Section 1
above, provided that you also meet all of these conditions:

<ol type="a" start="1">
<li> You must cause the modified files to carry prominent notices
stating that you changed the files and the date of any change.

</li><li> You must cause any work that you distribute or publish, that in
whole or in part contains or is derived from the Program or any
part thereof, to be licensed as a whole at no charge to all third
parties under the terms of this License.

</li><li> If the modified program normally reads commands interactively
when run, you must cause it, when started running for such
interactive use in the most ordinary way, to print or display an
announcement including an appropriate copyright notice and a
notice that there is no warranty (or else, saying that you provide
a warranty) and that users may redistribute the program under
these conditions, and telling the user how to view a copy of this
License.  (Exception: if the Program itself is interactive but
does not normally print such an announcement, your work based on
the Program is not required to print an announcement.)
</li></ol>

<p>These requirements apply to the modified work as a whole.  If
identifiable sections of that work are not derived from the Program,
and can be reasonably considered independent and separate works in
themselves, then this License, and its terms, do not apply to those
sections when you distribute them as separate works.  But when you
distribute the same sections as part of a whole which is a work based
on the Program, the distribution of the whole must be on the terms of
this License, whose permissions for other licensees extend to the
entire whole, and thus to each and every part regardless of who wrote it.
</p>
<p>Thus, it is not the intent of this section to claim rights or contest
your rights to work written entirely by you; rather, the intent is to
exercise the right to control the distribution of derivative or
collective works based on the Program.
</p>
<p>In addition, mere aggregation of another work not based on the Program
with the Program (or with a work based on the Program) on a volume of
a storage or distribution medium does not bring the other work under
the scope of this License.
</p>
</li><li> You may copy and distribute the Program (or a work based on it,
under Section 2) in object code or executable form under the terms of
Sections 1 and 2 above provided that you also do one of the following:

<ol type="a" start="1">
<li> Accompany it with the complete corresponding machine-readable
source code, which must be distributed under the terms of Sections
1 and 2 above on a medium customarily used for software interchange; or,

</li><li> Accompany it with a written offer, valid for at least three
years, to give any third party, for a charge no more than your
cost of physically performing source distribution, a complete
machine-readable copy of the corresponding source code, to be
distributed under the terms of Sections 1 and 2 above on a medium
customarily used for software interchange; or,

</li><li> Accompany it with the information you received as to the offer
to distribute corresponding source code.  (This alternative is
allowed only for noncommercial distribution and only if you
received the program in object code or executable form with such
an offer, in accord with Subsection b above.)
</li></ol>

<p>The source code for a work means the preferred form of the work for
making modifications to it.  For an executable work, complete source
code means all the source code for all modules it contains, plus any
associated interface definition files, plus the scripts used to
control compilation and installation of the executable.  However, as a
special exception, the source code distributed need not include
anything that is normally distributed (in either source or binary
form) with the major components (compiler, kernel, and so on) of the
operating system on which the executable runs, unless that component
itself accompanies the executable.
</p>
<p>If distribution of executable or object code is made by offering
access to copy from a designated place, then offering equivalent
access to copy the source code from the same place counts as
distribution of the source code, even though third parties are not
compelled to copy the source along with the object code.
</p>
</li><li> You may not copy, modify, sublicense, or distribute the Program
except as expressly provided under this License.  Any attempt
otherwise to copy, modify, sublicense or distribute the Program is
void, and will automatically terminate your rights under this License.
However, parties who have received copies, or rights, from you under
this License will not have their licenses terminated so long as such
parties remain in full compliance.

</li><li> You are not required to accept this License, since you have not
signed it.  However, nothing else grants you permission to modify or
distribute the Program or its derivative works.  These actions are
prohibited by law if you do not accept this License.  Therefore, by
modifying or distributing the Program (or any work based on the
Program), you indicate your acceptance of this License to do so, and
all its terms and conditions for copying, distributing or modifying
the Program or works based on it.

</li><li> Each time you redistribute the Program (or any work based on the
Program), the recipient automatically receives a license from the
original licensor to copy, distribute or modify the Program subject to
these terms and conditions.  You may not impose any further
restrictions on the recipients&rsquo; exercise of the rights granted herein.
You are not responsible for enforcing compliance by third parties to
this License.

</li><li> If, as a consequence of a court judgment or allegation of patent
infringement or for any other reason (not limited to patent issues),
conditions are imposed on you (whether by court order, agreement or
otherwise) that contradict the conditions of this License, they do not
excuse you from the conditions of this License.  If you cannot
distribute so as to satisfy simultaneously your obligations under this
License and any other pertinent obligations, then as a consequence you
may not distribute the Program at all.  For example, if a patent
license would not permit royalty-free redistribution of the Program by
all those who receive copies directly or indirectly through you, then
the only way you could satisfy both it and this License would be to
refrain entirely from distribution of the Program.

<p>If any portion of this section is held invalid or unenforceable under
any particular circumstance, the balance of the section is intended to
apply and the section as a whole is intended to apply in other
circumstances.
</p>
<p>It is not the purpose of this section to induce you to infringe any
patents or other property right claims or to contest validity of any
such claims; this section has the sole purpose of protecting the
integrity of the free software distribution system, which is
implemented by public license practices.  Many people have made
generous contributions to the wide range of software distributed
through that system in reliance on consistent application of that
system; it is up to the author/donor to decide if he or she is willing
to distribute software through any other system and a licensee cannot
impose that choice.
</p>
<p>This section is intended to make thoroughly clear what is believed to
be a consequence of the rest of this License.
</p>
</li><li> If the distribution and/or use of the Program is restricted in
certain countries either by patents or by copyrighted interfaces, the
original copyright holder who places the Program under this License
may add an explicit geographical distribution limitation excluding
those countries, so that distribution is permitted only in or among
countries not thus excluded.  In such case, this License incorporates
the limitation as if written in the body of this License.

</li><li> The Free Software Foundation may publish revised and/or new versions
of the General Public License from time to time.  Such new versions will
be similar in spirit to the present version, but may differ in detail to
address new problems or concerns.

<p>Each version is given a distinguishing version number.  If the Program
specifies a version number of this License which applies to it and &ldquo;any
later version&rdquo;, you have the option of following the terms and conditions
either of that version or of any later version published by the Free
Software Foundation.  If the Program does not specify a version number of
this License, you may choose any version ever published by the Free Software
Foundation.
</p>
</li><li> If you wish to incorporate parts of the Program into other free
programs whose distribution conditions are different, write to the author
to ask for permission.  For software which is copyrighted by the Free
Software Foundation, write to the Free Software Foundation; we sometimes
make exceptions for this.  Our decision will be guided by the two goals
of preserving the free status of all derivatives of our free software and
of promoting the sharing and reuse of software generally.


</li><li> BECAUSE THE PROGRAM IS LICENSED FREE OF CHARGE, THERE IS NO WARRANTY
FOR THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE LAW.  EXCEPT WHEN
OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER PARTIES
PROVIDE THE PROGRAM &ldquo;AS IS&rdquo; WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED
OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  THE ENTIRE RISK AS
TO THE QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH YOU.  SHOULD THE
PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY SERVICING,
REPAIR OR CORRECTION.

</li><li> IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING
WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MAY MODIFY AND/OR
REDISTRIBUTE THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES,
INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING
OUT OF THE USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED
TO LOSS OF DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY
YOU OR THIRD PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER
PROGRAMS), EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE
POSSIBILITY OF SUCH DAMAGES.
</li></ol>


<span id="Appendix_003a-How-to-Apply-These-Terms-to-Your-New-Programs"></span><h3 class="heading">Appendix: How to Apply These Terms to Your New Programs</h3>

<p>If you develop a new program, and you want it to be of the greatest
possible use to the public, the best way to achieve this is to make it
free software which everyone can redistribute and change under these terms.
</p>
<p>To do so, attach the following notices to the program.  It is safest
to attach them to the start of each source file to most effectively
convey the exclusion of warranty; and each file should have at least
the &ldquo;copyright&rdquo; line and a pointer to where the full notice is found.
</p>
<div class="example">
<pre class="example"><var>one line to give the program's name and a brief idea of what it does.</var>
Copyright (C) <var>yyyy</var>  <var>name of author</var>

This program is free software; you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation; either version 2 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see &lt;https://www.gnu.org/licenses/&gt;.
</pre></div>

<p>Also add information on how to contact you by electronic and paper mail.
</p>
<p>If the program is interactive, make it output a short notice like this
when it starts in an interactive mode:
</p>
<div class="example">
<pre class="example">Gnomovision version 69, Copyright (C) <var>year</var> <var>name of author</var>
Gnomovision comes with ABSOLUTELY NO WARRANTY; for details type `show w'.
This is free software, and you are welcome to redistribute it
under certain conditions; type `show c' for details.
</pre></div>

<p>The hypothetical commands &lsquo;<samp>show w</samp>&rsquo; and &lsquo;<samp>show c</samp>&rsquo; should show
the appropriate parts of the General Public License.  Of course, the
commands you use may be called something other than &lsquo;<samp>show w</samp>&rsquo; and
&lsquo;<samp>show c</samp>&rsquo;; they could even be mouse-clicks or menu items&mdash;whatever
suits your program.
</p>
<p>You should also get your employer (if you work as a programmer) or your
school, if any, to sign a &ldquo;copyright disclaimer&rdquo; for the program, if
necessary.  Here is a sample; alter the names:
</p>
<div class="example">
<pre class="example">Yoyodyne, Inc., hereby disclaims all copyright interest in the program
`Gnomovision' (which makes passes at compilers) written by James Hacker.

<var>signature of Ty Coon</var>, 1 April 1989
Ty Coon, President of Vice
</pre></div>

<p>This General Public License does not permit incorporating your program into
proprietary programs.  If your program is a subroutine library, you may
consider it more useful to permit linking proprietary applications with the
library.  If this is what you want to do, use the GNU Lesser General
Public License instead of this License.
</p>
<hr>
<span id="GNU-Free-Documentation-License"></span><div class="header">
<p>
Next: <a href="#Index-of-Concepts" accesskey="n" rel="next">Index of Concepts</a>, Previous: <a href="#GNU-General-Public-License" accesskey="p" rel="prev">GNU General Public License</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="GNU-Free-Documentation-License-1"></span><h2 class="appendix">Appendix C GNU Free Documentation License</h2>
<div align="center">Version 1.2, November 2002
</div><span id="index-FDL_002c-GNU-Free-Documentation-License"></span>

<div class="display">
<pre class="display">Copyright &copy; 2000,2001,2002 Free Software Foundation, Inc.
51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA

Everyone is permitted to copy and distribute verbatim copies
of this license document, but changing it is not allowed.
</pre></div>

<ol start="0">
<li> PREAMBLE

<p>The purpose of this License is to make a manual, textbook, or other
functional and useful document <em>free</em> in the sense of freedom: to
assure everyone the effective freedom to copy and redistribute it,
with or without modifying it, either commercially or noncommercially.
Secondarily, this License preserves for the author and publisher a way
to get credit for their work, while not being considered responsible
for modifications made by others.
</p>
<p>This License is a kind of &ldquo;copyleft&rdquo;, which means that derivative
works of the document must themselves be free in the same sense.  It
complements the GNU General Public License, which is a copyleft
license designed for free software.
</p>
<p>We have designed this License in order to use it for manuals for free
software, because free software needs free documentation: a free
program should come with manuals providing the same freedoms that the
software does.  But this License is not limited to software manuals;
it can be used for any textual work, regardless of subject matter or
whether it is published as a printed book.  We recommend this License
principally for works whose purpose is instruction or reference.
</p>
</li><li> APPLICABILITY AND DEFINITIONS

<p>This License applies to any manual or other work, in any medium, that
contains a notice placed by the copyright holder saying it can be
distributed under the terms of this License.  Such a notice grants a
world-wide, royalty-free license, unlimited in duration, to use that
work under the conditions stated herein.  The &ldquo;Document&rdquo;, below,
refers to any such manual or work.  Any member of the public is a
licensee, and is addressed as &ldquo;you&rdquo;.  You accept the license if you
copy, modify or distribute the work in a way requiring permission
under copyright law.
</p>
<p>A &ldquo;Modified Version&rdquo; of the Document means any work containing the
Document or a portion of it, either copied verbatim, or with
modifications and/or translated into another language.
</p>
<p>A &ldquo;Secondary Section&rdquo; is a named appendix or a front-matter section
of the Document that deals exclusively with the relationship of the
publishers or authors of the Document to the Document&rsquo;s overall
subject (or to related matters) and contains nothing that could fall
directly within that overall subject.  (Thus, if the Document is in
part a textbook of mathematics, a Secondary Section may not explain
any mathematics.)  The relationship could be a matter of historical
connection with the subject or with related matters, or of legal,
commercial, philosophical, ethical or political position regarding
them.
</p>
<p>The &ldquo;Invariant Sections&rdquo; are certain Secondary Sections whose titles
are designated, as being those of Invariant Sections, in the notice
that says that the Document is released under this License.  If a
section does not fit the above definition of Secondary then it is not
allowed to be designated as Invariant.  The Document may contain zero
Invariant Sections.  If the Document does not identify any Invariant
Sections then there are none.
</p>
<p>The &ldquo;Cover Texts&rdquo; are certain short passages of text that are listed,
as Front-Cover Texts or Back-Cover Texts, in the notice that says that
the Document is released under this License.  A Front-Cover Text may
be at most 5 words, and a Back-Cover Text may be at most 25 words.
</p>
<p>A &ldquo;Transparent&rdquo; copy of the Document means a machine-readable copy,
represented in a format whose specification is available to the
general public, that is suitable for revising the document
straightforwardly with generic text editors or (for images composed of
pixels) generic paint programs or (for drawings) some widely available
drawing editor, and that is suitable for input to text formatters or
for automatic translation to a variety of formats suitable for input
to text formatters.  A copy made in an otherwise Transparent file
format whose markup, or absence of markup, has been arranged to thwart
or discourage subsequent modification by readers is not Transparent.
An image format is not Transparent if used for any substantial amount
of text.  A copy that is not &ldquo;Transparent&rdquo; is called &ldquo;Opaque&rdquo;.
</p>
<p>Examples of suitable formats for Transparent copies include plain
<small>ASCII</small> without markup, Texinfo input format, LaTeX input
format, <acronym>SGML</acronym> or <acronym>XML</acronym> using a publicly available
<acronym>DTD</acronym>, and standard-conforming simple <acronym>HTML</acronym>,
PostScript or <acronym>PDF</acronym> designed for human modification.  Examples
of transparent image formats include <acronym>PNG</acronym>, <acronym>XCF</acronym> and
<acronym>JPG</acronym>.  Opaque formats include proprietary formats that can be
read and edited only by proprietary word processors, <acronym>SGML</acronym> or
<acronym>XML</acronym> for which the <acronym>DTD</acronym> and/or processing tools are
not generally available, and the machine-generated <acronym>HTML</acronym>,
PostScript or <acronym>PDF</acronym> produced by some word processors for
output purposes only.
</p>
<p>The &ldquo;Title Page&rdquo; means, for a printed book, the title page itself,
plus such following pages as are needed to hold, legibly, the material
this License requires to appear in the title page.  For works in
formats which do not have any title page as such, &ldquo;Title Page&rdquo; means
the text near the most prominent appearance of the work&rsquo;s title,
preceding the beginning of the body of the text.
</p>
<p>A section &ldquo;Entitled XYZ&rdquo; means a named subunit of the Document whose
title either is precisely XYZ or contains XYZ in parentheses following
text that translates XYZ in another language.  (Here XYZ stands for a
specific section name mentioned below, such as &ldquo;Acknowledgements&rdquo;,
&ldquo;Dedications&rdquo;, &ldquo;Endorsements&rdquo;, or &ldquo;History&rdquo;.)  To &ldquo;Preserve the Title&rdquo;
of such a section when you modify the Document means that it remains a
section &ldquo;Entitled XYZ&rdquo; according to this definition.
</p>
<p>The Document may include Warranty Disclaimers next to the notice which
states that this License applies to the Document.  These Warranty
Disclaimers are considered to be included by reference in this
License, but only as regards disclaiming warranties: any other
implication that these Warranty Disclaimers may have is void and has
no effect on the meaning of this License.
</p>
</li><li> VERBATIM COPYING

<p>You may copy and distribute the Document in any medium, either
commercially or noncommercially, provided that this License, the
copyright notices, and the license notice saying this License applies
to the Document are reproduced in all copies, and that you add no other
conditions whatsoever to those of this License.  You may not use
technical measures to obstruct or control the reading or further
copying of the copies you make or distribute.  However, you may accept
compensation in exchange for copies.  If you distribute a large enough
number of copies you must also follow the conditions in section 3.
</p>
<p>You may also lend copies, under the same conditions stated above, and
you may publicly display copies.
</p>
</li><li> COPYING IN QUANTITY

<p>If you publish printed copies (or copies in media that commonly have
printed covers) of the Document, numbering more than 100, and the
Document&rsquo;s license notice requires Cover Texts, you must enclose the
copies in covers that carry, clearly and legibly, all these Cover
Texts: Front-Cover Texts on the front cover, and Back-Cover Texts on
the back cover.  Both covers must also clearly and legibly identify
you as the publisher of these copies.  The front cover must present
the full title with all words of the title equally prominent and
visible.  You may add other material on the covers in addition.
Copying with changes limited to the covers, as long as they preserve
the title of the Document and satisfy these conditions, can be treated
as verbatim copying in other respects.
</p>
<p>If the required texts for either cover are too voluminous to fit
legibly, you should put the first ones listed (as many as fit
reasonably) on the actual cover, and continue the rest onto adjacent
pages.
</p>
<p>If you publish or distribute Opaque copies of the Document numbering
more than 100, you must either include a machine-readable Transparent
copy along with each Opaque copy, or state in or with each Opaque copy
a computer-network location from which the general network-using
public has access to download using public-standard network protocols
a complete Transparent copy of the Document, free of added material.
If you use the latter option, you must take reasonably prudent steps,
when you begin distribution of Opaque copies in quantity, to ensure
that this Transparent copy will remain thus accessible at the stated
location until at least one year after the last time you distribute an
Opaque copy (directly or through your agents or retailers) of that
edition to the public.
</p>
<p>It is requested, but not required, that you contact the authors of the
Document well before redistributing any large number of copies, to give
them a chance to provide you with an updated version of the Document.
</p>
</li><li> MODIFICATIONS

<p>You may copy and distribute a Modified Version of the Document under
the conditions of sections 2 and 3 above, provided that you release
the Modified Version under precisely this License, with the Modified
Version filling the role of the Document, thus licensing distribution
and modification of the Modified Version to whoever possesses a copy
of it.  In addition, you must do these things in the Modified Version:
</p>
<ol type="A" start="1">
<li> Use in the Title Page (and on the covers, if any) a title distinct
from that of the Document, and from those of previous versions
(which should, if there were any, be listed in the History section
of the Document).  You may use the same title as a previous version
if the original publisher of that version gives permission.

</li><li> List on the Title Page, as authors, one or more persons or entities
responsible for authorship of the modifications in the Modified
Version, together with at least five of the principal authors of the
Document (all of its principal authors, if it has fewer than five),
unless they release you from this requirement.

</li><li> State on the Title page the name of the publisher of the
Modified Version, as the publisher.

</li><li> Preserve all the copyright notices of the Document.

</li><li> Add an appropriate copyright notice for your modifications
adjacent to the other copyright notices.

</li><li> Include, immediately after the copyright notices, a license notice
giving the public permission to use the Modified Version under the
terms of this License, in the form shown in the Addendum below.

</li><li> Preserve in that license notice the full lists of Invariant Sections
and required Cover Texts given in the Document&rsquo;s license notice.

</li><li> Include an unaltered copy of this License.

</li><li> Preserve the section Entitled &ldquo;History&rdquo;, Preserve its Title, and add
to it an item stating at least the title, year, new authors, and
publisher of the Modified Version as given on the Title Page.  If
there is no section Entitled &ldquo;History&rdquo; in the Document, create one
stating the title, year, authors, and publisher of the Document as
given on its Title Page, then add an item describing the Modified
Version as stated in the previous sentence.

</li><li> Preserve the network location, if any, given in the Document for
public access to a Transparent copy of the Document, and likewise
the network locations given in the Document for previous versions
it was based on.  These may be placed in the &ldquo;History&rdquo; section.
You may omit a network location for a work that was published at
least four years before the Document itself, or if the original
publisher of the version it refers to gives permission.

</li><li> For any section Entitled &ldquo;Acknowledgements&rdquo; or &ldquo;Dedications&rdquo;, Preserve
the Title of the section, and preserve in the section all the
substance and tone of each of the contributor acknowledgements and/or
dedications given therein.

</li><li> Preserve all the Invariant Sections of the Document,
unaltered in their text and in their titles.  Section numbers
or the equivalent are not considered part of the section titles.

</li><li> Delete any section Entitled &ldquo;Endorsements&rdquo;.  Such a section
may not be included in the Modified Version.

</li><li> Do not retitle any existing section to be Entitled &ldquo;Endorsements&rdquo; or
to conflict in title with any Invariant Section.

</li><li> Preserve any Warranty Disclaimers.
</li></ol>

<p>If the Modified Version includes new front-matter sections or
appendices that qualify as Secondary Sections and contain no material
copied from the Document, you may at your option designate some or all
of these sections as invariant.  To do this, add their titles to the
list of Invariant Sections in the Modified Version&rsquo;s license notice.
These titles must be distinct from any other section titles.
</p>
<p>You may add a section Entitled &ldquo;Endorsements&rdquo;, provided it contains
nothing but endorsements of your Modified Version by various
parties&mdash;for example, statements of peer review or that the text has
been approved by an organization as the authoritative definition of a
standard.
</p>
<p>You may add a passage of up to five words as a Front-Cover Text, and a
passage of up to 25 words as a Back-Cover Text, to the end of the list
of Cover Texts in the Modified Version.  Only one passage of
Front-Cover Text and one of Back-Cover Text may be added by (or
through arrangements made by) any one entity.  If the Document already
includes a cover text for the same cover, previously added by you or
by arrangement made by the same entity you are acting on behalf of,
you may not add another; but you may replace the old one, on explicit
permission from the previous publisher that added the old one.
</p>
<p>The author(s) and publisher(s) of the Document do not by this License
give permission to use their names for publicity for or to assert or
imply endorsement of any Modified Version.
</p>
</li><li> COMBINING DOCUMENTS

<p>You may combine the Document with other documents released under this
License, under the terms defined in section 4 above for modified
versions, provided that you include in the combination all of the
Invariant Sections of all of the original documents, unmodified, and
list them all as Invariant Sections of your combined work in its
license notice, and that you preserve all their Warranty Disclaimers.
</p>
<p>The combined work need only contain one copy of this License, and
multiple identical Invariant Sections may be replaced with a single
copy.  If there are multiple Invariant Sections with the same name but
different contents, make the title of each such section unique by
adding at the end of it, in parentheses, the name of the original
author or publisher of that section if known, or else a unique number.
Make the same adjustment to the section titles in the list of
Invariant Sections in the license notice of the combined work.
</p>
<p>In the combination, you must combine any sections Entitled &ldquo;History&rdquo;
in the various original documents, forming one section Entitled
&ldquo;History&rdquo;; likewise combine any sections Entitled &ldquo;Acknowledgements&rdquo;,
and any sections Entitled &ldquo;Dedications&rdquo;.  You must delete all
sections Entitled &ldquo;Endorsements.&rdquo;
</p>
</li><li> COLLECTIONS OF DOCUMENTS

<p>You may make a collection consisting of the Document and other documents
released under this License, and replace the individual copies of this
License in the various documents with a single copy that is included in
the collection, provided that you follow the rules of this License for
verbatim copying of each of the documents in all other respects.
</p>
<p>You may extract a single document from such a collection, and distribute
it individually under this License, provided you insert a copy of this
License into the extracted document, and follow this License in all
other respects regarding verbatim copying of that document.
</p>
</li><li> AGGREGATION WITH INDEPENDENT WORKS

<p>A compilation of the Document or its derivatives with other separate
and independent documents or works, in or on a volume of a storage or
distribution medium, is called an &ldquo;aggregate&rdquo; if the copyright
resulting from the compilation is not used to limit the legal rights
of the compilation&rsquo;s users beyond what the individual works permit.
When the Document is included in an aggregate, this License does not
apply to the other works in the aggregate which are not themselves
derivative works of the Document.
</p>
<p>If the Cover Text requirement of section 3 is applicable to these
copies of the Document, then if the Document is less than one half of
the entire aggregate, the Document&rsquo;s Cover Texts may be placed on
covers that bracket the Document within the aggregate, or the
electronic equivalent of covers if the Document is in electronic form.
Otherwise they must appear on printed covers that bracket the whole
aggregate.
</p>
</li><li> TRANSLATION

<p>Translation is considered a kind of modification, so you may
distribute translations of the Document under the terms of section 4.
Replacing Invariant Sections with translations requires special
permission from their copyright holders, but you may include
translations of some or all Invariant Sections in addition to the
original versions of these Invariant Sections.  You may include a
translation of this License, and all the license notices in the
Document, and any Warranty Disclaimers, provided that you also include
the original English version of this License and the original versions
of those notices and disclaimers.  In case of a disagreement between
the translation and the original version of this License or a notice
or disclaimer, the original version will prevail.
</p>
<p>If a section in the Document is Entitled &ldquo;Acknowledgements&rdquo;,
&ldquo;Dedications&rdquo;, or &ldquo;History&rdquo;, the requirement (section 4) to Preserve
its Title (section 1) will typically require changing the actual
title.
</p>
</li><li> TERMINATION

<p>You may not copy, modify, sublicense, or distribute the Document except
as expressly provided for under this License.  Any other attempt to
copy, modify, sublicense or distribute the Document is void, and will
automatically terminate your rights under this License.  However,
parties who have received copies, or rights, from you under this
License will not have their licenses terminated so long as such
parties remain in full compliance.
</p>
</li><li> FUTURE REVISIONS OF THIS LICENSE

<p>The Free Software Foundation may publish new, revised versions
of the GNU Free Documentation License from time to time.  Such new
versions will be similar in spirit to the present version, but may
differ in detail to address new problems or concerns.  See
<a href="http://www.gnu.org/copyleft/">http://www.gnu.org/copyleft/</a>.
</p>
<p>Each version of the License is given a distinguishing version number.
If the Document specifies that a particular numbered version of this
License &ldquo;or any later version&rdquo; applies to it, you have the option of
following the terms and conditions either of that specified version or
of any later version that has been published (not as a draft) by the
Free Software Foundation.  If the Document does not specify a version
number of this License, you may choose any version ever published (not
as a draft) by the Free Software Foundation.
</p></li></ol>

<span id="ADDENDUM_003a-How-to-use-this-License-for-your-documents"></span><h3 class="appendixsec">C.1 ADDENDUM: How to use this License for your documents</h3>

<p>To use this License in a document you have written, include a copy of
the License in the document and put the following copyright and
license notices just after the title page:
</p>
<div class="example">
<pre class="example">  Copyright (C)  <var>year</var>  <var>your name</var>.
  Permission is granted to copy, distribute and/or modify this document
  under the terms of the GNU Free Documentation License, Version 1.2
  or any later version published by the Free Software Foundation;
  with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.
  A copy of the license is included in the section entitled ``GNU
  Free Documentation License''.
</pre></div>

<p>If you have Invariant Sections, Front-Cover Texts and Back-Cover Texts,
replace the &ldquo;with...Texts.&rdquo; line with this:
</p>
<div class="example">
<pre class="example">    with the Invariant Sections being <var>list their titles</var>, with
    the Front-Cover Texts being <var>list</var>, and with the Back-Cover Texts
    being <var>list</var>.
</pre></div>

<p>If you have Invariant Sections without Cover Texts, or some other
combination of the three, merge those two alternatives to suit the
situation.
</p>
<p>If your document contains nontrivial examples of program code, we
recommend releasing these examples in parallel under your choice of
free software license, such as the GNU General Public License,
to permit their use in free software.
</p>


<hr>
<span id="Index-of-Concepts"></span><div class="header">
<p>
Previous: <a href="#GNU-Free-Documentation-License" accesskey="p" rel="prev">GNU Free Documentation License</a>, Up: <a href="#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="#Index-of-Concepts" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Index-of-Concepts-1"></span><h2 class="unnumbered">Index of Concepts</h2>

<span id="index-tail-recursion"></span>
<table><tr><th valign="top">Jump to: &nbsp; </th><td><a class="summary-letter" href="#Index-of-Concepts_cp_letter-A"><b>A</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-of-Concepts_cp_letter-B"><b>B</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-of-Concepts_cp_letter-C"><b>C</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-of-Concepts_cp_letter-D"><b>D</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-of-Concepts_cp_letter-F"><b>F</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-of-Concepts_cp_letter-G"><b>G</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-of-Concepts_cp_letter-I"><b>I</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-of-Concepts_cp_letter-M"><b>M</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-of-Concepts_cp_letter-O"><b>O</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-of-Concepts_cp_letter-P"><b>P</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-of-Concepts_cp_letter-S"><b>S</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-of-Concepts_cp_letter-T"><b>T</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-of-Concepts_cp_letter-U"><b>U</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-of-Concepts_cp_letter-V"><b>V</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-of-Concepts_cp_letter-X"><b>X</b></a>
 &nbsp; 
</td></tr></table>
<table class="index-cp" border="0">
<tr><td></td><th align="left">Index Entry</th><td>&nbsp;</td><th align="left"> Section</th></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Index-of-Concepts_cp_letter-A">A</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-AddVoice"><code>AddVoice</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Configuration-of-the-Generic-Output-Module">Configuration of the Generic Output Module</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Index-of-Concepts_cp_letter-B">B</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Basic-ideas_002c-Motivation">Basic ideas, Motivation</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Motivation">Motivation</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Index-of-Concepts_cp_letter-C">C</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-C-API-type"><code>C API type</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Speech-Synthesis-Commands-in-C">Speech Synthesis Commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-C-API-type-1"><code>C API type</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Event-Notification-and-Index-Marking-in-C">Event Notification and Index Marking in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-C-API-type-2"><code>C API type</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Event-Notification-and-Index-Marking-in-C">Event Notification and Index Marking in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-C-API-type-3"><code>C API type</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Event-Notification-and-Index-Marking-in-C">Event Notification and Index Marking in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-char_002a"><code>char*</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Parameter-Setting-Commands-in-C">Parameter Setting Commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-char_002a-1"><code>char*</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Direct-SSIP-Communication-in-C">Direct SSIP Communication in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-char_002a-2"><code>char*</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Functions-used-by-module_005fmain_002ec">Functions used by module_main.c</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-char_002a-3"><code>char*</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Functions-used-by-module_005fmain_002ec">Functions used by module_main.c</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-char_002a-4"><code>char*</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Functions-used-by-module_005fmain_002ec">Functions used by module_main.c</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-char_002a-5"><code>char*</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Functions-used-by-module_005fmain_002ec">Functions used by module_main.c</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-char_002a-6"><code>char*</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Functions-used-by-module_005fmain_002ec">Functions used by module_main.c</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-char_002a_002a"><code>char**</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Information-Retrieval-Commands-in-C">Information Retrieval Commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-char_002a_002a-1"><code>char**</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Information-Retrieval-Commands-in-C">Information Retrieval Commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-char_002a_002a-2"><code>char**</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Information-Retrieval-Commands-in-C">Information Retrieval Commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-configuration">configuration</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Configuration">Configuration</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Index-of-Concepts_cp_letter-D">D</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-DBG"><code>DBG</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Initialization-Macros-and-Functions">Initialization Macros and Functions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-DBG-1"><code>DBG</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Initialization-Macros-and-Functions">Initialization Macros and Functions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-default-values">default values</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Configuration">Configuration</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Design">Design</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Basic-Design">Basic Design</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-different-synthesizers">different synthesizers</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Synthesis-Output-Modules">Synthesis Output Modules</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-do_005fpause"><code>do_pause</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Functions-used-by-module_005fmain_002ec">Functions used by module_main.c</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-do_005fquit"><code>do_quit</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Functions-used-by-module_005fmain_002ec">Functions used by module_main.c</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-do_005fset"><code>do_set</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Functions-used-by-module_005fmain_002ec">Functions used by module_main.c</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-do_005fspeak"><code>do_speak</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Functions-used-by-module_005fmain_002ec">Functions used by module_main.c</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-do_005fspeaking"><code>do_speaking</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Functions-used-by-module_005fmain_002ec">Functions used by module_main.c</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-do_005fstop"><code>do_stop</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Functions-used-by-module_005fmain_002ec">Functions used by module_main.c</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Index-of-Concepts_cp_letter-F">F</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-FATAL"><code>FATAL</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Initialization-Macros-and-Functions">Initialization Macros and Functions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-FATAL-1"><code>FATAL</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Initialization-Macros-and-Functions">Initialization Macros and Functions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-FDL_002c-GNU-Free-Documentation-License">FDL, GNU Free Documentation License</a>:</td><td>&nbsp;</td><td valign="top"><a href="#GNU-Free-Documentation-License">GNU Free Documentation License</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Index-of-Concepts_cp_letter-G">G</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-GenericExecuteSynth"><code>GenericExecuteSynth</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Configuration-of-the-Generic-Output-Module">Configuration of the Generic Output Module</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GenericLanguage"><code>GenericLanguage</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Configuration-of-the-Generic-Output-Module">Configuration of the Generic Output Module</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GenericPitchAdd"><code>GenericPitchAdd</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Configuration-of-the-Generic-Output-Module">Configuration of the Generic Output Module</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GenericPitchMultiply"><code>GenericPitchMultiply</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Configuration-of-the-Generic-Output-Module">Configuration of the Generic Output Module</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GenericPitchRangeAdd"><code>GenericPitchRangeAdd</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Configuration-of-the-Generic-Output-Module">Configuration of the Generic Output Module</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GenericPitchRangeMultiply"><code>GenericPitchRangeMultiply</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Configuration-of-the-Generic-Output-Module">Configuration of the Generic Output Module</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GenericRateAdd"><code>GenericRateAdd</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Configuration-of-the-Generic-Output-Module">Configuration of the Generic Output Module</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GenericRateMultiply"><code>GenericRateMultiply</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Configuration-of-the-Generic-Output-Module">Configuration of the Generic Output Module</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GPL_002c-GNU-General-Public-License">GPL, GNU General Public License</a>:</td><td>&nbsp;</td><td valign="top"><a href="#GNU-General-Public-License">GNU General Public License</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Index-of-Concepts_cp_letter-I">I</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-INIT_005fSETTINGS_005fTABLES"><code>INIT_SETTINGS_TABLES</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Initialization-Macros-and-Functions">Initialization Macros and Functions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-INIT_005fSETTINGS_005fTABLES-1"><code>INIT_SETTINGS_TABLES</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Initialization-Macros-and-Functions">Initialization Macros and Functions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-int"><code>int</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Speech-Synthesis-Commands-in-C">Speech Synthesis Commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-int-1"><code>int</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Speech-Synthesis-Commands-in-C">Speech Synthesis Commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-int-2"><code>int</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Speech-output-control-commands-in-C">Speech output control commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-int-3"><code>int</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Speech-output-control-commands-in-C">Speech output control commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-int-4"><code>int</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Speech-output-control-commands-in-C">Speech output control commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-int-5"><code>int</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Speech-output-control-commands-in-C">Speech output control commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-int-6"><code>int</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Speech-output-control-commands-in-C">Speech output control commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-int-7"><code>int</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Speech-output-control-commands-in-C">Speech output control commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-int-8"><code>int</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Speech-output-control-commands-in-C">Speech output control commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-int-9"><code>int</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Speech-output-control-commands-in-C">Speech output control commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-int-10"><code>int</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Speech-output-control-commands-in-C">Speech output control commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-int-11"><code>int</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Speech-output-control-commands-in-C">Speech output control commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-int-12"><code>int</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Speech-output-control-commands-in-C">Speech output control commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-int-13"><code>int</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Speech-output-control-commands-in-C">Speech output control commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-int-14"><code>int</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Characters-and-Keys-in-C">Characters and Keys in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-int-15"><code>int</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Characters-and-Keys-in-C">Characters and Keys in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-int-16"><code>int</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Characters-and-Keys-in-C">Characters and Keys in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-int-17"><code>int</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Sound-Icons-in-C">Sound Icons in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-int-18"><code>int</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Parameter-Setting-Commands-in-C">Parameter Setting Commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-int-19"><code>int</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Parameter-Setting-Commands-in-C">Parameter Setting Commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-int-20"><code>int</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Parameter-Setting-Commands-in-C">Parameter Setting Commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-int-21"><code>int</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Parameter-Setting-Commands-in-C">Parameter Setting Commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-int-22"><code>int</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Parameter-Setting-Commands-in-C">Parameter Setting Commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-int-23"><code>int</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Parameter-Setting-Commands-in-C">Parameter Setting Commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-int-24"><code>int</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Parameter-Setting-Commands-in-C">Parameter Setting Commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-int-25"><code>int</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Parameter-Setting-Commands-in-C">Parameter Setting Commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-int-26"><code>int</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Parameter-Setting-Commands-in-C">Parameter Setting Commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-int-27"><code>int</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Parameter-Setting-Commands-in-C">Parameter Setting Commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-int-28"><code>int</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Parameter-Setting-Commands-in-C">Parameter Setting Commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-int-29"><code>int</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Parameter-Setting-Commands-in-C">Parameter Setting Commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-int-30"><code>int</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Parameter-Setting-Commands-in-C">Parameter Setting Commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-int-31"><code>int</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Parameter-Setting-Commands-in-C">Parameter Setting Commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-int-32"><code>int</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Event-Notification-and-Index-Marking-in-C">Event Notification and Index Marking in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-int-33"><code>int</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Event-Notification-and-Index-Marking-in-C">Event Notification and Index Marking in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-int-34"><code>int</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Event-Notification-and-Index-Marking-in-C">Event Notification and Index Marking in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-int-35"><code>int</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Direct-SSIP-Communication-in-C">Direct SSIP Communication in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-int-36"><code>int</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Output-Module-Functions">Output Module Functions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-int-37"><code>int</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Functions-for-use-when-talking-to-synthesizer">Functions for use when talking to synthesizer</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-int-38"><code>int</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Multi_002dprocess-output-modules">Multi-process output modules</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-int-39"><code>int</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Multi_002dprocess-output-modules">Multi-process output modules</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-int-40"><code>int</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Multi_002dprocess-output-modules">Multi-process output modules</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-int-module_005fstop"><code>int module_stop</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Output-Module-Functions">Output Module Functions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-int-spd_005fpause_0028_0029"><code>int spd_pause()</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Speech-output-control-commands-in-C">Speech output control commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-int-spd_005fresume_0028_0029"><code>int spd_resume()</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Speech-output-control-commands-in-C">Speech output control commands in C</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Index-of-Concepts_cp_letter-M">M</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-module_005fchild_005fdp_005finit"><code>module_child_dp_init</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Multi_002dprocess-output-modules">Multi-process output modules</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-module_005fchild_005fdp_005fread"><code>module_child_dp_read</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Multi_002dprocess-output-modules">Multi-process output modules</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-module_005fchild_005fdp_005fwrite"><code>module_child_dp_write</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Multi_002dprocess-output-modules">Multi-process output modules</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-module_005fclose"><code>module_close</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Functions-for-use-when-talking-to-synthesizer">Functions for use when talking to synthesizer</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-module_005fget_005fmessage_005fpart"><code>module_get_message_part</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Functions-for-use-when-talking-to-synthesizer">Functions for use when talking to synthesizer</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-module_005fparent_005fdp_005finit"><code>module_parent_dp_init</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Multi_002dprocess-output-modules">Multi-process output modules</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-module_005fparent_005fdp_005fread"><code>module_parent_dp_read</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Multi_002dprocess-output-modules">Multi-process output modules</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-module_005fparent_005fdp_005fwrite"><code>module_parent_dp_write</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Multi_002dprocess-output-modules">Multi-process output modules</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-module_005fparent_005fwait_005fcontinue"><code>module_parent_wait_continue</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Multi_002dprocess-output-modules">Multi-process output modules</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-module_005fparent_005fwfork"><code>module_parent_wfork</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Multi_002dprocess-output-modules">Multi-process output modules</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-module_005fpause_0028_0029"><code>module_pause()</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Output-Module-Functions">Output Module Functions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-module_005freport_005fevent_005f_002a"><code>module_report_event_*</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Functions-for-use-when-talking-to-synthesizer">Functions for use when talking to synthesizer</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-module_005freport_005findex_005fmark"><code>module_report_index_mark</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Functions-for-use-when-talking-to-synthesizer">Functions for use when talking to synthesizer</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-module_005fsigblockall"><code>module_sigblockall</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Multi_002dprocess-output-modules">Multi-process output modules</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-module_005fsigblockusr"><code>module_sigblockusr</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Multi_002dprocess-output-modules">Multi-process output modules</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-module_005fsigunblockusr"><code>module_sigunblockusr</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Multi_002dprocess-output-modules">Multi-process output modules</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-module_005fspeak_0028_0029"><code>module_speak()</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Output-Module-Functions">Output Module Functions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-module_005fstop_0028_0029"><code>module_stop()</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Output-Module-Functions">Output Module Functions</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Index-of-Concepts_cp_letter-O">O</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Other-programs">Other programs</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Current-State">Current State</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-output-module">output module</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Synthesis-Output-Modules">Synthesis Output Modules</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Index-of-Concepts_cp_letter-P">P</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Philosophy">Philosophy</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Motivation">Motivation</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Index-of-Concepts_cp_letter-S">S</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-size_005ft"><code>size_t</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Multi_002dprocess-output-modules">Multi-process output modules</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-size_005ft-module_005fpause"><code>size_t module_pause</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Output-Module-Functions">Output Module Functions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-SPDCallback"><code>SPDCallback</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Event-Notification-and-Index-Marking-in-C">Event Notification and Index Marking in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-SPDCallbackIM"><code>SPDCallbackIM</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Event-Notification-and-Index-Marking-in-C">Event Notification and Index Marking in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-SPDConnection_002a"><code>SPDConnection*</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Initializing-and-Terminating-in-C">Initializing and Terminating in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-SPDConnection_002a-1"><code>SPDConnection*</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Initializing-and-Terminating-in-C">Initializing and Terminating in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-SPDNotification"><code>SPDNotification</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Event-Notification-and-Index-Marking-in-C">Event Notification and Index Marking in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-SPDPriority"><code>SPDPriority</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Speech-Synthesis-Commands-in-C">Speech Synthesis Commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-spd_005fcancel_005fall_0028_0029"><code>spd_cancel_all()</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Speech-output-control-commands-in-C">Speech output control commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-spd_005fcancel_005fuid_0028_0029"><code>spd_cancel_uid()</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Speech-output-control-commands-in-C">Speech output control commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-spd_005fchar_0028_0029"><code>spd_char()</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Characters-and-Keys-in-C">Characters and Keys in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-spd_005fclose_0028_0029"><code>spd_close()</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Initializing-and-Terminating-in-C">Initializing and Terminating in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-spd_005fexecute_005fcommand_0028_0029"><code>spd_execute_command()</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Direct-SSIP-Communication-in-C">Direct SSIP Communication in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-spd_005fget_005fclient_005flist_0028_0029"><code>spd_get_client_list()</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#History-Commands-in-C">History Commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-spd_005fget_005fmessage_005flist_005ffd_0028_0029"><code>spd_get_message_list_fd()</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#History-Commands-in-C">History Commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-spd_005fget_005foutput_005fmodule_0028_0029"><code>spd_get_output_module()</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Parameter-Setting-Commands-in-C">Parameter Setting Commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-spd_005fget_005fvoice_005fpitch_0028_0029"><code>spd_get_voice_pitch()</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Parameter-Setting-Commands-in-C">Parameter Setting Commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-spd_005fget_005fvoice_005frate_0028_0029"><code>spd_get_voice_rate()</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Parameter-Setting-Commands-in-C">Parameter Setting Commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-spd_005fget_005fvolume_0028_0029"><code>spd_get_volume()</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Parameter-Setting-Commands-in-C">Parameter Setting Commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-spd_005fhistory_005fselect_005fclient_0028_0029"><code>spd_history_select_client()</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#History-Commands-in-C">History Commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-spd_005fkey_0028_0029"><code>spd_key()</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Characters-and-Keys-in-C">Characters and Keys in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-spd_005flist_005fmodules_0028_0029"><code>spd_list_modules()</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Information-Retrieval-Commands-in-C">Information Retrieval Commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-spd_005flist_005fsynthesis_005fvoices_0028_0029"><code>spd_list_synthesis_voices()</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Information-Retrieval-Commands-in-C">Information Retrieval Commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-spd_005flist_005fvoices_0028_0029"><code>spd_list_voices()</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Information-Retrieval-Commands-in-C">Information Retrieval Commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-spd_005fopen_0028_0029"><code>spd_open()</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Initializing-and-Terminating-in-C">Initializing and Terminating in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-spd_005fopen2_0028_0029"><code>spd_open2()</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Initializing-and-Terminating-in-C">Initializing and Terminating in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-spd_005fpause_005fall_0028_0029"><code>spd_pause_all()</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Speech-output-control-commands-in-C">Speech output control commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-spd_005fpause_005fuid_0028_0029"><code>spd_pause_uid()</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Speech-output-control-commands-in-C">Speech output control commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-spd_005fresume_005fall_0028_0029"><code>spd_resume_all()</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Speech-output-control-commands-in-C">Speech output control commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-spd_005fresume_005fuid_0028_0029"><code>spd_resume_uid()</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Speech-output-control-commands-in-C">Speech output control commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-spd_005fsay_0028_0029"><code>spd_say()</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Speech-Synthesis-Commands-in-C">Speech Synthesis Commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-spd_005fsayf_0028_0029"><code>spd_sayf()</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Speech-Synthesis-Commands-in-C">Speech Synthesis Commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-spd_005fsay_005fwchar_0028_0029"><code>spd_say_wchar()</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Characters-and-Keys-in-C">Characters and Keys in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-spd_005fsend_005fdata_0028_0029"><code>spd_send_data()</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Direct-SSIP-Communication-in-C">Direct SSIP Communication in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-spd_005fset_005fdata_005fmode_0028_0029"><code>spd_set_data_mode()</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Parameter-Setting-Commands-in-C">Parameter Setting Commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-spd_005fset_005flanguage_0028_0029"><code>spd_set_language()</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Parameter-Setting-Commands-in-C">Parameter Setting Commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-spd_005fset_005fnotification"><code>spd_set_notification</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Event-Notification-and-Index-Marking-in-C">Event Notification and Index Marking in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-spd_005fset_005fnotification_005foff"><code>spd_set_notification_off</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Event-Notification-and-Index-Marking-in-C">Event Notification and Index Marking in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-spd_005fset_005fnotification_005fon"><code>spd_set_notification_on</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Event-Notification-and-Index-Marking-in-C">Event Notification and Index Marking in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-spd_005fset_005foutput_005fmodule_0028_0029"><code>spd_set_output_module()</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Parameter-Setting-Commands-in-C">Parameter Setting Commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-spd_005fset_005fpunctuation_0028_0029"><code>spd_set_punctuation()</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Parameter-Setting-Commands-in-C">Parameter Setting Commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-spd_005fset_005fspelling_0028_0029"><code>spd_set_spelling()</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Parameter-Setting-Commands-in-C">Parameter Setting Commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-spd_005fset_005fvoice_005fpitch_0028_0029"><code>spd_set_voice_pitch()</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Parameter-Setting-Commands-in-C">Parameter Setting Commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-spd_005fset_005fvoice_005fpitch_0028_0029-1"><code>spd_set_voice_pitch()</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Parameter-Setting-Commands-in-C">Parameter Setting Commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-spd_005fset_005fvoice_005frate_0028_0029"><code>spd_set_voice_rate()</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Parameter-Setting-Commands-in-C">Parameter Setting Commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-spd_005fset_005fvoice_005ftype_0028_0029"><code>spd_set_voice_type()</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Parameter-Setting-Commands-in-C">Parameter Setting Commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-spd_005fset_005fvoice_005ftype_0028_0029-1"><code>spd_set_voice_type()</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Parameter-Setting-Commands-in-C">Parameter Setting Commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-spd_005fset_005fvolume_0028_0029"><code>spd_set_volume()</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Parameter-Setting-Commands-in-C">Parameter Setting Commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-spd_005fsound_005ficon_0028_0029"><code>spd_sound_icon()</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Sound-Icons-in-C">Sound Icons in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-spd_005fstop_0028_0029"><code>spd_stop()</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Speech-output-control-commands-in-C">Speech output control commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-spd_005fstop_005fall_0028_0029"><code>spd_stop_all()</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Speech-output-control-commands-in-C">Speech output control commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-spd_005fstop_005fuid_0028_0029"><code>spd_stop_uid()</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Speech-output-control-commands-in-C">Speech output control commands in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-static"><code>static</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Functions-for-use-when-talking-to-synthesizer">Functions for use when talking to synthesizer</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-static-1"><code>static</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Memory-Handling-Functions">Memory Handling Functions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-static-2"><code>static</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Memory-Handling-Functions">Memory Handling Functions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Synthesizers">Synthesizers</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Current-State">Current State</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Index-of-Concepts_cp_letter-T">T</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-tail-recursion">tail recursion</a>:</td><td>&nbsp;</td><td valign="top"><a href="#Index-of-Concepts">Index of Concepts</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Index-of-Concepts_cp_letter-U">U</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-UPDATE_005fPARAMETER"><code>UPDATE_PARAMETER</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Generic-Macros-and-Functions">Generic Macros and Functions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-UPDATE_005fPARAMETER-1"><code>UPDATE_PARAMETER</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Generic-Macros-and-Functions">Generic Macros and Functions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-UPDATE_005fSTRING_005fPARAMETER"><code>UPDATE_STRING_PARAMETER</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Generic-Macros-and-Functions">Generic Macros and Functions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-UPDATE_005fSTRING_005fPARAMETER-1"><code>UPDATE_STRING_PARAMETER</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Generic-Macros-and-Functions">Generic Macros and Functions</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Index-of-Concepts_cp_letter-V">V</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-void"><code>void</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Initializing-and-Terminating-in-C">Initializing and Terminating in C</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-void-1"><code>void</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Functions-used-by-module_005fmain_002ec">Functions used by module_main.c</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-void-2"><code>void</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Functions-for-use-when-talking-to-synthesizer">Functions for use when talking to synthesizer</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-void-3"><code>void</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Functions-for-use-when-talking-to-synthesizer">Functions for use when talking to synthesizer</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-void-4"><code>void</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Multi_002dprocess-output-modules">Multi-process output modules</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-void-5"><code>void</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Multi_002dprocess-output-modules">Multi-process output modules</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-void-6"><code>void</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Multi_002dprocess-output-modules">Multi-process output modules</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-void-7"><code>void</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Multi_002dprocess-output-modules">Multi-process output modules</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-void-8"><code>void</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Multi_002dprocess-output-modules">Multi-process output modules</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-void-9"><code>void</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Multi_002dprocess-output-modules">Multi-process output modules</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-void-10"><code>void</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Multi_002dprocess-output-modules">Multi-process output modules</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-void-11"><code>void</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Memory-Handling-Functions">Memory Handling Functions</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
<tr><th id="Index-of-Concepts_cp_letter-X">X</th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-xfree"><code>xfree</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Memory-Handling-Functions">Memory Handling Functions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-xmalloc"><code>xmalloc</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Memory-Handling-Functions">Memory Handling Functions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-xrealloc"><code>xrealloc</code></a>:</td><td>&nbsp;</td><td valign="top"><a href="#Memory-Handling-Functions">Memory Handling Functions</a></td></tr>
<tr><td colspan="4"> <hr></td></tr>
</table>
<table><tr><th valign="top">Jump to: &nbsp; </th><td><a class="summary-letter" href="#Index-of-Concepts_cp_letter-A"><b>A</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-of-Concepts_cp_letter-B"><b>B</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-of-Concepts_cp_letter-C"><b>C</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-of-Concepts_cp_letter-D"><b>D</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-of-Concepts_cp_letter-F"><b>F</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-of-Concepts_cp_letter-G"><b>G</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-of-Concepts_cp_letter-I"><b>I</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-of-Concepts_cp_letter-M"><b>M</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-of-Concepts_cp_letter-O"><b>O</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-of-Concepts_cp_letter-P"><b>P</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-of-Concepts_cp_letter-S"><b>S</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-of-Concepts_cp_letter-T"><b>T</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-of-Concepts_cp_letter-U"><b>U</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-of-Concepts_cp_letter-V"><b>V</b></a>
 &nbsp; 
<a class="summary-letter" href="#Index-of-Concepts_cp_letter-X"><b>X</b></a>
 &nbsp; 
</td></tr></table>

<hr>



</body>
</html>
